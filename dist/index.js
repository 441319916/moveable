/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.17.7
*/
!function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}function l(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,a=[e],i=0;e.stop=function(){r=!0},e.currentTarget=this;for(var o=arguments.length,s=new Array(2<o?o-2:0),l=2;l<o;l++)s[l-2]=arguments[l];for(1<=s.length&&(a=a.concat(s)),i=0;n[i];i++)n[i].apply(this,a);return!r},e.once=function(a,i){if("object"==typeof a&&l(i)){var t,e=a;for(t in e)this.once(t,e[t]);return this}var o;return"string"==typeof a&&"function"==typeof i&&(o=this).on(a,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];i.apply(o,n),o.off(a,t)}),this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&l(e)){var n,r=t;for(n in r)this.on(n,r[n]);return this}var a;return"string"==typeof t&&"function"==typeof e&&(l(a=this._eventHandler[t])&&(this._eventHandler[t]=[],a=this._eventHandler[t]),a.push(e)),this},e.off=function(t,e){if(l(t))return this._eventHandler={},this;if(l(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,r=t;for(n in r)this.off(n,r[n]);return this}var a=this._eventHandler[t];if(a)for(var i,o=0;void 0!==(i=a[o]);o++)if(i===e){a=a.splice(o,1);break}return this},t}();return t.VERSION="2.1.2",t}();function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}function e(n,t){return t.replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function m(e,n){return function(t){t&&(e[n]=t)}}function o(e,n,r){return function(t){t&&(e[n][r]=t)}}function u(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,a=n.indexOf(t),i=-1===a?n.length:a;n[i]=t,r[i]=e},t}(),y=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),x="function"==typeof Map,p=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var w=function(){function t(t,e,n,r,a,i,o,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=a,this.maintained=i,this.changedBeforeAdded=o,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,n,s,l,e=(t=this.changedBeforeAdded,n=this.fixed,s=[],l=[],t.forEach(function(t){var e=t[0],n=t[1],r=new p;s[e]=r,l[n]=r}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],r=t[1];if(n===r)return[0,0];var a=s[n],i=l[r-1],o=a.getIndex();return a.disconnect(),i?a.connect(i,i.next):a.connect(void 0,s[0]),[o,a.getIndex()]})),u=this.changed,c=[];this.cacheOrdered=e.filter(function(t,e){var n=t[0],r=t[1],a=u[e],i=a[0],o=a[1];if(n!==r)return c.push([i,o]),!0}),this.cachePureChanged=c},t}();function c(t,e,n){var r=x?Map:n?y:b,a=n||function(t){return t},i=[],o=[],s=[],l=t.map(a),u=e.map(a),c=new r,p=new r,f=[],d=[],h={},g=[],v=0,m=0;return l.forEach(function(t,e){c.set(t,e)}),u.forEach(function(t,e){p.set(t,e)}),l.forEach(function(t,e){var n=p.get(t);void 0===n?(++m,o.push(e)):h[n]=m}),u.forEach(function(t,e){var n=c.get(t);void 0===n?(i.push(e),++v):(s.push([n,e]),m=h[e]||0,f.push([n-m,e-v]),d.push(e===n),n!==e&&g.push([n,e]))}),o.reverse(),new w(t,e,i,o,g,s,f,d)}function f(t){if(!_)return"";var e=(_.body||_.documentElement).style,n=B.length;if(typeof e[t]!==P)return t;for(var r=0;r<n;++r){var a="-"+B[r]+"-"+t;if(typeof e[a]!==P)return a}return""}var d=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=c(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),h="rgb",g="rgba",v="hsl",S="hsla",M=[h,g,v,S],E="function",D="property",C="array",z="object",O="string",R="number",P="undefined",_=typeof document!==P&&document,B=["webkit","ms","moz","o"],G=f("transform"),k=f("filter"),A=f("animation"),j=['"',"'",'\\"',"\\'"];function N(t){return typeof t===P}function T(t){return t&&typeof t===z}function ht(t){return Array.isArray(t)}function q(t){return typeof t===O}function I(t,e,n,r){for(var a=n;a<r;++a){var i=e[a].trim();if(i===t)return a;var o=a;if("("===i?o=I(")",e,a+1,r):-1<j.indexOf(i)&&(o=I(i,e,a+1,r)),-1===o)break;a=o}return-1}function Y(t,e){for(var n=new RegExp("(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(n).filter(Boolean),a=r.length,i=[],o=[],s=0;s<a;++s){var l=r[s].trim(),u=s;if("("===l)u=I(")",r,s+1,a);else{if(")"===l)throw new Error("invalid format");if(-1<j.indexOf(l))u=I(l,r,s+1,a);else if(l===e){o.length&&(i.push(o.join("")),o=[]);continue}}-1===u&&(u=a-1),o.push(r.slice(s,u+1).join("")),s=u}return o.length&&i.push(o.join("")),i}function X(t){return Y(t,",")}function F(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function W(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function L(t,e,n){void 0===n&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function H(t){var e=t.replace("#",""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function K(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?H((u=(l=t).charAt(1),c=l.charAt(2),p=l.charAt(3),f=l.charAt(4),["#",u,u,c,c,p,p,f,f].join(""))):H(t);if(-1!==t.indexOf("(")){var e=F(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=X(r),i=[],o=a.length;switch(n){case h:case g:for(var s=0;s<o;++s)i[s]=parseFloat(a[s]);return i;case v:case S:for(s=0;s<o;++s)-1!==a[s].indexOf("%")?i[s]=parseFloat(a[s])/100:i[s]=parseFloat(a[s]);return function(t){var e=t[0],n=t[1],r=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var a,i=(1-Math.abs(2*r-1))*n,o=i*(1-Math.abs(e/60%2-1)),s=r-i/2;return e<60?a=[i,o,0]:e<120?a=[o,i,0]:e<180?a=[0,i,o]:e<240?a=[0,o,i]:e<300?a=[o,0,i]:e<360&&(a=[i,0,o]),[Math.round(255*(a[0]+s)),Math.round(255*(a[1]+s)),Math.round(255*(a[2]+s)),3<t.length?t[3]:1]}(i)}}var l,u,c,p,f}function V(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function U(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function $(t,e){var n;t.classList?t.classList.remove(e):(n=new RegExp("(\\s|^)"+e+"(\\s|$)"),t.className=t.className.replace(n," "))}function J(t,e,n,r){t.addEventListener(e,n,r)}function Z(t,e,n){t.removeEventListener(e,n)}var Q=function(t,e){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function tt(t,e){function n(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var et=function(){return(et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function nt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function rt(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function at(a,i){var o=Object.keys(a),n=Object.keys(i),t=c(o,n,function(t){return t}),r={},s={},l={};return t.added.forEach(function(t){var e=n[t];r[e]=i[e]}),t.removed.forEach(function(t){var e=o[t];s[e]=a[e]}),t.maintained.forEach(function(t){var e=t[0],n=o[e],r=[a[n],i[n]];a[n]!==i[n]&&(l[n]=r)}),{added:r,removed:s,changed:l}}function it(t){t.forEach(function(t){t()})}function ot(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function st(t,e,n,r){return q(t)?new dt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?gt:t.type.prototype.render?yt:mt)(t.type,e,n,r,t.ref,t.props)}function lt(t){var e=t.className,n=nt(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function ut(t,e){if(!e)return t;for(var n in e)N(t[n])&&(t[n]=e[n]);return t}function ct(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,o=a.ref,s=nt(a,["key","ref"]);return{type:t,key:i,ref:o,props:et(et({},s),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat(ht(t)?e(t):t)}),n}(n).filter(function(t){return null!=t&&!1!==t})})}}var pt=function(){function t(t,e,n,r,a,i){void 0===i&&(i={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=a,this.props=i,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!q(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var a=this.props;return q(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?a:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function ft(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(pt),gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t}tt(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return rt(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=document.createElement(this.type)),Et(this,this._providers,this.props.children,t,null);var a=this.base,i=ft(e),o=i.attributes,s=i.events,l=ft(this.props),u=l.attributes,c=l.events;return function(t,e,n){var r=at(t,e),a=r.added,i=r.removed,o=r.changed;for(var s in a)n.setAttribute(s,a[s]);for(var s in o)n.setAttribute(s,o[s][1]);for(var s in i)n.removeAttribute(s)}(lt(o),lt(u),a),function(t,e,n){var r=at(t,e),a=r.added,i=r.removed,o=r.changed;for(var s in i)n.removeEventListener(s);for(var s in a)n.addEventListener(s,a[s]);for(var s in o)n.removeEventListener(s),n.addEventListener(s,o[s][1]);for(var s in i)n.removeEventListener(s)}(s,c,this),function(t,e,n){var r=n.style,a=at(t,e),i=a.added,o=a.removed,s=a.changed;for(var l in i)r.setProperty?r.setProperty(l,i[l]):r[l]=i[l];for(var l in s)r.setProperty?r.setProperty(l,s[l][1]):r[l]=s[l][1];for(var l in o)r.removeProperty?r.removeProperty(l):r[l]=""}(e.style||{},this.props.style||{},a),t.push(function(){r?n._mounted():n._updated()}),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach(function(t){t._unmount()}),this.events={},e.parentNode.removeChild(e)},t}(pt);function vt(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?vt(e[0].base):null}var mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Et(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(pt),bt=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}tt(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(pt),yt=function(o){function t(t,e,n,r,a,i){return void 0===i&&(i={}),o.call(this,t,e,n,r,a,ut(i,t.defaultProps))||this}tt(t,o);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(ut(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this;this.props=ut(this.props,this.type.defaultProps);var a=!this.base;a?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var i=this.base,o=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Et(this,this._providers,s?[s]:[],t,n,null),t.push(function(){a?(r._mounted(),i.componentDidMount()):(r._updated(),i.componentDidUpdate(e,o))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(pt),xt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],a=this._provider;Et(a.container,[a],[a.original],r,et(et({},this.state),t),n)&&(e&&r.push(e),it(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return rt(this.props,t)||rt(this.state,e)},e}(xt),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new bt(n),Dt(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Dt(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Dt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(wt);function Mt(a,o,i){var s=i.map(function(t){return q(t)?null:t.key}),t=c(ot(o.map(function(t){return t.key})),ot(s),function(t){return t});t.removed.forEach(function(t){o.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],n=t[1],r=o.splice(e,1)[0];o.splice(n,0,r);var a=vt(r.base),i=vt(o[n+1]&&o[n+1].base);a&&a.parentNode.insertBefore(a,i)}),t.added.forEach(function(t){o.splice(t,0,st(i[t],s[t],t,a))});var e=t.maintained.filter(function(t){t[0];var e=t[1],n=i[e],r=o[e];return(q(n)?"text_"+n:n.type)!==r.type?(r._unmount(),o.splice(e,1,st(n,s[e],e,a)),!0):(r.index=e,!1)});return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}(t.added,e.map(function(t){t[0];return t[1]}))}function Et(a,i,n,r,o,s){var t=Mt(a,i,n),e=i.filter(function(t,e){return t._update(r,n[e],o,s)}),l=function t(e){if(!e)return null;var n=e.base;return n instanceof Node?n:t(e.container)}(a);return l&&t.reverse().forEach(function(t){var e,n=i[t],r=vt(n.base);r&&(l===r||r.parentNode||(e=function(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=vt(n[a].base);if(i)return i}return null}(a,n),l.insertBefore(r,e)))}),0<e.length}function Dt(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r,a,i,o,s=!!n;return n=n||new bt(e),a=t?[t]:[],o=[],Et(r=n,r._providers,a,o,i),it(o),s||(e.__REACT_COMPAT__=n),n}function Ct(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Dt(t,e,r),n&&n()}function zt(t,e){return ct(St,{element:t,container:e})}var Ot=("undefined"!=typeof window&&window||{}).navigator,Rt={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function Pt(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r])&&n.push(t[r]);return n}var _t=void 0;function Bt(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function Gt(t,e){var n=Pt(t,function(t){return Bt(_t,t.criteria)})[0];return n&&n.identity||e.name}function kt(t,r){return Pt(t,function(t){var e=t.criteria,n=new RegExp(t.identity,"i").test(r);return!!(e?n&&Bt(_t,e):n)})[0]}function At(t,e){var n=Rt.defaultString.browser.version,r=new RegExp("("+t+")","i").exec(e);if(!r)return n;var a,i=r.index,o=r[0];return-1<i&&(a=i+o.length+1,n=e.substring(a).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")),n}function jt(t){var e;if(t)return At((e=t,kt(Rt.browser,e)||{criteria:e,versionSearch:e,identity:e}).versionSearch||t,_t)}function Tt(){var t=Rt.webview,e=void 0;return function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(Pt(t,function(t){return Bt(_t,t.criteria)}),function(t){return e=At(t.browserVersionSearch,_t),!(!Bt(_t,t.webviewToken)&&!Bt(e,t.webviewBrowserVersion))})}function qt(t){var e,n=(e=t,kt(Rt.os,e)||{}),r=Rt.defaultString.os.version,a=void 0;if(t){if(n.versionAlias)return n.versionAlias;var i=new RegExp("("+(n.versionSearch||t)+")\\s([\\d_\\.]+|\\d_0)","i");return i.exec(_t)&&(a=i.exec(_t)[2].replace(/_/g,".").replace(/;|\)/g,"")),a||r}}function Nt(){var t=Gt(Rt.os,Rt.defaultString.os);return{name:t,version:qt(t)}}function It(){var t=Gt(Rt.browser,Rt.defaultString.browser);return{name:t,version:jt(t),webview:Tt()}}function Yt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ot.userAgent;_t=t;var e={os:Nt(),browser:It(),isMobile:-1!==_t.indexOf("Mobi")};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}function Xt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function Ft(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=ae(e),a=0;a<e;++a){var i=e*a,o=e*(a+1),s=i+a;if(0===n[s])for(var l=a+1;l<e;++l)if(n[e*l+a]){!function(t,e,n,r,a){for(var i=n;i<r;++i){var o=t[i],s=e[i];t[i]=t[a+i-n],t[a+i-n]=o,e[i]=e[a+i-n],e[a+i-n]=s}}(n,r,i,o,e*l);break}if(!n[s])return[];!function(t,e,n,r,a){for(var i=n;i<r;++i)t[i]/=a,e[i]/=a}(n,r,i,o,n[s]);for(l=0;l<e;++l){var u=e*l,c=u+e,p=n[u+a];0!==p&&a!==l&&function(t,e,n,r,a,i){for(var o=n;o<r;++o)t[o]+=t[a+o-n]*i,e[o]+=e[a+o-n]*i}(n,r,u,c,i,-p)}}return r}function Wt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function Lt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return 0<=a?a:a+2*Math.PI}function Ht(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Kt(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=ae(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)r[i*n+o]=t[i*e+o];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Vt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ae(e);return t.forEach(function(t){r=Ut(r,t,e)}),r}function Ut(t,e,n){var r=[],a=t.length/n,i=e.length/a;if(!a)return e;if(!i)return t;for(var o=0;o<n;++o)for(var s=0;s<i;++s)for(var l=r[o*i+s]=0;l<a;++l)r[o*i+s]+=t[o*a+l]*e[l*i+s];return r}function $t(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],a=t.length/n,i=e.length/a,o=0;o<n;++o)for(var s=0;s<i;++s)for(var l=r[o+s*i]=0;l<a;++l)r[o+s*i]+=t[o+l*a]*e[l+s*i];return r}function Jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=0,a=n-1;0<=a;--a)r+=t[a];return n?r/n:0}function Zt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function Qt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function te(t,e,n){void 0===n&&(n=e.length);var r=Ut(t,e,n),a=r[n-1];return r.map(function(t){return t/a})}function ee(t,e){return te(re(e,3),Ht(t,3))}function ne(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Wt(t)}function re(t,e){var n=Math.cos(t),r=Math.sin(t),a=ae(e);return a[0]=n,a[1]=-r,a[e]=r,a[e+1]=n,a}function ae(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function ie(t,e){for(var n=ae(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function oe(t,e){for(var n=ae(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(a+1)-1]=t[a];return n}function se(t,e,n,r,a,i,o,s){var l=t[0],u=t[1],c=e[0],p=e[1],f=n[0],d=n[1],h=r[0],g=r[1],v=a[0],m=a[1],b=i[0],y=i[1],x=o[0],w=o[1],S=s[0],M=s[1],E=Ft([l,u,1,0,0,0,-v*l,-v*u,0,0,0,l,u,1,-m*l,-m*u,c,p,1,0,0,0,-b*c,-b*p,0,0,0,c,p,1,-y*c,-y*p,f,d,1,0,0,0,-x*f,-x*d,0,0,0,f,d,1,-w*f,-w*d,h,g,1,0,0,0,-S*h,-S*g,0,0,0,h,g,1,-M*h,-M*g],8);if(!E.length)return[];var D=Ut(E,[v,m,b,y,x,w,S,M],8);return D[8]=1,Kt(D,3,4)}Yt.VERSION="2.1.5";var le=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function ue(l){var u,c="rCS"+le(l).toString(36),p=0;return{className:c,inject:function(t){var e,n,r,a,i,o=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),s=0===p;return(o||s)&&(n=c,r=l,a=o,(i=document.createElement("style")).setAttribute("type","text/css"),i.innerHTML=r.replace(/([^}{]*){/gm,function(t,e){return X(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(a||document.head||document.body).appendChild(i),e=i),s&&(u=e),o||++p,{destroy:function(){o?(t.removeChild(e),e=null):(0<p&&--p,0===p&&u&&(u.parentNode.removeChild(u),u=null))}}}}}var ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var pe=function(){return(pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var fe=function(){return(fe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function de(t,e,n,r){var a=xe(t),i=xe(e),o=xe(r);return ge(we(r[0],Se(a,o)),we(r[0],Se(i,o)),n[0])}function he(t){return t.touches?be(t.touches):[ye(t)]}function ge(t,e,n){var r=t.clientX,a=t.clientY;return{clientX:r,clientY:a,deltaX:r-e.clientX,deltaY:a-e.clientY,distX:r-n.clientX,distY:a-n.clientY}}function ve(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function me(t,n,r){return t.map(function(t,e){return ge(t,n[e],r[e])})}function be(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ye(t[r]));return n}function ye(t){return{clientX:t.clientX,clientY:t.clientY}}function xe(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function we(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Se(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Me=function(){function t(t,e){var c=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.onDragStart=function(t){if(c.flag||!1!==t.cancelable){var e,n,r,a=c.options,i=a.container,o=a.pinchOutside,s=a.dragstart,l=a.preventRightClick,u=c.isTouch;if(!c.flag&&u&&o&&setTimeout(function(){J(i,"touchstart",c.onDragStart)}),c.flag&&u&&o&&Z(i,"touchstart",c.onDragStart),(e=t).touches&&2<=e.touches.length){if(!c.flag&&t.touches.length!==t.changedTouches.length)return;c.pinchFlag||c.onPinchStart(t)}c.flag||(n=c.startClients[0]?c.startClients:he(t),c.customDist=[0,0],c.flag=!0,c.isDrag=!1,c.startClients=n,c.prevClients=n,c.datas={},r=ge(n[c.movement=0],c.prevClients[0],c.startClients[0]),(l&&3===t.which||!1===(s&&s(fe({type:"dragstart",datas:c.datas,inputEvent:t},r))))&&(c.startClients=[],c.prevClients=[],c.flag=!1),c.flag&&t.preventDefault())}},this.onDrag=function(t,e){var n,r,a;c.flag&&(n=he(t),c.pinchFlag&&c.onPinch(t,n),!(r=c.move([0,0],t,n))||!r.deltaX&&!r.deltaY||(a=c.options.drag)&&a(fe({},r,{isScroll:!!e,inputEvent:t})))},this.onDragEnd=function(t){var e,n,r,a,i,o,s;c.flag&&(n=(e=c.options).dragend,r=e.pinchOutside,a=e.container,c.isTouch&&r&&Z(a,"touchstart",c.onDragStart),c.pinchFlag&&c.onPinchEnd(t),c.flag=!1,i=c.prevClients,o=c.startClients,s=c.pinchFlag?de(i,i,o,c.startPinchClients):ge(i[0],i[0],o[0]),c.startClients=[],c.prevClients=[],n&&n(fe({type:"dragend",datas:c.datas,isDrag:c.isDrag,inputEvent:t},s)))};var n=[].concat(t);this.options=fe({container:1<n.length?window:n[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r,a=this.options,i=a.container,o=a.events;this.isTouch=-1<o.indexOf("touch"),this.isMouse=-1<o.indexOf("mouse"),this.customDist=[0,0],this.targets=n,this.isMouse&&(n.forEach(function(t){J(t,"mousedown",c.onDragStart)}),J(i,"mousemove",this.onDrag),J(i,"mouseup",this.onDragEnd)),this.isTouch&&(r={passive:!1},n.forEach(function(t){J(t,"touchstart",c.onDragStart,r)}),J(i,"touchmove",this.onDrag,r),J(i,"touchend",this.onDragEnd,r),J(i,"touchcancel",this.onDragEnd,r))}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],a=t[1];void 0===n&&(n=this.prevClients);var i=this.customDist,o=this.prevClients,s=this.startClients,l=this.pinchFlag?de(n,o,s,this.startPinchClients):ge(n[0],o[0],s[0]);i[0]+=r,i[1]+=a,l.deltaX+=r,l.deltaY+=a;var u=l.deltaX,c=l.deltaY;return l.distX+=i[0],l.distY+=i[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,fe({type:"drag",datas:this.datas},l,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r,a,i,o,s=this.options,l=s.pinchstart,u=s.pinchThreshold;this.isDrag&&this.movement>u||(r=be(t.changedTouches),this.pinchFlag=!0,(e=this.startClients).push.apply(e,r),(n=this.prevClients).push.apply(n,r),this.startDistance=ve(this.prevClients),this.startPinchClients=this.prevClients.slice(),l&&(o=ge(i=xe(a=this.prevClients),i,i),l(fe({type:"pinchstart",datas:this.datas,touches:me(a,a,a)},o,{inputEvent:t}))))},e.onPinch=function(t,e){var n,r,a,i,o;!this.flag||!this.pinchFlag||e.length<2||(this.isPinch=!0,(n=this.options.pinch)&&(r=this.prevClients,a=this.startClients,i=ge(xe(e),xe(r),xe(a)),o=ve(e),n(fe({type:"pinch",datas:this.datas,movement:this.movement,touches:me(e,r,a),scale:o/this.startDistance,distance:o},i,{inputEvent:t}))))},e.onPinchEnd=function(t){var e,n,r,a,i;this.flag&&this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,(n=this.options.pinchend)&&(r=this.prevClients,a=this.startClients,i=ge(xe(r),xe(r),xe(a)),n(fe({type:"pinchend",datas:this.datas,isPinch:e,touches:me(r,r,a)},i,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1))},e.unset=function(){var e=this,t=this.targets,n=this.options.container;this.isMouse&&(t.forEach(function(t){Z(t,"mousedown",e.onDragStart)}),Z(n,"mousemove",this.onDrag),Z(n,"mouseup",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){Z(t,"touchstart",e.onDragStart)}),Z(n,"touchstart",this.onDragStart),Z(n,"touchmove",this.onDrag),Z(n,"touchend",this.onDragEnd),Z(n,"touchcancel",this.onDragEnd))},t}(),Ee=function(t,e){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function De(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Ce=function(e){function t(){this.constructor=n}var n,r;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}Ee(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return i.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),r=n.top,a=n.left,i=n.width,o=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:a,width:i,height:o}},i.drag=function(t,e){var n=this,r=t.clientX,a=t.clientY,i=e.container,o=e.threshold,s=void 0===o?0:o,l=e.throttleTime,u=void 0===l?0:l,c=e.getScrollPosition,p=void 0===c?De:c,f=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(u+this.prevTime-h,0),v=[0,0];if(f.top>a-s?(d[1]>f.top||a<d[1])&&(v[1]=-1):f.top+f.height<a+s&&(d[1]<f.top+f.height||a>d[1])&&(v[1]=1),f.left>r-s?(d[0]>f.left||r<d[0])&&(v[0]=-1):f.left+f.width<r+s&&(d[0]<f.left+f.width||r>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){n.drag(t,e)},g),!1;this.prevTime=h;var m=p({container:i,direction:v});this.trigger("scroll",{container:i,direction:v,inputEvent:t});var b=p({container:i,direction:v}),y=b[0]-m[0],x=b[1]-m[1];return!(!y&&!x)&&(this.trigger("move",{offsetX:v[0]?y:0,offsetY:v[1]?x:0,inputEvent:t}),u&&(this.timer=window.setTimeout(function(){n.drag(t,e)},u)),!0)},i.dragEnd=function(){clearTimeout(this.timer)},a}(t),ze=function(t,e){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Oe,Re="function"==typeof Map?void 0:(Oe=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Oe)}),Pe=function(e){function t(){this.constructor=n}var n,r;function a(t){return void 0===t&&(t=[]),e.call(this,t,Re)||this}return ze(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),a}(d),_e=function(t,e){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Be(t,e){function n(){this.constructor=t}_e(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ge=function(){return(Ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function ke(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var Ae=Yt(),je=-1<Ae.os.name.indexOf("ios")||-1<Ae.browser.name.indexOf("safari"),Te="moveable-",qe=e(Te,"\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(n=ke(1,e=t),r=ke(2,e),a=45*Math.round(e/45)%180,"cursor:"+(i=135==a?"nwse-resize":45==a?"nesw-resize":90==a?"ew-resize":"ns-resize")+";cursor: url('"+n+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+n+"') 1x, url('"+r+"') 2x) 16 16, "+i+";")+"\n}\n";var e,n,r,a,i}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n"+(je?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),Ne=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Ie=1e-7,Ye=Math.pow(10,10),Xe=-Ye,Fe={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},We={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,[Te].concat(t))}function He(){return ae(3)}function Ke(t,e,n){return Vt(e,oe(n,e),t,oe(n.map(function(t){return-t}),e))}function Ve(s){return Ue(En(s,":before")).map(function(t,e){var n,r,a=W(t),i=a.value,o=a.unit;return i*(n=s,r=0===e,"%"!==o?1:tn(n.ownerSVGElement)[r?"width":"height"]/100)})}function Ue(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function $e(t,e,n){for(var r=document.body,a=!t||n?t:t.parentElement,i=!1,o="relative";a&&a!==r;){e===a&&(i=!0);var s=En(a),l=s.transform;if("static"!==(o=s.position)||l&&"none"!==l)break;a=a.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:i||!a||a===r,offsetParent:a||r}}function Je(t,e,n,r){var a,i,o=t.tagName.toLowerCase(),s=t.offsetLeft,l=t.offsetTop;r&&(s-=(i=(e||document.documentElement).getBoundingClientRect()).left,l-=i.top);var u,c=N(s),p=!c;return p||"svg"===o?u=Ue(n).map(function(t){return parseFloat(t)}):(u=je?Ve(t):Ue(n).map(function(t){return parseFloat(t)}),p=!0,"g"===o?l=s=0:(s=(a=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=tn(t.ownerSVGElement),a=n.x-r.x,i=n.y-r.y;return[a,i,e[0]-a,e[1]-i]}(t,u))[0],l=a[1],u[0]=a[2],u[1]=a[3])),{isSVG:c,hasOffset:p,offset:[s,l],origin:u}}function Ze(t,e,n){var r,a,i,o,s=t,l=[],u=!1,c=!1,p=3,f=$e(e,e,!0).offsetParent;for(n&&(u=t===e,10<n.length&&(c=!0,p=4),e=t.parentElement);s&&!u;){var d=En(s),h=s.tagName.toLowerCase(),g=d.position,v="fixed"===g,m=d.transform,b=6===(i=(o=m)&&"none"!==o?T(o)?o:F(o).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[i[0],i[2],i[4],i[1],i[3],i[5],0,0,1]:Wt(i),y=b.length;if(!c&&16===y){c=!0,p=4;for(var x=l.length,w=0;w<x;++w)l[w]=Kt(l[w],3,4)}c&&9===y&&(b=Kt(b,3,4));var S=Je(s,e,d,v),M=S.hasOffset,E=S.isSVG,D=S.origin,C=S.offset,z=C[0],O=C[1];"svg"===h&&a&&l.push(function(t,e){var n=t.clientWidth,r=t.clientHeight,a=tn(t),i=a.width,o=a.height,s=n/i,l=r/o,u=t.preserveAspectRatio.baseVal,c=u.align,p=u.meetOrSlice,f=[0,0],d=[s,l],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),f[0]=i*g/2,f[1]=o*v/2,m=2===p?Math.max(l,s):Math.min(s,l),d[0]=m,d[1]=m,h[0]=(n-i)/2*g,h[1]=(r-o)/2*v)}var b=ie(d,e);return b[e-1]=h[0],b[2*e-1]=h[1],Ke(b,e,f)}(s,p),ae(p));var R=$e(s,e),P=R.offsetParent,_=R.isEnd,B=R.isStatic;je&&M&&!E&&B&&"relative"===g&&(z-=P.offsetLeft,O-=P.offsetTop,u=u||_);var G=0,k=0;if(M&&f!==P&&(G=P.clientLeft,k=P.clientTop),l.push(Ke(b,p,D),oe(M?[z-s.scrollLeft+G,O-s.scrollTop+k]:[s,D],p)),a=a||b,r=r||D,u||v)break;s=P,u=_}return{offsetContainer:f,matrixes:l,targetMatrix:a=a||ae(p),transformOrigin:r=r||[0,0],is3d:c}}function Qe(t,e,n,r,a,i){var o=Ze(t,e,r),s=o.matrixes,l=o.is3d,u=o.targetMatrix,c=o.transformOrigin,p=Ze(o.offsetContainer,n,a),f=p.matrixes,d=p.is3d,h=d||l?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=e||document.body,m=r?Kt(r,i,h):ae(h),b=u,y=a?Kt(a,i,h):ae(h),x=r?Kt(r,i,h):ae(h),w=ae(h),S=s.length,M=$e(v,v,!0).offsetParent;f.reverse(),s.reverse(),!l&&d&&(b=Kt(b,3,4),s.forEach(function(t,e){s[e]=Kt(t,3,4)})),l&&!d&&f.forEach(function(t,e){f[e]=Kt(t,3,4)}),a||f.forEach(function(t){y=Ut(y,t,h)}),s.forEach(function(t,e){var n;S-2===e&&(x=m.slice()),S-1===e&&(w=m.slice()),T(t[h-1])&&(n=function(t,e,n,r,a,i){var o,s=cn(t),l=s[0],u=s[1],c=e.getBoundingClientRect(),p=t.getBoundingClientRect(),f=p.left-c.left+e.scrollLeft,d=p.top-c.top+e.scrollTop,h=p.width,g=p.height,v=Vt(n,a,i),m=an(v,l,u,n),b=m.left,y=m.top,x=m.width,w=m.height,S=en(v,r,n),M=Qt(S,[b,y]),E=[f+M[0]*h/x,d+M[1]*g/w],D=[0,0],C=0;for(;++C<10;){var z=Ft(a,n);o=Qt(en(z,E,n),en(z,S,n)),D[0]=o[0],D[1]=o[1];var O=an(Vt(n,a,oe(D,n),i),l,u,n),R=O.left,P=O.top,_=R-f,B=P-d;if(Math.abs(_)<2&&Math.abs(B)<2)break;E[0]-=_,E[1]-=B}return D.map(function(t){return Math.round(t)})}(t[h-1],M,h,t[2*h-1],m,s[e+1]),t[h-1]=n[0],t[2*h-1]=n[1]),m=Ut(m,t,h)});var E=!g&&l,b=b||ae(E?4:3),D=(E?"matrix3d":"matrix")+"("+ne(g&&16===b.length?Kt(b,4,3):b)+")";return[y=Xt(y,h,h),x,w,m,b,D,c,l||d]}function tn(t){var e=t.clientWidth,n=t.clientHeight,r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n}}function en(t,e,n){return te(t,Ht(e,n),n)}function nn(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return en(e,t,r)})}function rn(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),o=Math.max.apply(Math,n);return{left:r,top:a,right:i,bottom:o,width:i-r,height:o-a}}function an(t,e,n,r){return rn(nn(t,e,n,r))}function on(t,e,n,r){var a=16===t.length?4:3,i=nn(t,n,r,a),o=i[0],s=o[0],l=o[1],u=i[1],c=u[0],p=u[1],f=i[2],d=f[0],h=f[1],g=i[3],v=g[0],m=g[1],b=en(t,e,a),y=b[0],x=b[1],w=Math.min(s,c,d,v),S=Math.min(l,p,h,m),M=Math.max(s,c,d,v),E=Math.max(l,p,h,m),y=y-w||0,x=x-S||0,D=[((s=s-w||0)+(c=c-w||0)+(d=d-w||0)+(v=v-w||0))/4,((l=l-S||0)+(p=p-S||0)+(h=h-S||0)+(m=m-S||0))/4],C=Lt(D,[s,l]),z=Lt(D,[c,p]);return[[w,S,M,E],[y,x],[[s,l],[c,p],[d,h],[v,m]],C<z&&z-C<Math.PI||z<C&&z-C<-Math.PI?1:-1]}function sn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ln(t,e,n){void 0===n&&(n=Lt(t,e));var r,a,i=(r=t,sn([(a=e)[0]-r[0],a[1]-r[1]]));return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:i+"px"}}function un(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.length;return{transform:"translate("+e.reduce(function(t,e){return t+e[0]},0)/r+"px, "+e.reduce(function(t,e){return t+e[1]},0)/r+"px) rotate("+t+"rad)"}}function cn(t,e,n,r){void 0===e&&(e=window.getComputedStyle(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var a=t.offsetWidth,i=t.offsetHeight,o=!N(a);if((n||r)&&o)return[a,i];if(a=t.clientWidth,i=t.clientHeight,o||a||i)return n||r?[a+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),i+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[a-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),i-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function pn(t,e){return Lt(0<e?t[0]:t[1],0<e?t[1]:t[0])}function fn(t,e,n,r,a,i){var o,s,l,u,c,p,f,d=0,h=0,g=0,v=0,m=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],y=He(),x=He(),w=He(),S=He(),M=He(),E=0,D=0,C=[0,0],z=1,O=1,R=!1,P="",_=[0,0],B=dn(),G=dn(),k=dn(),A=0,j=i?i.beforeMatrix:void 0,T=i?i.rootMatrix:void 0,q=i?i.is3d?4:3:void 0;return e&&(i?(E=i.width,D=i.height):(c=En(e),E=e.offsetWidth,D=e.offsetHeight,N(E)&&(E=(o=cn(e,c,!0))[0],D=o[1])),y=(s=Qe(e,n,a,j,T,q))[0],w=s[1],x=s[2],S=s[3],M=s[4],P=s[5],C=s[6],R=s[7],d=(u=(l=on(S,C,E,D))[0])[0],h=u[1],g=u[2],v=u[3],m=l[1],b=l[2],z=l[3],f=(p=on(x,Zt(C,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e-1;++r)n[r]=t[(r+1)*e-1];return n[e-1]=0,n}(M,R?4:3)),E,D))[0],_=p[1],O=p[3],_=[_[0]+f[0]-d,_[1]+f[1]-h],B=hn(e),G=hn($e(r,r,!0).offsetParent||document.body,!0),t&&(k=hn(t)),A=pn([b[0],b[1]],z)),{rotation:A,targetClientRect:B,containerClientRect:G,moveableClientRect:k,beforeDirection:O,direction:z,target:e,left:d,top:h,right:g,bottom:v,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:E,height:D,rootMatrix:y,beforeMatrix:w,offsetMatrix:x,targetMatrix:M,matrix:S,targetTransform:P,is3d:R,beforeOrigin:_,origin:m,transformOrigin:C}}function dn(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function hn(t,e){var n=t.getBoundingClientRect(),r=n.left,a=n.width,i=n.top,o=n.bottom,s={left:r,right:n.right,top:i,bottom:o,width:a,height:n.height};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function gn(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function vn(t,e){return[Zt(e,t[0]),Zt(e,t[1]),Zt(e,t[2]),Zt(e,t[3])]}function mn(t){var e=t.left,n=t.top;return vn([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function bn(t,e){return e?Math.round(t/e)*e:t}function yn(n,r){return n.forEach(function(t,e){n[e]=bn(n[e],r)}),n}function xn(t,e){t[e]&&(t[e].unset(),t[e]=null)}function wn(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Sn(t,e,n){var r=e.datas;return r.datas||(r.datas={}),Ge({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:r.datas})}function Mn(t,e,n,r){return r&&Fn.prototype.triggerEvent.call(t,e,n),t.triggerEvent(e,n)}function En(t,e){return window.getComputedStyle(t,e)}function Dn(t,n,r){var a={},i={};return t.filter(function(e){var t=e.name;if(a[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(i[e.ableGroup])return!1;i[e.ableGroup]=!0}return a[t]=!0})}function Cn(t,e,n){return t*(e?n:1/n)}function zn(t,e,n){return t*(e?1/n:n)}function On(t,e){return t===e||null==t&&null==e}function Rn(i,o){var s=[],l=[];return i.forEach(function(t,e){var n=o(t,e,i),r=l.indexOf(n),a=s[r]||[];-1===r&&(l.push(n),s.push(a)),a.push(t)}),s}function Pn(t){return t.reduce(function(t,e){return t.concat(e)},[])}function _n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function Bn(t,e,n){return te(Ft(t,n),Ht(e,n),n)}function Gn(t,e){var n=t.is3d?4:3,r=Bn(t.rootMatrix,[e.distX,e.distY],n);return e.distX=r[0],e.distY=r[1],e}function kn(t,e,n,r,a){return Qt(en(t,Zt(n,e),a),r)}function An(t,n,r){return[[n[0],n[0]*t[1]/t[0]],[n[1]*t[0]/t[1],n[1]]].filter(function(t){return t.every(function(t,e){return r?t<=n[e]:t>=n[e]})})[0]||t}function jn(a,t,e,n,r,i,o){var s="Start"===r;if(s&&-1<n.indexOf("Control")&&!i.isRequest&&a.areaElement===i.inputEvent.target)return!1;var l=""+e+n+r,u=""+e+n+"Condition",c="End"===r,p=-1<r.indexOf("After");s&&a.updateRect(r,!0,!1),""!==r||p||Gn(a.state,i);var f=-1<n.indexOf("Group"),d=a[t];if(!d.length)return!1;var h,g,v,m,b,y,x,w,S,M,E,D,C,z,O,R=d.filter(function(t){return t[l]}),P=i.datas,_=P.render||(P.render={}),B=Ge({},i,{datas:_,originalDatas:P}),G=R.filter(function(t){var e=s&&t[u],n=t.name,r=P[n]||(P[n]={});return!(e&&!e(i,a))&&t[l](a,Ge({},i,{datas:r,originalDatas:P}))}),k=G.length;if(s){if(R.length&&!k)return a.state.dragger=null,a.moveables&&a.moveables.forEach(function(t){t.state.dragger=null}),!1;D=f,z=Sn(E=a,C=B,{isPinch:!!C.isPinch}),O=D?"Group":"",D&&(z.targets=E.props.targets),Mn(E,"onRender"+O+"Start",z)}else c?(x=f,S=Sn(y=a,w=B,{isPinch:!!w.sPinch,isDrag:w.isDrag}),M=x?"Group":"",x&&(S.targets=y.props.targets),Mn(y,"onRender"+M+"End",S)):k&&(g=f,m=Sn(h=a,v=B,{isPinch:!!v.isPinch}),b=g?"Group":"",g&&(m.targets=h.props.targets),Mn(h,"onRender"+b,m));if(c&&(a.state.dragger=null),a.isUnmounted)return!1;!s&&k&&(G.some(function(t){return t.updateRect})&&!f?a.updateRect(r,!1,!1):a.updateRect(r,!0,!1)),(!s&&k||c&&!k)&&!o&&a.forceUpdate(),s||c||p||!k||jn(a,t,e,n,r+"After",i)}function Tn(n,t,e){var r=n.controlBox.getElement(),a=[];a.push(r),n.props.dragArea||a.push(t);function i(t){var e=t.inputEvent.target;return e===n.areaElement||!n.isMoveableElement(e)||-1<e.className.indexOf("moveable-area")||-1<e.className.indexOf("moveable-padding")}return qn(n,a,"targetAbles",e,{dragstart:i,pinchstart:i})}function qn(a,t,i,o,s){void 0===s&&(s={});var e=a.props,n=e.pinchOutside,r=e.pinchThreshold,l={container:window,pinchThreshold:r,pinchOutside:n};return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){var n=""+r+e.toLowerCase();l[n]=function(t){return!(s[n]&&!s[n](t))&&jn(a,i,r,o,e,t)}})}),new Me(t,l)}var Nn,In,Yn=(Nn="div",In=ue(qe),function(t){function e(){this.constructor=n}var n,r;function a(){return null!==t&&t.apply(this,arguments)||this}return ce(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e),a.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}(t,["className"]);return ct(Nn,pe({ref:m(this,"element"),className:n+" "+In.className},r))},a.prototype.componentDidMount=function(){this.injectResult=In.inject(this.element)},a.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},a.prototype.getElement=function(){return this.element},a}(xt));function Xn(t,e,n,r){var a=Lt(e,n),i=t?bn(a/Math.PI*180,15)%180:-1;return ct("div",{key:"line"+r,className:Le("line","direction",t),"data-rotation":i,"data-direction":t,style:ln(e,n,a)})}var Fn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={container:null,target:null,beforeMatrix:He(),matrix:He(),targetMatrix:He(),offsetMatrix:He(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:dn(),containerClientRect:dn(),moveableClientRect:dn(),rotation:0},t.targetAbles=[],t.controlAbles=[],t.isUnmounted=!1,t}Be(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.edge,r=t.parentPosition,a=t.className,i=t.target,o=t.zoom;this.checkUpdate(),this.updateRenderPoses();var s=r||{left:0,top:0},l=s.left,u=s.top,c=e.left,p=e.top,f=e.target,d=e.direction,h=e.renderPoses,g=t.targets,v=(g&&g.length||i)&&f;return ct(Yn,{ref:m(this,"controlBox"),className:Le("control-box",-1===d?"reverse":"")+" "+a,style:{position:"absolute",display:v?"block":"none",transform:"translate("+(c-l)+"px, "+(p-u)+"px) translateZ(50px)","--zoom":o,"--zoompx":o+"px"}},this.renderAbles(),Xn(n?"n":"",h[0],h[1],0),Xn(n?"e":"",h[1],h[3],1),Xn(n?"w":"",h[0],h[2],2),Xn(n?"s":"",h[2],h[3],3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0)},n.componentDidUpdate=function(t){this.updateEvent(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,xn(this,"targetDragger"),xn(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Te)},n.dragStart=function(t){return this.targetDragger&&this.targetDragger.onDragStart(t),this},n.hitTest=function(t){var e,n;n=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:Ge({width:0,height:0},t);var r=this.state.targetClientRect,a=r.left,i=r.top,o=r.width,s=r.height,l=n.left,u=n.top,c=l+n.width,p=u+n.height,f=a+o,d=i+s,h=Math.max(a,l),g=Math.min(f,c),v=Math.max(i,u),m=Math.min(d,p);if(g<h||m<v)return 0;var b=(Math.min(f,c)-Math.max(l,a))*(Math.min(d,p)-Math.max(i,u));return Math.min(100,(g-h)*(m-v)/b*100)},n.isInside=function(t,e){var n=this.state,r=n.pos1,a=n.pos2,i=n.pos3,o=n.pos4,s=n.target,l=n.targetClientRect;if(!s)return!1;var u,c,p,f,d,h,g,v=l.left,m=l.top;return f=i,d=o,h=[wn(u=[t-v,e-m],c=r,p=a),wn(u,p,f),wn(u,f,c)],g=[wn(u,p,f),wn(u,f,d),wn(u,d,p)],!!(h.every(function(t){return 0<=t})||h.every(function(t){return t<=0})||g.every(function(t){return 0<=t})||g.every(function(t){return t<=0}))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,a=r.parentMoveable,i=this.state,o=i.target||this.props.target,s=this.getContainer(),l=a?a.props.rootContainer:r.rootContainer;this.updateState(fn(this.controlBox&&this.controlBox.getElement(),o,s,s,l||s,e?i:void 0),!a&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,a=this.props,i=a.dragTarget||a.target,o=t.dragTarget||t.target,s=a.dragArea,l=t.dragArea,u=!s&&o!==i,c=!n&&this.targetDragger||u||l!==s;c&&(xn(this,"targetDragger"),this.updateState({dragger:null})),r||xn(this,"controlDragger"),i&&n&&!this.targetDragger&&(this.targetDragger=Tn(this,i,"")),!this.controlDragger&&r&&(this.controlDragger=qn(this,e,"controlAbles","Control")),c&&this.unsetAbles()},n.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=mn(this.state),n=e[0],r=e[1],a=e[2],i=e[3],o=rn(e),s=t.width,l=t.height,u=o.width,c=o.height,p=o.left,f=o.top,d=[t.left,t.top],h=Zt(d,t.origin);return{width:u,height:c,left:p,top:f,pos1:n,pos2:r,pos3:a,pos4:i,offsetWidth:s,offsetHeight:l,beforeOrigin:Zt(d,t.beforeOrigin),origin:h}},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,a=r.ables,i=r.groupable,o=a.filter(function(t){return t.name===e})[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,l=o.request(this),u=l.isControl?"controlAbles":"targetAbles",c=(i?"Group":"")+(l.isControl?"Control":""),p={request:function(t){return jn(s,u,"drag",c,"",Ge({},l.request(t),{isRequest:!0}),n),this},requestEnd:function(){return jn(s,u,"drag",c,"End",Ge({},l.requestEnd(),{isRequest:!0})),this}};return jn(s,u,"drag",c,"Start",Ge({},l.requestStart(t),{isRequest:!0}),n),t.isInstant?p.request(t).requestEnd():p},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.beforeOrigin,r=t.transformOrigin,a=t.matrix,i=t.is3d,o=t.pos1,s=t.pos2,l=t.pos3,u=t.pos4,c=t.left,p=t.top,f=e.padding||{},d=f.left,h=void 0===d?0:d,g=f.top,v=void 0===g?0:g,m=f.bottom,b=void 0===m?0:m,y=f.right,x=void 0===y?0:y,w=i?4:3,S=e.groupable?n:Zt(n,[c,p]);t.renderPoses=[Zt(o,kn(a,[-h,-v],r,S,w)),Zt(s,kn(a,[x,-v],r,S,w)),Zt(l,kn(a,[-h,b],r,S,w)),Zt(u,kn(a,[x,b],r,S,w))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,a=this.state,i=a.target,o=a.container;(i||e)&&(this.updateAbles(),On(i,e)&&On(o,n)||(this.updateState({target:e,container:n}),r||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,a=t.filter(function(t){return t&&n[t.name]}),i="drag"+e+"ControlStart",o=Dn(a,["drag"+e+"Start","pinch"+e+"Start"],r),s=Dn(a,[i],r);this.targetAbles=o,this.controlAbles=s},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},n.renderAbles=function(){var a,i,o,s,e=this,n=this.props,t=n.ables,r=n.triggerAblesSimultaneously,l=t.filter(function(t){return t&&n[t.name]}),u={createElement:ct};return a=Pn(Dn(l,["render"],r).map(function(t){return(0,t.render)(e,u)||[]})).filter(function(t){return t}),i=function(t){return t.key},o=[],s={},a.forEach(function(t,e){var n=i(t,e,a),r=s[n];r||(r=[],s[n]=r,o.push(r)),r.push(t)}),o.map(function(t){return t[0]})},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0},t}(wt);function Wn(t){return Lt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var Ln={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchOutside:Boolean,pinchThreshold:Number},pinchStart:function(n,r){var a=r.datas,t=r.touches,e=r.targets,i=n.props,o=i.pinchable,s=i.ables;if(!o)return!1;var l="onPinch"+(e?"Group":"")+"Start",u="drag"+(e?"Group":"")+"ControlStart",c=(!0===o?n.controlAbles:s.filter(function(t){return-1<o.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[u]}),p=Sn(n,r,{});e&&(p.targets=e);var f=Mn(n,l,p);a.isPinch=!1!==f,a.ables=c;var d=a.isPinch;if(!d)return!1;var h=Wn(t);return c.forEach(function(t){var e;a[t.name+"Datas"]={},t[u]&&(e=Ge({},r,{datas:a[t.name+"Datas"],parentRotate:h,isPinch:!0}),t[u](n,e))}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},d},pinch:function(e,n){var r=n.datas,t=n.scale,a=n.distance,i=n.touches,o=n.inputEvent,s=n.targets;if(r.isPinch){var l=Wn(i),u=a*(1-1/t),c=Sn(e,n,{});s&&(c.targets=s),Mn(e,"onPinch"+(s?"Group":""),c);var p=r.ables,f="drag"+(s?"Group":"")+"Control";return p.forEach(function(t){t[f]&&t[f](e,Ge({},n,{datas:r[t.name+"Datas"],inputEvent:o,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(e,n){var r=n.datas,a=n.isPinch,i=n.inputEvent,t=n.targets;if(r.isPinch){var o="onPinch"+(t?"Group":"")+"End",s=Sn(e,n,{isDrag:a});t&&(s.targets=t),Mn(e,o,s);var l=r.ables,u="drag"+(t?"Group":"")+"ControlEnd";return l.forEach(function(t){t[u]&&t[u](e,Ge({},n,{isDrag:a,datas:r[t.name+"Datas"],inputEvent:i,isPinch:!0}))}),a}},pinchGroupStart:function(t,e){return this.pinchStart(t,Ge({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Ge({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Ge({},e,{targets:t.props.targets}))}};function Hn(t,e,n,r,a){var i=t.dragger.move(e,n),o=i.originalDatas||i.datas,s=o.draggable||(o.draggable={});return Ge({},a?Gn(t,i):i,{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s})}var Kn=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},Ge({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Vn(t,a,i,o,e,s){var l=!!i.match(/Start$/g),u=!!i.match(/End$/g),c=e.inputEvent,p=e.isPinch,f=e.datas,n=t.moveables.map(function(t,e){var n={},n=l?(new Kn).dragStart(o,c):(t.state.dragger||(t.state.dragger=f.childDraggers[e]),Hn(t.state,o,c,p,s)),r=a[i](t,Ge({},n,{parentFlag:!0}));return u&&(t.state.dragger=null),r});return l&&(f.childDraggers=t.moveables.map(function(t){return t.state.dragger})),n}function Un(t,i,o,e,s,l){var n=i.name,u=e[n]||(e[n]=[]),c=!!o.match(/End$/g);return t.moveables.map(function(t,e){var n=u[e]||(u[e]={}),r=typeof s===E?s(t,n):s,a=i[o](t,Ge({},r,{datas:n,parentFlag:!0}));return a&&l&&l(t,n,a,e),c&&(t.state.dragger=null),a})}function $n(t,e){var n=e.datas,r=t.state,a=r.matrix,i=r.beforeMatrix,o=r.is3d,s=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,p=r.targetMatrix,f=r.transformOrigin,d=o?4:3;n.is3d=o,n.matrix=a,n.targetMatrix=p,n.beforeMatrix=i,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=Ft(a,d),n.inverseBeforeMatrix=Ft(i,d),n.absoluteOrigin=Ht(Zt([s,l],u),d),n.startDragBeforeDist=te(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=te(n.inverseMatrix,n.absoluteOrigin,d)}function Jn(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,o=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=s?4:3;return Qt(te(e?i:o,Zt(n.absoluteOrigin,[r,a]),c),e?l:u)}function Zn(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function Qn(e,t){return Zn(t).map(function(t){return e[t]})}function tr(t,e){var n=Qn(t,e);return[Jt.apply(void 0,n.map(function(t){return t[0]})),Jt.apply(void 0,n.map(function(t){return t[1]}))]}function er(t,e){var n=t[0],r=t[1],a=t[2];return tr([t[3],a,r,n],e)}function nr(t,e,n,r,a,i){var o=er(nn(e,n,r,a),i);return[t[0]-o[0],t[1]-o[1]]}function rr(t,e,n,r){return Ut(t,Ke(e,r,n),r)}function ar(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d?4:3;return rr(r,Ut(t.targetMatrix,ie(e,a),a),n,a)}function ir(t,e,n,r,a,i){var o,s,l,u,c,p,f=t.props.groupable,d=t.state,h=d.transformOrigin,g=d.targetMatrix,v=d.offsetMatrix,m=d.is3d,b=d.width,y=d.height,x=d.left,w=d.top,S=m?4:3,M=f?x:0,E=f?w:0;return Qt(nr(a,rr(v,g,(s=e,l=n,void 0===(u=b)&&(u=s),void 0===(c=y)&&(c=l),void 0===(p=h)&&(p=[0,0]),(o=i)?o.map(function(t,e){var n=W(t),r=n.value,a=n.unit,i=e?c:u,o=e?l:s;return"%"===t||isNaN(r)?o*(i?p[e]/i:0):"%"!==a?r:o*r/100}):p),S),e,n,S,r),[M,E])}function or(t,e){return n=mn(t.state),r=e,er([n[0],n[1],n[2],n[3]],r);var n,r}function sr(t){return t.isRequest?t.parentDirection:V(t.inputEvent.target,Le("direction"))}function lr(t,e,f,d,n,r){var h=n[0],g=n[1],a=r[0],i=r[1],v=[],o=d?0:1,m="vertical"===e?"horizontal":"vertical",b=Rn(t.filter(function(t){return t.type===e}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var e=t.pos,n=t.sizes;return e[o]<=i&&a<=e[o]+n[o]});return b.forEach(function(t){var c=t.pos[d],p=c+t.sizes[d];b.forEach(function(t){var e,n=t.pos,r=t.sizes,a=t.element,i=n[d],o=i+r[d],s=0,l=0,u=!0;if(p<=i)h<(s=o-(l=p-i))-f&&(u=!1);else{if(!(o<=c))return;(s=i-(l=c-o))+f<g&&(u=!1)}u&&v.push({pos:"vertical"==m?[s,n[1]]:[n[0],s],element:a,sizes:r,size:0,type:m,gap:l,gapGuidelines:b}),p<=h&&g<=i&&(0<=bn(h-((e=(i+p-(g-h))/2)-f),.1)&&v.push({pos:"vertical"==m?[e,n[1]]:[n[0],e],element:a,sizes:r,size:0,type:m,gap:p-h,gapGuidelines:b}))})}),v}function ur(t,e,n,r,a){var i,o,s,l,u,c,p,f,d,h,g,v,m,b,y,x,w,S,M,E,D,C,z,O,R=(f=(i=t).state,d=f.guidelines,h=f.containerClientRect,g=h.scrollHeight,v=h.scrollWidth,m=i.props,b=m.snapHorizontal,y=void 0===b||b,x=m.snapVertical,w=void 0===x||x,S=m.snapGap,M=void 0===S||S,E=m.verticalGuidelines,D=m.horizontalGuidelines,C=m.snapThreshold,z=void 0===C?5:C,O=d.slice(),M&&(s=(o=rn(mn(i.state))).top,l=o.left,u=o.bottom,c=o.right,p=d.filter(function(t){return t.element}),O.push.apply(O,lr(p,"horizontal",z,0,[l,c],[s,u]).concat(lr(p,"vertical",z,1,[s,u],[l,c])))),y&&D&&D.forEach(function(t){O.push({type:"horizontal",pos:[0,bn(t,.1)],size:v})}),w&&E&&E.forEach(function(t){O.push({type:"vertical",pos:[bn(t,.1),0],size:g})}),O),P=t.props,_=P.snapElement,B=void 0===_||_,G=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!N(a))return a}return t[n]}(a,P.snapThreshold,5);return{vertical:pr(R,"vertical",e,G,r,B),horizontal:pr(R,"horizontal",n,G,r,B)}}function cr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,o=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:o}}function pr(e,o,t,s,l,u){if(!e||!e.length)return{isSnap:!1,posInfos:[]};var a="vertical"===o?0:1,n=t.map(function(r){var t=e.map(function(t){var e=t.pos,n=r-e[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist,r=e.type,a=e.center,i=e.element;return!(!u&&i||!l&&a||r!==o||s<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist});return{isSnap:0<n.length,posInfos:n}}function fr(t,l){return t.slice().sort(function(t,e){var n=t.sign[l],r=e.sign[l],a=t.offset[l],i=e.offset[l],o=Math.abs(a),s=Math.abs(i);return n?r?t.isBound&&e.isBound?s-o:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?o-s:t.isSnap?-1:e.isSnap||o<Ie?1:s<Ie?-1:o-s:-1:1})[0]}function dr(t,e){var n=Jt(e[0][0],e[1][0]),r=Jt(e[0][1],e[1][1]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function hr(t,e){var n,r,a=e[0],i=e[1],o=i[0]-a[0],s=i[1]-a[1];return r=o?(n=s?s/o*(t[0]-a[0])+a[1]:a[1],t[1]):(n=a[0],t[0]),n-r}function gr(t,n,r){void 0===r&&(r=Ie);var a=hr(t[0],n)<=0;return t.slice(1).every(function(t){var e=hr(t,n);return e<=0==a||Math.abs(e)<=r})}function vr(t,e,n,r,a){return void 0===a&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function mr(t,e,n,r){var a=t[0],i=t[1],o=e[0],s=e[1],l=i[1]-a[1],u=i[0]-a[0],c=s[1]-o[1];if(s[0]-o[0]){if(!c&&l){var p=l/u;return vr(u?(o[1]-a[1])/p+a[0]:a[0],o[0],s[0],n,r)}}else if(u)return vr(l?l/u*(o[0]-a[0])+a[1]:a[1],o[1],s[1],n,r);return{isBound:!1,offset:0}}function br(c,t,p,f){return t.map(function(t){var n=t[0],e=t[1],r=t[2],a=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=r.left,i=r.top,o=r.width,s=r.height,l=[[a,i],[a,i+s]],u=[[a,i],[a+o,i]],c=[[a+o,i],[a+o,i+s]],p=[[a,i+s],[a+o,i+s]],f=dr(n,e),d=f.horizontal,h=f.vertical;if(gr([n,[a,i],[a+o,i],[a,i+s],[a+o,i+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=mr(e,u,h),v=mr(e,p,h),m=mr(e,l,d),b=mr(e,c,d),y=g.isBound&&v.isBound,x=g.isBound||v.isBound,w=m.isBound&&b.isBound,S=m.isBound||b.isBound,M=_n(g.offset,v.offset),E=_n(m.offset,b.offset),D=[0,0],C=!1;return{isAllBound:Math.abs(E)<Math.abs(M)?(D=[M,0],C=x,y):(D=[0,E],C=S,w),isVerticalBound:x,isHorizontalBound:S,isBound:C,offset:D}}(c,[e,r],p),i=a.isBound,o=a.offset,s=a.isVerticalBound,l=a.isHorizontalBound,u=Jn({datas:f,distX:o[0],distY:o[1]}).map(function(t,e){return t*(n[e]?2/n[e]:0)});return{sign:n,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function yr(t,e,n){var r,a,i,o,s,l,u,c,p,f,d,h,g,v=br(t,xr(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),tr(e,[0,0]),n),m=fr(v,0),b=fr(v,1),y=0,x=0,w=m.isVerticalBound||b.isVerticalBound,S=m.isHorizontalBound||b.isHorizontalBound;return(w||S)&&(a={datas:n,distX:-m.offset[0],distY:-b.offset[1]},o=a.datas,s=a.distX,l=a.distY,u=o.beforeMatrix,c=o.matrix,p=o.is3d,f=o.startDragBeforeDist,d=o.startDragDist,h=o.absoluteOrigin,g=p?4:3,y=(r=Qt(te(i?u:c,Zt(i?f:d,[s,l]),g),h))[0],x=r[1]),{vertical:{isBound:w,offset:y},horizontal:{isBound:S,offset:x}}}function xr(a,t,e){return r=e,i=[],o=(n=t)[0],s=n[1],o&&s?i.push([[0,2*s],n,[-o,s]],[[2*o,0],n,[o,-s]]):o?(i.push([[2*o,0],[o,1],[o,-1]]),r&&i.push([[0,-1],[o,-1],[-o,-1]],[[0,1],[o,1],[-o,1]])):s?(i.push([[0,2*s],[1,s],[-1,s]]),r&&i.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i.map(function(t){var e=t[0],n=t[1],r=t[2];return[e,tr(a,n),tr(a,r)]});var n,r,i,o,s}function wr(t,e,n,r){var a=r?t.map(function(t){return ee(t,r)}):t,i=[n].concat(e);return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(t,e){return!gr(i,t)})}function Sr(t,e,n,r,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,u=i.width,c=i.height,p=s-r[0],f=s+u-r[0],d=l-r[1],h=l+c-r[1],g=[[p,d],[f,d],[p,h],[f,h]],v=tr(n,[0,0]);if(!wr(n,g,v,0))return[];var m=[],b=g.map(function(t){return[sn(t),Lt([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var a=Lt([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,o=-i*e[0]+e[1];return[-o/(i+1/i),o/(i*i+1)]}(t)),i=function(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&i<=e}).map(function(t){var e=t[0],n=t[1],r=Math.acos(e?i/e:0);return[o+(n+r)-a,o+(n-r)-a]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!wr(e,g,v,t)}).map(function(t){return bn(180*t/Math.PI,Ie)}))}),m}function Mr(t,e,n){var r=t.props.bounds||{},a=r.left,i=r.top,o=r.right,s=r.bottom,l={left:void 0===a?-1/0:a,top:void 0===i?-1/0:i,right:void 0===o?1/0:o,bottom:void 0===s?1/0:s};return{vertical:Er(l,e,!0),horizontal:Er(l,n,!1)}}function Er(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),o=Math.max.apply(Math,e);return i<r+1?{isBound:!0,offset:i-r,pos:r}:a-1<o?{isBound:!0,offset:o-a,pos:a}:{isBound:!1,offset:0,pos:0}}function Dr(t,e,n){return(n?t.map(function(t){return ee(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function Cr(t,u,n,e,r){var a=t.props.bounds,c=r*Math.PI/180;if(!a)return[];var i=a.left,o=void 0===i?-1/0:i,s=a.top,l=void 0===s?-1/0:s,p=a.right,f=void 0===p?1/0:p,d=a.bottom,h=void 0===d?1/0:d,g=o-e[0],v=f-e[0],m=l-e[1],b=h-e[1],y={left:g,top:m,right:v,bottom:b};if(!Dr(n,y,0))return[];var x=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,e){var s=t[0],l=t[1];n.forEach(function(t){var n,e,r,a,i,o=Lt([0,0],t);x.push.apply(x,(e=s,r=l,a=sn(n=t),[i=Math.sqrt(a*a-e*e)||0,-i].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return Lt([0,0],r?[t,e]:[e,t])}).map(function(t){return c+t-o}).filter(function(t){return!Dr(u,y,t)}).map(function(t){return bn(180*t/Math.PI,Ie)})))})}),x}function zr(t,e,n){var r=en(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Or(t){var e,n,r,a,i,o,s,l,g,u,c,p,f,v,m,d,b,y,h,x,w,S,M,E=t.state;E.guidelines&&E.guidelines.length||(r=void 0===(n=(e=t.props).horizontalGuidelines)?[]:n,i=void 0===(a=e.verticalGuidelines)?[]:a,s=void 0===(o=e.elementGuidelines)?[]:o,l=e.bounds,g=e.snapCenter,(l||r.length||i.length||s.length)&&(u=E.containerClientRect,p=(c=E.targetClientRect).top,f=c.left,v=E.rootMatrix,m=E.is3d?4:3,d=zr(v,u,m),b=d[0],y=d[1],h=mn(E),x=Qt([Math.min.apply(Math,h.map(function(t){return t[0]})),Math.min.apply(Math,h.map(function(t){return t[1]}))],Bn(v,[f-b,p-y],m)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),w=x[0],S=x[1],M=[],s.forEach(function(t){var e=t.getBoundingClientRect(),n=e.left-b,r=e.top-y,a=r+e.height,i=n+e.width,o=Bn(v,[n,r],m),s=o[0],l=o[1],u=Bn(v,[i,a],m),c=u[0],p=u[1],f=c-s,d=p-l,h=[f,d];M.push({type:"vertical",element:t,pos:[bn(s+w,.1),l],size:d,sizes:h}),M.push({type:"vertical",element:t,pos:[bn(c+w,.1),l],size:d,sizes:h}),M.push({type:"horizontal",element:t,pos:[s,bn(l+S,.1)],size:f,sizes:h}),M.push({type:"horizontal",element:t,pos:[s,bn(p+S,.1)],size:f,sizes:h}),g&&(M.push({type:"vertical",element:t,pos:[bn((s+c)/2+w,.1),l],size:d,sizes:h,center:!0}),M.push({type:"horizontal",element:t,pos:[s,bn((l+p)/2+S,.1)],size:f,sizes:h,center:!0}))}),E.guidelines=M,E.enableSnap=!0))}function Rr(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.verticalGuidelines,o=n.horizontalGuidelines,s=t.state,l=s.guidelines,u=s.enableSnap;return r&&u&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(a||l&&l.length||i&&i.length||o&&o.length)}function Pr(t,e,n,r,a){var i=function(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];Math.abs(a)<Ie&&(a=0);Math.abs(i)<Ie&&(i=0);if(!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var o=i/a,s=t[1]-o*t[0];{if(r){var l=o*(e[0]+n)+s;return[n,l-e[1]]}return[(e[1]+n-s)/o-e[0],n]}}(t,e,n,r);if(!i)return[0,0];var o=Jn({datas:a,distX:i[0],distY:i[1]});return[o[0],o[1]]}function _r(t,e,n,r,a,i){var o=nn(t,e,n,i?4:3);return vn(o,Qt(r,er(o,a)))}function Br(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Gr(t,e){return t.isBound?t.offset:e.isSnap?cr(e).offset:0}function kr(t,e,n,r){var a,i,o,s,l,u,c,p,f,d,h,g,v,m,b,y,x,w,S,M,E,D,C,z,O,R=(a=e,i=n,p=t.props.bounds||{},d=void 0===(f=p.left)?-1/0:f,g=void 0===(h=p.top)?-1/0:h,m=void 0===(v=p.right)?1/0:v,y=void 0===(b=p.bottom)?1/0:b,x=i[0],w=i[1],S=Qt(i,a),M=S[0],E=S[1],D=0<E,C=0<M,O={isBound:!(z={isBound:!1,offset:0,pos:0}),offset:0,pos:0},0===M&&0===E||(0===M?D?y<w&&(O.pos=y,O.offset=w-y):w<g&&(O.pos=g,O.offset=w-g):0===E?C?m<x&&(z.pos=m,z.offset=x-m):x<d&&(z.pos=d,z.offset=x-d):(o=E/M,s=i[1]-o*x,u=l=0,c=!1,C&&m<=x?(l=o*m+s,u=m,c=!0):!C&&x<=d?(l=o*d+s,u=d,c=!0):D&&y<=w?(u=((l=y)-s)/o,c=!0):!D&&w<=g&&(u=((l=g)-s)/o,c=!0),c&&(z.isBound=!0,z.pos=u,z.offset=x-u,O.isBound=!0,O.pos=l,O.offset=w-l))),{vertical:z,horizontal:O}),P=R.horizontal,_=R.vertical,B=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],a=n[1],i=e[0],o=e[1],s=Qt(n,e),l=s[0],u=s[1],c=0<u,p=0<l,f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===l&&0===u)return{vertical:f,horizontal:d};var h=ur(t,l?[r]:[],u?[a]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var e=t.pos;return p?i<=e:e<=i}),v.posInfos.filter(function(t){var e=t.pos;return c?o<=e:e<=o}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,y,x,w,S=cr(g),M=S.isSnap,E=S.guideline,D=cr(v),C=D.isSnap,z=D.guideline,O=C?z.pos[1]:0,R=M?E.pos[0]:0;return 0===l?C&&(d.isSnap=!0,d.pos=z.pos[1],d.offset=a-d.pos):0===u?M&&(f.isSnap=!0,f.pos=R,f.offset=r-R):(m=u/l,b=n[1]-m*r,x=y=0,w=!1,M?(y=m*(x=R)+b,w=!0):C&&(x=((y=O)-b)/m,w=!0),w&&(f.isSnap=!0,f.pos=x,f.offset=r-x,d.isSnap=!0,d.pos=y,d.offset=a-y)),{vertical:f,horizontal:d}}(t,e,n),G=B.horizontal,k=B.vertical,A=Br(P,G),j=Br(_,k),T=Math.abs(A),q=Math.abs(j);return{horizontal:{isBound:P.isBound,isSnap:G.isSnap,offset:A,dist:T},vertical:{isBound:_.isBound,isSnap:k.isSnap,offset:j,dist:q}}}function Ar(t,e,n,r){void 0===r&&(r=n);var a=Mr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),i=a.horizontal,o=a.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:ur(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),l=s.horizontal,u=s.vertical,c=Gr(i,l),p=Gr(o,u),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:p,dist:d}}}function jr(t){return t?t/Math.abs(t):0}function Tr(t,e,n,r,a,i){var o,s,l,u,y,x,w,S,M,c=(s=r,l=[],u=[-(o=n)[0],-o[1]],o[0]&&o[1]?(l.push([u,[o[0],-o[1]]],[u,[-o[0],o[1]]]),s&&l.push([u,o])):o[0]?s?l.push([u,[u[0],-1]],[u,[u[0],1]],[u,[o[0],-1]],[u,o],[u,[o[0],1]]):l.push([[u[0],-1],[o[0],-1]],[[u[0],0],[o[0],0]],[[u[0],1],[o[0],1]]):o[1]?s?l.push([u,[-1,u[1]]],[u,[1,u[1]]],[u,[-1,o[1]]],[u,[1,o[1]]],[u,o]):l.push([[-1,u[1]],[-1,o[1]]],[[0,u[1]],[0,o[1]]],[[1,u[1]],[1,o[1]]]):l.push([u,[1,0]],[u,[-1,0]],[u,[0,-1]],[u,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),l),p=xr(e,n,r),f=(y=t,x=e,w=r,S=a,M=i,c.map(function(t){var e=t[0],n=t[1],r=tr(x,e),a=tr(x,n),i=w?kr(y,r,a,S):Ar(y,S,[a]),o=i.horizontal,s=o.dist,l=o.offset,u=o.isBound,c=o.isSnap,p=i.vertical,f=p.dist,d=p.offset,h=p.isBound,g=p.isSnap,v=Qt(n,e);if(!d&&!l)return{isBound:h||u,isSnap:g||c,sign:v,offset:[0,0]};var m=s<f,b=Pr(r,a,-(m?d:l),m,M).map(function(t,e){return t*(v[e]?2/v[e]:0)});return{sign:v,isBound:m?h:u,isSnap:m?g:c,offset:b}}).concat(br(t,p,tr(e,[0,0]),i))),d=fr(f,0),h=fr(f,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function qr(t,e,n,r,a,i,o,s){for(var l,u,c,p,f,d,h,g,v,m,b,y,x,w,S,M,E,D,C,z,O,R,P,_,B,G=mn(t.state),k=t.props.keepRatio,A=0,j=0,T=0;T<2;++T){var q,N,I=Tr(t,e(A,j),a,k,o,s),Y=I.width,X=I.height,F=Y.isBound,W=X.isBound,L=Y.offset,H=X.offset;if(1===T&&(F||(L=0),W||(H=0)),0===T&&o&&!F&&!W)return[0,0];k&&(q=Math.abs(L)*(n?1/n:1),N=Math.abs(H)*(r?1/r:1),(F&&W?q<N:W||!F&&q<N)?L=n*H/r:H=r*L/n),A+=L,j+=H}return a[0]&&a[1]&&(f=t,d=G,g=i,v=s,C=[-(h=a)[0],-h[1]],z=f.state,O=z.width,R=z.height,P=f.props.bounds,B=_=1/0,P&&(m=[[h[0],-h[1]],[-h[0],h[1]]],b=P.left,y=void 0===b?-1/0:b,x=P.top,w=void 0===x?-1/0:x,S=P.right,M=void 0===S?1/0:S,E=P.bottom,D=void 0===E?1/0:E,m.forEach(function(t){var e,n,r=t[0]!==C[0],a=t[1]!==C[1],i=tr(d,t),o=jr(t[1]-C[1]),s=jr(t[0]-C[0]);a&&(e=Pr(g,i,(g[1]<i[1]?D:w)-i[1],!1,v)[1],isNaN(e)||(B=R+o*e)),r&&(n=Pr(g,i,(g[0]<i[0]?M:y)-i[0],!0,v)[0],isNaN(n)||(_=O+s*n))})),u=(l={maxWidth:_,maxHeight:B}).maxWidth,c=l.maxHeight,A+=L=(p=function(t,e,n,r,a,i,o,s,l){var u=Ar(t,s,[tr(e,o)]),c=u.horizontal.offset,p=u.vertical.offset;if(p||c){var f=Jn({datas:l,distX:-p,distY:-c}),d=f[0],h=f[1];return[Math.min(a||1/0,n+o[0]*d)-n,Math.min(i||1/0,r+o[1]*h)-r]}return[0,0]}(t,e(A,j),n+A,r+j,u,c,a,o,s))[0],j+=H=p[1]),[A,j]}function Nr(t,e,n,r){if(!Rr(t,"rotatable"))return r;var a=e.pos1,i=e.pos2,o=e.pos3,s=e.pos4,l=r*Math.PI/180,u=[a,i,o,s].map(function(t){return Qt(t,n)}),c=u.map(function(t){return ee(t,l)}),p=Cr(t,u,c,n,r).concat(Sr(t,u,c,n,r));return p.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),p.length?p[0]:r}function Ir(t,e,n,r,a,i){if(!Rr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=vn(i.absolutePoses,[e,n]),s=rn(o),l=s.left,u=s.right,c=s.top,p=s.bottom,f=[[l,c],[u,c],[l,p],[u,p]];t.props.snapCenter&&f.push([(l+u)/2,(c+p)/2]);var d,h,g,v,m,b,y,x,w,S,M,E,D,C,z,O,R,P,_,B=Ar(t,a,f,o),G=B.vertical,k=B.horizontal,A=yr(t,o,i),j=A.vertical,T=A.horizontal,q=G.isSnap,N=k.isSnap,I=G.isBound||j.isBound,Y=k.isBound||T.isBound,X=_n(G.offset,j.offset),F=_n(k.offset,T.offset),W=(d=r,g=[I,Y],v=[q,N],m=[X,F],S=(h=[e,n])[0],M=h[1],E=g[0],D=g[1],C=v[0],z=v[1],O=m[0],R=m[1],P=-O,_=-R,d&&S&&M?(_=P=0,b=[],E&&D?b.push([0,R],[O,0]):E?b.push([O,0]):D?b.push([0,R]):C&&z?b.push([0,R],[O,0]):C?b.push([O,0]):z&&b.push([0,R]),b.length&&(b.sort(function(t,e){return sn(Qt([S,M],t))-sn(Qt([S,M],e))}),(y=b[0])[0]&&Math.abs(S)>Ie?(P=-y[0],_=M*Math.abs(S+P)/Math.abs(S)-M):y[1]&&Math.abs(M)>Ie&&(x=M,_=-y[1],P=S*Math.abs(M+_)/Math.abs(x)-S),d&&D&&E&&(Math.abs(P)>Ie&&Math.abs(P)<Math.abs(O)?(P*=w=Math.abs(O)/Math.abs(P),_*=w):Math.abs(_)>Ie&&Math.abs(_)<Math.abs(R)?(P*=w=Math.abs(R)/Math.abs(_),_*=w):(P=_n(-O,P),_=_n(-R,_))))):(P=S||E?-O:0,_=M||D?-R:0),[P,_]);return[{isBound:I,isSnap:q,offset:W[0]},{isBound:Y,isSnap:N,offset:W[1]}]}function Yr(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}function Xr(t,e,n,r){var a=t-n,i=a<0?a+e:r;return{size:(a<0?0:a)-i,pos:i}}function Fr(t,u,n,c){var p=[],e=Rn(t.filter(function(t){var e=t.element,n=t.gap;return e&&!n}),function(t){var e,n,r,a=t.element,i=t.pos,o=i[c],s=(Math.min(0,o-u)<0?-1:1)+"_"+i[c?0:1],l=-1<(r=L(e=p,function(t){var e=t[0],n=t[1];return a===e&&o===n}))?e[r]:n;return l?l[2]:(p.push([a,o,s]),s)});return e.forEach(function(t){t.sort(function(t,e){return Xr(t.pos[c],t.size,u,n).size-Xr(e.pos[c],t.size,u,n).size||t.pos[c?0:1]-e.pos[c?0:1]})}),e}function Wr(t,e,f,d,h,g,v,m,b,y,x,w){var S=e[0],M=e[1],E=e[2],D=e[3];return Pn(t.map(function(t,c){var p=!0;return t.map(function(t,e){var n,r=t.pos,a=t.size,i=Xr(r[y],a,d,h),o=i.pos,s=i.size;if(s<v)return null;var l=p;p=!1;var u=m&&l?parseFloat(s.toFixed(b)):0;return w.createElement("div",{className:Le("line",S,"guideline","dashed"),"data-size":0<u?x(u):"",key:S+"LinkGuidline"+c+"-"+e,style:((n={})[M]=f+o+"px",n[E]=-g+r[y?0:1]+"px",n[D]=s+"px",n)})})}))}function Lr(t,e,r,a,i,o){var s=e[0],l=e[1],u=e[2],c=e[3];return t.map(function(t,e){var n;return o.createElement("div",{className:Le("line",s,"guideline","target","bold"),key:s+"TargetGuidline"+e,style:((n={})[l]=r+"px",n[u]=-a+t+"px",n[c]=i+"px",n)})})}function Hr(t,e,o,s,l,u){var c=e[0],p=e[1],f=e[2],d=e[3];return t.map(function(t,e){var n,r=t.pos,a=t.size,i=t.element;return u.createElement("div",{className:Le("line",c,"guideline",i?"bold":""),key:c+"Guidline"+e,style:((n={})[p]=-o+r[l]+"px",n[f]=-s+r[l?0:1]+"px",n[d]=a+"px",n)})})}function Kr(t,a,z,O){var e=t.filter(function(t){var e=t.element,n=t.gap,r=t.type;return e&&n&&r===a}),n="vertical"===a?[0,1]:[1,0],R=n[0],P=n[1];return Pn(e.map(function(t,e){var n=t.pos,r=t.gap,a=t.gapGuidelines,i=t.sizes,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(t)-Math.abs(e)}),t[0]}(n[P]+i[P]-z[P],n[P]-z[P]-O[P]),s=Math.min(i[P],O[P]);0<o&&s<o?o=2*(o-s/2):o<0&&o<-s&&(o=2*(o+s/2));var l,u,c,p,f,d,h,g,v,m,b,y,x,w,S,M,E,D,C=(0<o?0:O[P])+o/2;return m=a,b=R,y=z,x=O,w=n,S=r,M=C,E=Math.abs(S),D=w[b]+(0<S?x[0]:0),m.filter(function(t){return t.pos[b]<=y[b]}).sort(function(t,e){var n=t.pos;return e.pos[b]-n[b]}).filter(function(t){var e=t.pos,n=t.sizes,r=e[b];return bn(r+n[b],1e-4)===bn(D-E,1e-4)&&(D=r,!0)}).map(function(t){var e=-y[b]+t.pos[b]+t.sizes[b];return Ge({},t,{gap:S,renderPos:b?[M,e]:[e,M]})}).concat((l=a,u=R,c=z,p=O,f=n,d=r,h=C,g=Math.abs(d),v=f[u]+(d<0?p[u]:0),l.filter(function(t){return t.pos[u]>c[u]}).sort(function(t,e){var n=t.pos,r=e.pos;return n[u]-r[u]}).filter(function(t){var e=t.pos,n=t.sizes,r=e[u];return bn(r,1e-4)===bn(v+g,1e-4)&&(v=r+n[u],!0)}).map(function(t){var e=-c[u]+t.pos[u]-g;return Ge({},t,{gap:d,renderPos:u?[h,e]:[e,h]})})))}))}function Vr(t,e,n,r,s,l){var u=r[0],c=r[1],p=r[2],f=r[3],a=t.props,i=a.snapDigit,d=void 0===i?0:i,o=a.isDisplaySnapDigit,h=void 0===o||o,g="vertical"===n?"horizontal":"vertical",v="vertical"===n?[0,1]:[1,0],m=v[0],b=v[1];return e.map(function(t,e){var n,r=t.renderPos,a=t.gap,i=Math.abs(a),o=h?parseFloat(i.toFixed(d)):0;return l.createElement("div",{className:Le("line",u,"guideline","gap"),"data-size":0<o?s(o):"",key:g+"GapGuideline"+e,style:((n={})[c]=r[m]+"px",n[p]=r[b]+"px",n[f]=i+"px",n)})})}function Ur(t,e,n,r,a){var i=Mr(t,e,n),o=i.vertical,s=o.isBound,l=o.pos,u=i.horizontal,c=u.isBound,p=u.pos;s&&r.indexOf(l)<0&&r.push(l),c&&a.indexOf(p)<0&&a.push(p);var f=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,o=n.pos4,l=tr([r,a,i,o],[0,0]),u=e.left,c=e.top,p=e.width,f=e.height,d=[[u,c],[u,c+f]],h=[[u,c],[u+p,c]],g=[[u+p,c],[u+p,c+f]],v=[[u,c+f],[u+p,c+f]],m=[],b=[],y={top:!1,bottom:!1,left:!1,right:!1};return[[r,a],[a,o],[o,i],[i,r]].forEach(function(t){var e=dr(l,t),n=e.horizontal,r=e.vertical,a=mr(t,h,r,1),i=mr(t,v,r,1),o=mr(t,d,n,1),s=mr(t,g,n,1);a.isBound&&!y.top&&(m.push(c),y.top=!0),i.isBound&&!y.bottom&&(m.push(c+f),y.bottom=!0),o.isBound&&!y.left&&(b.push(u),y.left=!0),s.isBound&&!y.right&&(b.push(u+p),y.right=!0)}),{horizontal:m,vertical:b}}(t),d=f.vertical,h=f.horizontal;r.push.apply(r,d.filter(function(t){return r.indexOf(t)<0})),a.push.apply(a,h.filter(function(t){return a.indexOf(t)<0}))}var $r={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=n.targetClientRect,p=n.containerClientRect,f=n.is3d,d=n.rootMatrix;if(!u||!Rr(t,""))return[];var h,g,v,m,b,y,x,w,S=f?4:3,M=Math.min(i[0],o[0],s[0],l[0]),E=Math.min(i[1],o[1],s[1],l[1]),D=zr(d,p,S),C=Bn(d,[c.left-D[0],c.top-D[1]],S),z=C[0],O=C[1],R=t.props,P=R.snapThreshold,_=void 0===P?5:P,B=R.snapDigit,G=void 0===B?0:B,k=R.isDisplaySnapDigit,A=void 0===k||k,j=R.snapDistFormat,T=void 0===j?function(t){return t}:j,q=mn(t.state),N=rn(q),I=N.width,Y=N.height,X=N.top,F=N.left,W=N.bottom,L=N.right,H=[],K=[],V=[],U=[],$=[];u.request||(u.direction&&$.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return tr(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return tr(e,t)}):1<(r=Qn(e,n)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var a=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)r.push(a[i]),r.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);return ur(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),!0,1)}(t,q,u.direction)),u.snap&&(h=rn(q),u.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),$.push((v=h,m=!0,b=1,y=(g=t).props.snapCenter&&m,x=["left","right"],w=["top","bottom"],y&&(x.push("center"),w.push("middle")),x=x.filter(function(t){return t in v}),w=w.filter(function(t){return t in v}),ur(g,x.map(function(t){return v[t]}),w.map(function(t){return v[t]}),y,b)))),$.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;H.push.apply(H,e.map(function(t){return t.pos})),K.push.apply(K,n.map(function(t){return t.pos})),V.push.apply(V,Yr(e)),U.push.apply(U,Yr(n))})),Ur(t,[F,L],[X,W],H,K);var J=Fr(U,z,I,0),Z=Fr(V,O,Y,1),Q=["horizontal","left","top","width"],tt=["vertical","top","left","height"],et=Kr(V,"vertical",[a,r],[I,Y]),nt=Kr(U,"horizontal",[a,r],[I,Y]),rt=V.concat(U);return Mn(t,"onSnap",{guidelines:rt.filter(function(t){return!t.element}),elements:Rn(rt.filter(function(t){return t.element}),function(t){return t.element}),gaps:et.concat(nt)},!0),Vr(t,et,"vertical",Q,T,e).concat(Vr(t,nt,"horizontal",tt,T,e),Wr(J,Q,M,z,I,r,_,A,G,0,T,e),Wr(Z,tt,E,O,Y,a,_,A,G,1,T,e),Lr(K,Q,M,r,I,e),Lr(H,tt,E,a,Y,e),Hr(U,Q,a,r,0,e),Hr(V,tt,r,a,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Or(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return sr(t)||na(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,Or(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,Or(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},Jr={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var n=t.props.throttleDragRotate,r=t.state,a=r.dragInfo,i=r.beforeOrigin;if(n&&a){var o=a.dist;if(o[0]||o[1]){var s=sn(o),l=Lt(o,[0,0]);return e.createElement("div",{className:Le("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+i[0]+"px, "+i[1]+"px) rotate("+l+"rad)"}})}}},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentDragger,i=t.state,o=i.targetTransform,s=i.target;if(i.dragger)return!1;i.dragger=a||t.targetDragger;var l,u=window.getComputedStyle(s);n.datas={},n.left=parseFloat(u.left||"")||0,n.top=parseFloat(u.top||"")||0,n.bottom=parseFloat(u.bottom||"")||0,n.right=parseFloat(u.right||"")||0,n.transform=o,n.startTranslate=[0,0],$n(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,l=t,n.absolutePoses=mn(l.state);var c=Sn(t,e,{set:function(t){n.startTranslate=t}});return!1!==(r||Mn(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.dragger=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,o=e.isRequest,s=e.distX,l=e.distY,u=n.isDrag,c=n.prevDist,p=n.prevBeforeDist,f=n.transform,d=n.startTranslate;if(u){var h,g,v,m,b,y,x,w,S,M,E=t.props,D=E.parentMoveable,C=!r&&E.throttleDrag||0,z=!r&&E.throttleDragRotate||0,O=!1,R=0;0<z&&(s||l)&&(h=bn(180*Lt([0,0],[s,l])/Math.PI,z),g=sn([s,l]),R=h*Math.PI/180,s=g*Math.cos(R),l=g*Math.sin(R)),i||r||a||!s&&!l||(m=(v=Ir(t,s,l,z,o,n))[0],b=v[1],y=m.isSnap,x=m.isBound,w=m.offset,S=b.isSnap,M=b.isBound,O=y||S||x||M,s+=w,l+=b.offset),n.passDeltaX=s-(n.passDistX||0),n.passDeltaY=l-(n.passDistY||0),n.passDistX=s,n.passDistY=l;var P=Zt(Jn({datas:n,distX:s,distY:l},!0),d),_=Zt(Jn({datas:n,distX:s,distY:l},!1),d);z||O||(yn(_,C),yn(P,C));var B=Qt(P,d),G=Qt(_,d),k=Qt(G,c),A=Qt(B,p);n.prevDist=G,n.prevBeforeDist=B;var j=n.left+B[0],T=n.top+B[1],q=n.right-B[0],N=n.bottom-B[1],I=f+" translate("+G[0]+"px, "+G[1]+"px)";if(t.state.dragInfo.dist=r?[0,0]:G,r||D||!k.every(function(t){return!t})||!A.some(function(t){return!t})){var Y=Sn(t,e,{transform:I,dist:G,delta:k,translate:_,beforeDist:B,beforeDelta:A,beforeTranslate:P,left:j,top:T,right:q,bottom:N,isPinch:i});return r||Mn(t,"onDrag",Y),Y}}},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas,a=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,n||Mn(t,"onDragEnd",Sn(t,e,{isDrag:a})),a},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var o=Vn(t,this,"dragStart",[r||0,a||0],e,!1),s=Mn(t,"onDragGroupStart",Ge({},i,{targets:t.props.targets,events:o}));return n.isDrag=!1!==s,!!n.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=e.datas,a=Vn(t,this,"drag",[r.passDeltaX,r.passDeltaY],e,!1);if(n){var i=Ge({targets:t.props.targets,events:a},n);return Mn(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Vn(t,this,"dragEnd",[0,0],e,!1),Mn(t,"onDragGroupEnd",Sn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?a=t.y-n.top:"deltaY"in t&&(a+=t.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Zr(t,e,n,r,a,i){var o=t.state.is3d?4:3,s=en(t.state.rootMatrix,a,o),l=Zt([i.left,i.top],s);e.startAbsoluteOrigin=l,e.prevDeg=Lt(l,[n,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function Qr(t,e,n,r,a,i){var o=n.prevDeg,s=i+r,l=Nr(t,e,n.origin,r);return[a*((n.prevDeg=l)-o),l,s]}function ta(t,e,n,r,a,i,o,s){var l=n.prevDeg,u=n.prevSnapDeg,c=n.startDeg,p=n.loop;r<l&&270<l&&r<90?++n.loop:l<r&&l<90&&270<r&&--n.loop;var f=n.loop,d=360*p+u-c+i,h=360*f+r-c+i;n.prevDeg=h-360*f+c-i;var g=a*((h=bn(h,o))-i);return s&&(h=(g=Nr(t,e,n.origin,g))/a+i),n.prevSnapDeg=h-360*f+c-i,[a*(h-d),g,h]}function ea(t,e,n,r,a,i,o,s){return ta(t,e,n,Lt(n.startAbsoluteOrigin,[a,i])/Math.PI*180,r,o,s,!0)}function na(t){return!!t.isRequest||V(t.inputEvent.target,Le("rotation"))}var ra={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var n=t.props,r=n.rotatable,a=n.rotationPosition;if(!r)return null;var i,o,s,l,u,c,p=t.state,f=p.renderPoses,d=p.direction,h=(i=a,s=(o=f)[0],l=o[1],u=o[2],c=o[3],"left"===i?[u,s]:"right"===i?[l,c]:"bottom"===i?[c,u]:[s,l]),g=pn(h,d);return e.createElement("div",{key:"rotation",className:Le("line rotation-line"),style:{transform:"translate(-50%) translate("+(h[0][0]+h[1][0])/2+"px, "+(h[0][1]+h[1][1])/2+"px) rotate("+g+"rad)"}},e.createElement("div",{className:Le("control","rotation")}))},dragControlCondition:na,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.parentRotate,o=e.parentFlag,s=e.isPinch,l=e.isRequest,u=t.state,c=u.target,p=u.left,f=u.top,d=u.origin,h=u.beforeOrigin,g=u.direction,v=u.beforeDirection,m=u.targetTransform;if(!l&&!c)return!1;var b,y,x=t.getRect();n.rect=x,n.transform=m,n.left=p,n.top=f,l||s||o?(b=i||0,n.beforeInfo={origin:x.beforeOrigin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0},n.afterInfo={origin:x.origin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0}):(n.beforeInfo={origin:x.beforeOrigin},n.afterInfo={origin:x.origin},y=hn(t.controlBox.getElement()),Zr(t,n.beforeInfo,r,a,h,y),Zr(t,n.afterInfo,r,a,d,y)),n.direction=g,n.beforeDirection=v,n.startRotate=0,n.datas={};var w=Sn(t,e,{set:function(t){n.startRotate=t}}),S=Mn(t,"onRotateStart",w);return n.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&w},dragControl:function(t,e){var n,r,a,i,o=e.datas,s=e.clientX,l=e.clientY,u=e.parentRotate,c=e.parentFlag,p=e.isPinch,f=o.direction,d=o.beforeDirection,h=o.beforeInfo,g=o.afterInfo,v=o.isRotate,m=o.startRotate,b=o.rect;if(v){var y,x,w,S,M,E,D,C,z,O=t.props,R=O.throttleRotate,P=void 0===R?0:R,_=O.parentMoveable;if(z="parentDist"in e?(w=(x=Qr(t,b,g,y=e.parentDist,f,m))[0],S=x[1],M=x[2],D=(E=Qr(t,b,h,y,f,m))[0],C=E[1],E[2]):p||c?(w=(n=ta(t,b,g,u,f,m,P))[0],S=n[1],M=n[2],D=(r=ta(t,b,h,u,f,m,P))[0],C=r[1],r[2]):(w=(a=ea(t,b,g,f,s,l,m,P))[0],S=a[1],M=a[2],D=(i=ea(t,b,h,d,s,l,m,P))[0],C=i[1],i[2]),w||D||_){var B=Sn(t,e,{delta:w,dist:S,rotate:M,beforeDist:C,beforeDelta:D,beforeRotate:z,transform:o.transform+" rotate("+S+"deg)",isPinch:!!p});return Mn(t,"onRotate",B),B}}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,Mn(t,"onRotateEnd",Sn(t,e,{isDrag:r})),r)},dragGroupControlCondition:na,dragGroupControlStart:function(t,e){var n=e.datas,l=e.inputEvent,r=t.state,u=r.left,c=r.top,p=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(t.rotation);var i=Un(t,this,"dragControlStart",n,Ge({},e,{parentRotate:0}),function(t,e,n){var r=t.state,a=r.left,i=r.top,o=r.beforeOrigin,s=Zt(Qt([a,i],[u,c]),Qt(o,p));e.prevClient=s,n.dragStart=Jr.dragStart(t,(new Kn).dragStart(s,l))}),o=Mn(t,"onRotateGroupStart",Ge({},a,{targets:t.props.targets,events:i}));return n.isRotate=!1!==o,!!n.isRotate&&a},dragGroupControl:function(e,f){var d=f.inputEvent,t=f.datas;if(t.isRotate){var n=this.dragControl(e,f);if(n){var r=n.beforeDist,h=n.beforeDelta/180*Math.PI,a=Un(e,this,"dragControl",t,Ge({},f,{parentRotate:r}),function(t,e,n,r){var a=e.prevClient,i=a[0],o=a[1],s=ee([i,o],h),l=s[0],u=s[1],c=[l-i,u-o];e.prevClient=[l,u];var p=Jr.drag(t,Hn(t.state,c,d,!!f.isPinch,!1));n.drag=p});e.rotation=n.beforeRotate;var i=Ge({targets:e.props.targets,events:a,set:function(t){e.rotation=t}},n);return Mn(e,"onRotateGroup",i),i}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate)return this.dragControlEnd(t,e),Un(t,this,"dragControlEnd",r,e),Mn(t,"onRotateGroupEnd",Sn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0;return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return n+=t.deltaRotate,{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function aa(t,e,r){var n=t.state,a=n.renderPoses,i=n.rotation,o=t.props.renderDirections,s=void 0===o?e:o,l={};return s.forEach(function(t){l[t]=!0}),s.map(function(t){var e=Fe[t];if(!e||!l[t])return null;var n=(bn(i/Math.PI*180,15)+We[t])%180;return r.createElement("div",{className:Le("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:un.apply(void 0,[i].concat(e.map(function(t){return a[t]})))})})}function ia(t,e){return aa(t,["nw","ne","sw","se","n","w","s","e"],e)}function oa(t,e){return aa(t,["nw","ne","sw","se"],e)}var sa={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,a=n.edge;if(r)return(a?oa:ia)(t,e)},dragControlCondition:sr,dragControlStart:function(t,e){var n,r,a,i=e.inputEvent,o=e.isPinch,s=e.parentDirection,l=e.datas,u=e.parentFlag,c=s||(o?[0,0]:gn(i.target)),p=t.state,f=p.target,d=p.width,h=p.height;if(!c||!f)return!1;o||$n(t,{datas:l}),l.datas={},l.direction=c,l.startOffsetWidth=d,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,r=f,a=window.getComputedStyle(r),n=[parseFloat(a.width),parseFloat(a.height)],l.startWidth=n[0],l.startHeight=n[1];var g,v=[Math.max(0,d-l.startWidth),Math.max(0,h-l.startHeight)];l.minSize=v,l.maxSize=[1/0,1/0],u||(g=window.getComputedStyle(f),l.minSize=Zt([parseFloat(g.minWidth)||0,parseFloat(g.minHeight)||0],v),l.maxSize=Zt([parseFloat(g.maxWidth)||1/0,parseFloat(g.maxHeight)||1/0],v)),l.transformOrigin=t.props.transformOrigin,l.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var n=t.props.baseDirection,r=void 0===n?[-1,-1]:n;return[e[0]?e[0]:-1*r[0],e[1]?e[1]:-1*r[1]]}(t,c),l.fixedPosition=or(t,l.startDirection),l.fixedOriginalPosition=or(t,c);var m=Sn(t,e,{direction:c,set:function(t){var e=t[0],n=t[1];l.startWidth=e,l.startHeight=n},setOrigin:function(t){l.transformOrigin=t},dragStart:Jr.dragStart(t,(new Kn).dragStart([0,0],i))});return!1!==Mn(t,"onResizeStart",m)&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:c}),!!l.isResize&&m},dragControl:function(t,e){var n,r=e.datas,a=e.distX,i=e.distY,o=e.parentFlag,s=e.isPinch,l=e.parentDistance,u=e.parentScale,c=e.inputEvent,p=e.parentKeepRatio,f=e.dragClient,d=e.parentDist,h=e.isRequest,g=r.direction,v=r.isResize,m=r.transformOrigin;if(v){var b=r.startWidth,y=r.startHeight,x=r.startOffsetWidth,w=r.startOffsetHeight,S=r.prevWidth,M=r.prevHeight,E=r.minSize,D=r.maxSize,C=t.props,z=C.throttleResize,O=void 0===z?0:z,R=C.parentMoveable,P=g;g[0]||g[1]||(P=[1,1]);var _,B,G,k,A,j,T=t.props.keepRatio||p,q=P[0]||!P[1],N=q?w/x:x/w,I=T||o?g:r.startDirection,Y=f,X=0,F=0;f||(Y=!o&&s?or(t,[0,0]):T?r.fixedOriginalPosition:r.fixedPosition),d?(X=d[0],F=d[1]):u?(X=(u[0]-1)*x,F=(u[1]-1)*w):s?l&&(F=(X=l)*w/x):(_=Jn({datas:r,distX:a,distY:i}),X=P[0]*_[0],F=P[1]*_[1],T&&x&&w&&(B=Lt([0,0],_),G=Lt([0,0],P),k=Lt([0,0],[x,w]),A=sn([X,F]),j=Math.cos(B-G)*A,P[0]?F=P[1]?(X=Math.cos(k)*j,Math.sin(k)*j):Cn(X=j,q,N):X=zn(F=j,q,N)));var W=P[0]||T?Math.max(x+X,Ie):x,L=P[1]||T?Math.max(w+F,Ie):w;T&&x&&w&&(L=W*w/x);var H,K=[0,0];s||(K=function(t,n,r,a,i,e,o){if(!Rr(t,"resizable"))return[0,0];var s=t.state,l=s.matrix,u=s.is3d;return qr(t,function(t,e){return _r(l,n+t,r+e,i,a,u)},n,r,a,i,e,o)}(t,W,L,g,r.fixedOriginalPosition,h,r)),d&&(d[0]||(K[0]=0),d[1]||(K[1]=0)),T?(P[0]&&P[1]&&K[0]&&K[1]&&(Math.abs(K[0])>Math.abs(K[1])?K[1]=0:K[0]=0),(H=!K[0]&&!K[1])&&(q?W=bn(W,O):L=bn(L,O)),P[0]&&!P[1]||K[0]&&!K[1]||H&&q?L=Cn(W+=K[0],q,N):(!P[0]&&P[1]||!K[0]&&K[1]||H&&!q)&&(W=zn(L+=K[1],q,N))):(W+=K[0],L+=K[1],K[0]||(W=bn(W,O)),K[1]||(L=bn(L,O))),W=(n=function(t,n,r,e){if(!e)return t.map(function(t,e){return Math.min(r[e],Math.max(t,n[e]))});var a=t[0],i=t[1],o=An(t,n,!1),s=o[0],l=o[1],u=An(t,r,!0),c=u[0],p=u[1];return a<s||i<l?(a=s,i=l):(c<a||p<i)&&(a=c,i=p),[a,i]}([W,L],E,D,T))[0],L=n[1];var V=[(X=(W=Math.round(W))-x)-S,(F=(L=Math.round(L))-w)-M];if(r.prevWidth=X,r.prevHeight=F,R||!V.every(function(t){return!t})){var U=ir(t,W,L,I,Y,m),$=Sn(t,e,{width:b+X,height:y+F,offsetWidth:W,offsetHeight:L,direction:g,dist:[X,F],delta:V,isPinch:!!s,drag:Jr.drag(t,Hn(t.state,U,c,!!s,!1))});return Mn(t,"onResize",$),$}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,o=n.prevWidth,s=n.prevHeight;if(r){var l=t.state,u=l.width-(a+o),c=l.height-(i+s),p=3<Math.abs(u),f=3<Math.abs(c);return p&&(n.startWidth+=u,n.startOffsetWidth+=u,n.prevWidth+=u),f&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),p||f?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isResize&&(n.isResize=!1,Mn(t,"onResizeEnd",Sn(t,e,{isDrag:r})),r)},dragGroupControlCondition:sr,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=or(o,l),n=Un(o,this,"dragControlStart",t,function(t,e){var n=or(t,l),r=te(re(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),a=r[0],i=r[1];return e.originalX=a,e.originalY=i,s}),r=Ge({},e,{targets:o.props.targets,events:n}),a=Mn(o,"onResizeGroupStart",r);return t.isResize=!1!==a,!!t.isResize&&e},dragGroupControl:function(i,o){var t=o.datas;if(t.isResize){var e=this.dragControl(i,o);if(e){var n=e.offsetWidth,r=e.offsetHeight,a=e.dist,s=i.props.keepRatio,l=[n/(n-a[0]),r/(r-a[1])],u=or(i,t.direction),c=Un(i,this,"dragControl",t,function(t,e){var n=te(re(i.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],a=n[1];return Ge({},o,{parentDist:null,parentScale:l,dragClient:Zt(u,[r,a]),parentKeepRatio:s})}),p=Ge({targets:i.props.targets,events:c},e);return Mn(i,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize)return this.dragControlEnd(t,e),Un(t,this,"dragControlEnd",r,e),Mn(t,"onResizeGroupEnd",Sn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},la={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.edge;if(!r&&a)return(i?oa:ia)(t,e)},dragControlCondition:sr,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection||(r?[0,0]:gn(a.target)),o=t.state,s=o.width,l=o.height,u=o.targetTransform,c=o.target;if(!i||!c)return!1;r||$n(t,{datas:n}),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=i,n.width=s,n.height=l,n.startScale=[1,1],n.fixedPosition=or(t,i);var p=Sn(t,e,{direction:i,set:function(t){n.startScale=t},dragStart:Jr.dragStart(t,(new Kn).dragStart([0,0],a))});return!1!==Mn(t,"onScaleStart",p)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&p},dragControl:function(t,e){var n=e.datas,r=e.distX,a=e.distY,i=e.parentScale,o=e.parentDistance,s=e.parentKeepRatio,l=e.parentFlag,u=e.isPinch,c=e.inputEvent,p=e.dragClient,f=e.parentDist,d=e.isRequest,h=n.prevDist,g=n.direction,v=n.width,m=n.height,b=n.transform,y=n.isScale,x=n.startScale;if(!y)return!1;var w=t.props,S=w.throttleScale,M=w.parentMoveable,E=g;g[0]||g[1]||(E=[1,1]);var D,C,z,O,R,P,_,B,G=t.props.keepRatio||s,k=t.state,A=E[0]||!E[1],j=v*x[0],T=m*x[1],q=A?T/j:j/T,N=1,I=1,Y=p;p||(Y=!l&&u?or(t,[0,0]):n.fixedPosition),f?(N=(v+f[0])/v,I=(m+f[1])/m):i?(N=i[0],I=i[1]):u?o&&(N=(v+o)/v,I=(m+o*m/v)/m):(D=Jn({datas:n,distX:r,distY:a}),C=E[0]*D[0],z=E[1]*D[1],G&&v&&m&&(O=Lt([0,0],D),R=Lt([0,0],E),P=Lt([0,0],[j,T]),_=sn([C,z]),B=Math.cos(O-R)*_,E[0]?z=E[1]?(C=Math.cos(P)*B,Math.sin(P)*B):Cn(C=B,A,q):C=zn(z=B,A,q)),N=(v+C)/v,I=(m+z)/m),N=E[0]||G?N*x[0]:x[0],I=E[1]||G?I*x[1]:x[1],0===N&&(N=1e-9*(0<h[0]?1:-1)),0===I&&(I=1e-9*(0<h[1]?1:-1));var X,F=[N/x[0],I/x[1]],W=[N,I];u||!t.props.groupable||ht(X=(k.snapRenderInfo||{}).direction)&&(X[0]||X[1])&&(k.snapRenderInfo={direction:g,request:e.isRequest});var L,H,K,V=[0,0];u||(V=function(t,n,r,a,e,i){var o=i.width,s=i.height;if(!Rr(t,"scalable"))return[0,0];var l=i.is3d,u=qr(t,function(t,e){return _r(ar(i,Zt(n,[t/o,e/s])),o,s,a,r,l)},o,s,r,a,e,i);return[u[0]/o,u[1]/s]}(t,F,g,n.fixedPosition,d,n)),G?(E[0]&&E[1]&&V[0]&&V[1]&&(Math.abs(V[0])>Math.abs(V[1])?V[1]=0:V[0]=0),(L=!V[0]&&!V[1])&&(A?F[0]=bn(F[0]*x[0],S)/x[0]:F[1]=bn(F[1]*x[1],S)/x[1]),E[0]&&!E[1]||V[0]&&!V[1]||L&&A?(F[0]+=V[0],H=Cn(v*F[0]*x[0],A,q),F[1]=H/m/x[1]):(!E[0]&&E[1]||!V[0]&&V[1]||L&&!A)&&(F[1]+=V[1],K=zn(m*F[1]*x[1],A,q),F[0]=K/v/x[0])):(F[0]+=V[0],F[1]+=V[1],V[0]||(F[0]=bn(F[0]*x[0],S)/x[0]),V[1]||(F[1]=bn(F[1]*x[1],S)/x[1])),0===F[0]&&(F[0]=1e-9*(0<h[0]?1:-1)),0===F[1]&&(F[1]=1e-9*(0<h[1]?1:-1));var U,$,J=[F[0]/h[0],F[1]/h[1]];if($=x,W=[(U=F)[0]*$[0],U[1]*$[1]],n.prevDist=F,N===h[0]&&I===h[1]&&!M)return!1;var Z,Q,tt,et,nt,rt,at,it,ot,st,lt,ut,ct,pt,ft=(Q=J,tt=g,et=Y,nt=(Z=t).state,rt=nt.is3d,at=nt.left,it=nt.top,ot=nt.width,st=nt.height,lt=rt?4:3,ut=Z.props.groupable,ct=ut?at:0,pt=ut?it:0,Qt(nr(et,ar(Z.state,Q),ot,st,lt,tt),[ct,pt])),dt=Sn(t,e,{scale:W,direction:g,dist:F,delta:J,transform:b+" scale("+N+", "+I+")",isPinch:!!u,drag:Jr.drag(t,Hn(t.state,ft,c,u,!1))});return Mn(t,"onScale",dt),dt},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,Mn(t,"onScaleEnd",Sn(t,e,{isDrag:r})),r)},dragGroupControlCondition:sr,dragGroupControlStart:function(o,s){var t=s.datas,e=this.dragControlStart(o,s);if(!e)return!1;var l=e.direction,u=or(o,l),n=Un(o,this,"dragControlStart",t,function(t,e){var n=or(t,l),r=te(re(-o.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),a=r[0],i=r[1];return e.originalX=a,e.originalY=i,s}),r=Ge({},e,{targets:o.props.targets,events:n}),a=Mn(o,"onScaleGroupStart",r);return t.isScale=!1!==a,!!t.isScale&&r},dragGroupControl:function(i,o){var t=o.datas;if(t.isScale){var e=this.dragControl(i,o);if(e){var s=i.props.keepRatio,l=e.scale,u=or(i,t.direction),n=Un(i,this,"dragControl",t,function(t,e){var n=te(re(i.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],a=n[1];return Ge({},o,{parentDist:null,parentScale:l,parentKeepRatio:s,dragClient:Zt(u,[r,a])})}),r=Ge({targets:i.props.targets,events:n},e);return Mn(i,"onScaleGroup",r),r}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale)return this.dragControlEnd(t,e),Un(t,this,"dragControlEnd",r,e),Mn(t,"onScaleGroupEnd",Sn(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function ua(t,o){return t.map(function(t,e){return n=t,r=o[e],(n*(i=2)+r*(a=1))/(a+i);var n,r,a,i})}function ca(t,e,n){var r=Lt(t,e),a=Lt(t,n)-r;return 0<=a?a:a+2*Math.PI}var pa={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable;if(!r&&!a&&i){var o=t.state,s=o.pos1,l=o.pos2,u=o.pos3,c=o.pos4,p=ua(s,l),f=ua(l,s),d=ua(s,u),h=ua(u,s),g=ua(u,c),v=ua(c,u),m=ua(l,c),b=ua(c,l);return[e.createElement("div",{className:Le("line"),key:"middeLine1",style:ln(p,g)}),e.createElement("div",{className:Le("line"),key:"middeLine2",style:ln(f,v)}),e.createElement("div",{className:Le("line"),key:"middeLine3",style:ln(d,m)}),e.createElement("div",{className:Le("line"),key:"middeLine4",style:ln(h,b)})].concat(ia(t,e))}},dragControlCondition:function(t){return!t.isRequest&&V(t.inputEvent.target,Le("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,a=t.props.target,i=gn(n.target);if(!i||!a)return!1;var o=t.state,s=o.transformOrigin,l=o.is3d,u=o.targetTransform,c=o.targetMatrix,p=o.width,f=o.height,d=o.left,h=o.top;return r.datas={},r.targetTransform=u,r.warpTargetMatrix=l?c:Kt(c,3,4),r.targetInverseMatrix=Xt(Ft(r.warpTargetMatrix,4),3,4),r.direction=i,r.left=d,r.top=h,$n(t,{datas:r}),r.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t){return Qt(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return te(r.warpTargetMatrix,[e,n,0,1],4)}),r.startMatrix=ae(4),r.prevMatrix=ae(4),r.absolutePoses=mn(o),r.posIndexes=Zn(i),!(o.snapRenderInfo={request:e.isRequest,direction:i})!==Mn(t,"onWarpStart",Sn(t,e,{set:function(t){r.startMatrix=t}}))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n,r,a,i,o=e.datas,s=e.isRequest,l=e.distX,u=e.distY,c=o.targetInverseMatrix,p=o.prevMatrix,f=o.isWarp,d=o.startMatrix,h=o.poses,g=o.posIndexes,v=o.absolutePoses;if(!f)return!1;Rr(t,"warpable")&&(1<(n=g.map(function(t){return v[t]})).length&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),a=(r=Ar(t,s,n.map(function(t){return[t[0]+l,t[1]+u]}))).horizontal,i=r.vertical,u-=a.offset,l-=i.offset);var m=Jn({datas:o,distX:l,distY:u},!0),b=o.nextPoses.slice();if(g.forEach(function(t){b[t]=Zt(b[t],m)}),!Ne.every(function(t){return e=t.map(function(t){return h[t]}),n=t.map(function(t){return b[t]}),r=ca(e[0],e[1],e[2]),a=ca(n[0],n[1],n[2]),!((i=Math.PI)<=r&&a<=i||r<=i&&i<=a);var e,n,r,a,i}))return!1;var y=se(h[0],h[1],h[2],h[3],b[0],b[1],b[2],b[3]);if(!y.length)return!1;var x=ne(Ut(c,y,4)),w=o.targetTransform+" matrix3d("+x.join(",")+")";return Mn(t,"onWarp",Sn(t,e,{delta:$t(Ft(p,4),x,4),matrix:$t(d,o.prevMatrix=x,4),multiply:$t,dist:x,transform:w})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Mn(t,"onWarpEnd",Sn(t,e,{isDrag:r})),r)}},fa=Le("area"),da=Le("area-pieces"),ha=Le("area-piece"),ga=Le("avoid");function va(t){var e=t.areaElement,n=t.state,r=n.width,a=n.height;$(e,ga),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+a+"px"}function ma(t){return t.createElement("div",{key:"area_pieces",className:da},t.createElement("div",{className:ha}),t.createElement("div",{className:ha}),t.createElement("div",{className:ha}),t.createElement("div",{className:ha}))}var ba={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,o=t.state,s=o.width,l=o.height,u=o.renderPoses;if(i)return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:fa}),ma(e)];if(!r||!a)return[];var c=se([0,0],[s,0],[0,l],[s,l],u[0],u[1],u[2],u[3]),p=c.length?"matrix3d("+ne(c).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:m(t,"areaElement"),className:fa,style:{top:"0px",left:"0px",width:s+"px",height:l+"px",transformOrigin:"0 0",transform:p}}),ma(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1,n.inputTarget=i.target;var o=t.areaElement,s=t.state,l=s.moveableClientRect,u=s.renderPoses,c=s.rootMatrix,p=s.is3d,f=l.left,d=l.top,h=rn(u),g=h.left,v=h.top,m=h.width,b=h.height,y=Bn(c,[r-f,a-d],p?4:3),x=y[0],w=y[1],S=[{left:g,top:v,width:m,height:(w-=v)-10},{left:g,top:v,width:(x-=g)-10,height:b},{left:g,top:v+w+10,width:m,height:b-w-10},{left:g+x+10,top:v,width:m-x-10,height:b}],M=[].slice.call(o.nextElementSibling.children);return S.forEach(function(t,e){M[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),U(o,ga),!0},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,va(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var n=e.inputEvent,r=e.isDragArea;e.datas.isDragArea||va(t);var a,i=t.state.target,o=n.target;r||t.isMoveableElement(o)||(a=i.contains(o),Mn(t,"onClick",Sn(t,e,{inputTarget:o,isTarget:i===o,containsTarget:a})))},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.isDragArea,a=e.datas;if(!n)return!1;r||va(t);var i,o,s,l,u=a.inputTarget,c=n.target;r||t.isMoveableElement(c)||u===c||(s=-1<(o=(i=t.props.targets).indexOf(c)),l=!1,-1===o&&(l=-1<(o=L(i,function(t){return t.contains(c)}))),Mn(t,"onClickGroup",Sn(t,e,{targets:i,inputTarget:c,targetIndex:o,isTarget:s,containsTarget:l})))}},ya={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var n=t.state,r=n.beforeOrigin,a=n.rotation;return[e.createElement("div",{className:Le("control","origin"),style:un(a,r),key:"beforeOrigin"})]}};function xa(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var wa={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(i,o){var t=i.props.scrollContainer,e=void 0===t?i.getContainer():t,n=new Ce;o.datas.dragScroll=n;var r=o.isControl?"controlDragger":"targetDragger",s=o.targets;n.on("scroll",function(t){var e=t.container,n=t.direction,r=Sn(i,o,{scrollContainer:e,direction:n}),a=s?"onScrollGroup":"onScroll";s&&(r.targets=s),Mn(i,a,r)}).on("move",function(t){var e=t.offsetX,n=t.offsetY;i[r].scrollBy(e,n,o.inputEvent,!1)}),n.dragStart(o,{container:e})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=void 0===a?t.getContainer():a,o=r.scrollThreshold,s=void 0===o?0:o,l=r.getScrollPosition,u=void 0===l?xa:l;return n.drag(e,{container:i,threshold:s,getScrollPosition:function(t){return u({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Ge({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Ge({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Ge({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Ge({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Ge({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Ge({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Ge({},e,{targets:t.props.targets}))}},Sa={name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Ma={name:"padding",props:{padding:Object},render:function(t,i){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},r=n.left,a=void 0===r?0:r,o=n.top,s=void 0===o?0:o,l=n.right,u=void 0===l?0:l,c=n.bottom,p=void 0===c?0:c,f=t.state,d=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return 0<a&&g.push([0,2]),0<s&&g.push([0,1]),0<u&&g.push([1,3]),0<p&&g.push([2,3]),g.map(function(t,e){var n=t[0],r=t[1],a=se([0,0],[100,0],[0,100],[100,100],h[n],h[r],d[n],d[r]);if(a.length)return i.createElement("div",{key:"padding"+e,className:Le("padding"),style:{transform:"matrix3d("+ne(a).join(",")+")"}})})}},Ea=[Sa,$r,Ln,Jr,ra,sa,la,pa,wa,ba,Ma,ya],Da={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,a={left:e.left,top:e.top};return t.map(function(t,e){return r.createElement(Fn,{key:"moveable"+e,ref:o(n,"moveables",e),target:t,origin:!1,parentMoveable:n,parentPosition:a})})}};function Ca(t,i){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.max(e[i],n[i],r[i],a[i])}))}function za(t,i){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.min(e[i],n[i],r[i],a[i])}))}var Oa=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.differ=new Pe,t.moveables=[],t.rotation=0,t}Be(t,n);var e=t.prototype;return e.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=Tn(this,e.target,"Group"),this.controlDragger=qn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=!On(t.container,n.container);r&&(e.container=n.container);var a=this.differ.update(n.targets),i=a.added,o=a.changed,s=a.removed;(r||i.length||o.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r,a,i,o,s,l,u,c,p,f,d,h,g,v;void 0===n&&(n=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(e,!1,!1)}),r=this.state,a=this.props,i=r.target||a.target,(!t||""!==e&&a.updateGroup)&&(this.rotation=a.defaultGroupRotate),o=this.rotation,l=(s=function(t,e){if(!t.length)return[0,0,0,0];var i,a,o,r,s,n,l,u=t.map(function(t){return mn(t.state)}),c=Ye,p=Ye,f=0,d=0,h=bn(e,Ie);return h%90?(i=e/180*Math.PI,a=Math.tan(i),o=-1/a,r=[Xe,Ye],s=[Xe,Ye],u.forEach(function(t){t.forEach(function(t){var e=t[1]-a*t[0],n=t[1]-o*t[0];r[0]=Math.max(r[0],e),r[1]=Math.min(r[1],e),s[0]=Math.max(s[0],n),s[1]=Math.min(s[1],n)})}),r.forEach(function(r){s.forEach(function(t){var e=(t-r)/(a-o),n=a*e+r;c=Math.min(c,e),p=Math.min(p,n)})}),f=Ca(n=u.map(function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return[ee(e,-i),ee(n,-i),ee(r,-i),ee(a,-i)]}),0)-za(n,0),d=Ca(n,1)-za(n,1)):(c=za(u,0),p=za(u,1),f=Ca(u,0)-c,d=Ca(u,1)-p,h%180&&(l=f,f=d,d=l)),[c,p,f,d]}(this.moveables,o))[0],u=s[1],c=s[2],p=s[3],i.style.cssText+="left:0px;top:0px;width:"+c+"px; height:"+p+"px;transform:rotate("+o+"deg)",r.width=c,r.height=p,f=this.getContainer(),h=[(d=fn(this.controlBox.getElement(),i,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||f,r)).left,d.top],g=mn(d),d.pos1=g[0],d.pos2=g[1],d.pos3=g[2],d.pos4=g[3],d.origin=Zt(h,d.origin),d.beforeOrigin=Zt(h,d.beforeOrigin),(v=d.targetClientRect).top+=u-d.top-r.top,v.left+=l-d.left-r.left,this.updateState(Ge({},d,{left:l-d.left,top:u-d.top}),n))},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return n.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){n.prototype.updateAbles.call(this,this.props.ables.concat([Da]),"Group")},t.defaultProps=Ge({},Fn.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),t}(Fn),Ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Be(e,t);var n=e.prototype;return n.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=ht(e);if(n&&1<e.length){var r=Ge({},this.props,{target:null,targets:e,ables:Ea.concat([Da],t)});return ct(Oa,Ge({key:"group",ref:m(this,"moveable")},r))}var a=n?e[0]:e;return ct(Fn,Ge({key:"single",ref:m(this,"moveable")},Ge({},this.props,{target:a,ables:Ea.concat(t)})))},n.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},n.dragStart=function(t){this.moveable.dragStart(t)},n.isInside=function(t,e){return this.moveable.isInside(t,e)},n.hitTest=function(t){return this.moveable.hitTest(t)},n.updateRect=function(){this.moveable.updateRect()},n.updateTarget=function(){this.moveable.updateTarget()},n.isDragging=function(){return this.moveable.isDragging()},n.getRect=function(){return this.moveable.getRect()},n.request=function(t,e){return this.moveable.request(t,e)},n.destroy=function(){this.moveable.componentWillUnmount()},e}(wt),Pa=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return a(t,n),t.prototype.render=function(){return zt(ct(Ra,s({ref:m(this,"moveable")},this.state)),this.state.parentElement)},t}(xt),_a=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","snapGap","isDisplaySnapDigit","snapDigit","zoom","triggerAblesSimultaneously","padding","snapDistFormat","dragTarget"],Ba=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","click","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd","snap"],Ga=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"],ka=function(o){function t(t,e){void 0===e&&(e={});var n=o.call(this)||this;n.tempElement=document.createElement("div");var r=s({container:t},e),a={};Ba.forEach(function(e){a[("on "+e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return n.trigger(e,t)}}),Ct(ct(Pa,s({ref:m(n,"innerMoveable"),parentElement:t},r,a)),n.tempElement);var i=r.target;return ht(i)&&1<i.length&&n.updateRect(),n}a(t,o);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.destroy=function(){Ct(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(o=(i<3?a(o):3<i?a(e,n,o):a(e,n))||o);return 3<i&&o&&Object.defineProperty(e,n,o),o}([u(Ga,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),u(_a,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(t),Aa={draggable:{vanilla:'\nimport Moveable from "moveable";\n\n/* const translate = [0, 0]; */\nconst draggable = new Moveable(document.body, {\n    target: document.querySelector(".draggable"),\n    draggable: true,\n    throttleDrag: 0,\n}).on("drag", ({ target, left, top, beforeDelta }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n\n    /* translate[0] += beforeDelta[0]; */\n    /* translate[1] += beforeDelta[1]; */\n    /* target.style.transform\n        = "translateX(" + translate[0] + "px) "\n        + "translateY(" + translate[1] + "px)"; */\n});\n        ',react:'\nimport Moveable from "react-moveable";\nthis.translate = [0, 0];\nreturn (\n    <Moveable\n        target={document.querySelector(".draggable")}\n        draggable={true}\n        throttleDrag={0}\n        onDrag={({ target, left, top, beforeDelta }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n\n            /* const translate = this.translate */\n            /* translate[0] += beforeDelta[0]; */\n            /* translate[1] += beforeDelta[1]; */\n            /* target.style.transform\n                = "translateX(" + translate[0] + "px) "\n                + "translateY(" + translate[1] + "px)"; */\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [draggable]="true"\n    [throttleDrag]="0"\n    (drag)="onDrag($event)\n    />\n`,\n})\nexport class AppComponent {\n    translate = [0, 0];\n    onDrag({ target, left, top, beforeDelta }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n\n        /* const translate = this.translate */\n        /* translate[0] += beforeDelta[0]; */\n        /* translate[1] += beforeDelta[1]; */\n        /* target.style.transform\n            = "translateX(" + translate[0] + "px) "\n            + "translateY(" + translate[1] + "px)"; */\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target draggable" bind:this={target}>Draggable</div>\n<Moveable\n    target={target}\n    draggable={true}\n    throttleDrag={0}\n    on:drag={({ detail }) => {\n        target.style.left = detail.left + "px";\n        target.style.top = detail.top + "px";\n    }}\n/>'},resizable:{vanilla:'\nimport Moveable from "moveable";\n\nconst resizable = new Moveable(document.body, {\n    target: document.querySelector(".resizable"),\n    resizable: true,\n    throttleResize: 0,\n    keepRatio: true,\n}).on("resize", ({ target, width, height, dist }) => {\n    console.log(width, height, dist);\n    target.style.width = width + "px";\n    target.style.height = height + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".resizable")}\n        resizable={true}\n        throttleResize={0}\n        keepRatio={true}\n        onResize={({ target, width, height, dist }) => {\n            console.log(width, height, dist);\n            target.style.width = width + "px";\n            target.style.height = height + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [resizable]="true"\n    [throttleResize]="0"\n    [keepRatio]="true"\n    (resize)="onResize($event)\n    />\n`,\n})\nexport class AppComponent {\n    onResize({ target, width, height, dist }) {\n        console.log(width, height, dist);\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target resizable" bind:this={target}>Resizable</div>\n<Moveable\n    target={target}\n    resizable={true}\n    throttleResize={0}\n    keepRatio={true}\n    on:resize={({ detail }) => {\n        const { target, width, height, dist } = detail;\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }}\n/>'},scalable:{vanilla:'\nimport Moveable from "moveable";\n\nconst scale = [1, 1];\nconst scalable = new Moveable(document.body, {\n    target: document.querySelector(".scalable"),\n    scalable: true,\n    throttleScale: 0,\n    keepRatio: true,\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale[0] +  "," + scale[1] + ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.scale = [1, 1];\nreturn (\n    <Moveable\n        target={document.querySelector(".scalable")}\n        scalable={true}\n        throttleScale={0}\n        keepRatio={true}\n        onScale={({ target, delta }) => {\n            const scale = this.scale;\n            scale[0] *= delta[0];\n            scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + scale[0] +  "," + scale[1] + ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [scalable]="true"\n    [throttleScale]="0"\n    [keepRatio]="true"\n    (scale)="onScale($event)\n    />\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    onScale({ target, delta }) {\n        const scale = this.scale;\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let scale = [1, 1];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    scalable={true}\n    throttleScale={0}\n    keepRatio={true}\n    on:scale={({ detail: { target, delta }}) => {\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }}\n/>'},rotatable:{vanilla:'\nimport Moveable from "moveable";\n\nlet rotate = 0;\n\nconst rotatable = new Moveable(document.body, {\n    target: document.querySelector(".rotatable"),\n    rotatable: true,\n    throttleRotate: 0,\n}).on("rotate", ({ target, beforeDelta, delta }) => {\n    rotate += delta;\n    target.style.transform\n        = "rotate(" + rotate +  "deg)";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".rotatable")}\n        rotatable={true}\n        throttleRotate={0}\n        onRotate={({ target, beforeDelta, delta }) => {\n            this.rotate += delta;\n            target.style.transform\n                = "rotate(" + this.rotate +  "deg)";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [rotatable]="true"\n    [throttleRotate]="0"\n    [keepRatio]="true"\n    (rotate)="onRotate($event)\n    />\n`,\n})\nexport class AppComponent {\n    rotate = 0;\n    onRotate({ target, delta }) {\n        this.rotate += delta;\n        target.style.transform\n            = "rotate(" + this.rotate +  "deg)";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let rotate = 0;\n    let target;\n<\/script>\n<div class="target rotatable" bind:this={target}>Rotatable</div>\n<Moveable\n    target={target}\n    rotatable={true}\n    throttleRotate={0}\n    on:rotate={({ detail }) => {\n        const { target, beforeDelta, delta } = detail;\n        rotate += delta;\n        target.style.transform\n            = "rotate(" + rotate +  "deg)";\n    }}\n/>'},warpable:{vanilla:'\nimport Moveable from "moveable";\n\nlet matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nconst warpable = new Moveable(document.body, {\n    target: document.querySelector(".warpable"),\n    warpable: true,\n    throttleRotate: 0,\n}).on("warp", ({ target, multiply, delta }) => {\n    matrix = multiply(matrix, delta);\n    target.style.transform\n        = "matrix3d(" + matrix.join(",") +  ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nreturn (\n    <Moveable\n        target={document.querySelector(".warpable")}\n        warpable={true}\n        onWarp={({ target, multiply, delta }) => {\n            this.matrix = multiply(this.matrix, delta);\n            target.style.transform\n                = "matrix3d(" + matrix.join(",") +  ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [warpable]="true"\n    (warp)="onWarp($event)\n    />\n`,\n})\nexport class AppComponent {\n    matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    onWarp({ target, dist }) {\n        this.matrix = multiply(this.matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    warpable={true}\n    on:warp={({ detail }) => {\n        const { target, multiply, delta } = detail;\n        matrix = multiply(matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }}\n/>'},pinchable:{vanilla:'\nimport Moveable from "moveable";\nconst scale = [1, 1];\nlet rotate = 0;\n\nconst pinchable = new Moveable(document.body, {\n    target: document.querySelector(".pinchable"),\n    pinchable: ["rotatable", "scalable"],\n}).on("rotate", ({ target, beforeDelta }) => {\n    rotate += beforeDelta;\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n});',react:'\nimport Moveable from "react-moveable";\nthis.scale = [1, 1];\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".pinchable")}\n        pinchable={["rotatable", "scalable"]},\n        onRotate={({ target, beforeDelta }) => {\n            this.rotate += beforeDelta;\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n        onScale={({ target, beforeDelta }) => {\n            this.scale[0] *= delta[0];\n            this.scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n    />\n);',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n    <div #target class="target">target</div>\n    <ngx-moveable\n        [target]="target"\n        [pinchable]="[\'rotatable\', \'scalable\']"\n        [rotate]="onRotate($event)"\n        [scale]="onScale($event)"\n/>\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    rotate = 0;\n    onRotate({ target, beforeDelta }) {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n    onScale({ target, beforeDelta }) {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    pinchable={["rotatable", "scalable"]},\n    on:rotate={({ detail: { target, beforeDelta }}) => {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n    on:scale={({ detail: { target, beforeDelta }}) => {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n/>'},snappable:{vanilla:'\nimport Moveable from "moveable";\n\nconst snappable = new Moveable(document.body, {\n    target: document.querySelector(".snappable"),\n    snappable: true,\n    verticalGuidelines: [0, 150, 200],\n    horizontalGuidelines: [0, 150, 200],\n}).on("drag", ({ target, left, top }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".origin")}\n        origin={true}\n        snappable={true}\n        verticalGuidelines={[0, 150, 200]}\n        horizontalGuidelines={[0, 150, 200]}\n        onDrag={({ target, left, top }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [snappable]="true"\n    [verticalGuidelines]="[0, 150, 200]"\n    [horizontalGuidelines]="[0, 150, 200]"\n    />\n`,\n})\nexport class AppComponent {\n    onDrag({ target, left, top }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    origin={true}\n    snappable={true}\n    verticalGuidelines={[0, 150, 200]}\n    horizontalGuidelines={[0, 150, 200]}\n    on:drag={({ detail: { target, left, top }}) => {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }}\n/>'},groupable:{vanilla:'\nimport Moveable from "moveable";\nconst poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nconst groupable = new Moveable(document.body, {\n    target,\n    draggable: true,\n}).on("dragGroup", ({ events }) => {\n    events.forEach(({ target, beforeDelta }, i) => {\n        poses[i][0] += beforeDelta[0];\n        poses[i][1] += beforeDelta[1];\n\n        target.style.transform\n            = "translate("\n            + poses[i][0] + "px, "\n            + poses[i][1] + "px)";\n    });\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\n\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nreturn (\n    <Moveable\n        target={target}\n        draggable={true}\n        onDragGroup={({ events }) => {\n            events.forEach(({ target, beforeDelta }, i) => {\n                this.poses[i][0] += beforeDelta[0];\n                this.poses[i][1] += beforeDelta[1];\n\n                target.style.transform\n                    = "translate("\n                    + this.poses[i][0] + "px, "\n                    + this.poses[i][1] + "px)";\n            });\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target1 class="target">target1</div>\n<div #target2 class="target">target2</div>\n<div #target3 class="target">target3</div>\n<ngx-moveable\n    [target]="[target1, target2, target3]"\n    [draggable]="true"\n    (dragGroup)="onDragGroup($event)\n    />\n`,\n})\nexport class AppComponent {\n    poses = [\n        [0, 0],\n        [0, 0],\n        [0, 0],\n    ];\n    onDragGroup({ events }) {\n        events.forEach(({ target, beforeDelta }, i) => {\n            this.poses[i][0] += beforeDelta[0];\n            this.poses[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + this.poses[i][0] + "px, "\n                + this.poses[i][1] + "px)";\n        });\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n    import { onMount } from "svelte";\n    let targets = [];\n    let translates = [];\n\n    onMount(() => {\n        targets = [].slice.call(document.querySelectorAll(".target"));\n        translates = targets.map(() => {\n            return [0, 0];\n        });\n    });\n<\/script>\n<div class="target">Target1</div>\n<div class="target">Target2</div>\n<div class="target">Target3</div>\n<Moveable\n    target={targets}\n    draggable={true}\n    on:dragGroup={({ detail: { events }}) => {\n        events.forEach(({ target, beforeDelta }, i) => {\n            translates[i][0] += beforeDelta[0];\n            translates[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + translates[i][0] + "px, "\n                + translates[i][1] + "px)";\n        });\n    }}\n/>'}};function ja(t,e,n){var r=1-n;return n*n*n+3*n*n*r*e+3*n*r*r*t}function Ta(n,r,a,i){function t(t){var e=function(t,e,n){for(var r=n,a=1;.001<Math.abs(a);){if(a=ja(t,e,r)-n,Math.abs(a)<.001)return r;r-=a/2}return r}(n,a,Math.max(Math.min(1,t),0));return ja(r,i,e)}return t.easingName="cubic-bezier("+n+","+r+","+a+","+i+")",t}function qa(n,r){function t(t){var e=1/n;return 1<=t?1:("start"===r?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+n+", "+r+")",t}var Na,Ia=qa(1,"start"),Ya=qa(1,"end"),Xa=Ta(0,0,1,1),Fa=Ta(.25,.1,.25,1),Wa=Ta(.42,0,1,1),La=Ta(0,0,.58,1),Ha=Ta(.42,0,.58,1),Ka="animation-timing-function",Va={transform:{},filter:{},attribute:{},html:!0},Ua={easing:[Ka]},$a=((Na={})[Ka]=!0,Na.contents=!0,Na.html=!0,Na),Ja={linear:Xa,ease:Fa,"ease-in":Wa,"ease-out":La,"ease-in-out":Ha,"step-start":Ia,"step-end":Ya},Za=function(){function i(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=q(t)?t.split(this.separator):t}var t=i.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this.separator,e=this.prefix,n=this.suffix,r=this.model,a=this.type;return new i(this.value.map(function(t){return t instanceof i?t.clone():t}),{separator:t,prefix:e,suffix:n,model:r,type:a})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof i?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},i}();function Qa(t){var e=g;return 3===t.length&&(t[3]=1),new Za(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function ti(t,e){return new Za(t,{type:"array",separator:e})}function ei(t,e){if(!q(t))return ht(t)?ti(t,","):t;var n,r,a=X(t);return 1<a.length?ti(a.map(function(t){return ei(t)}),","):1<(a=Y(t,"")).length?ti(a.map(function(t){return ei(t)})," "):(a=/^(['"])([^'"]*)(['"])$/g.exec(t))&&a[1]===a[3]?new Za([ei(a[2])],{prefix:a[1],suffix:a[1]}):-1!==t.indexOf("(")?function(t){var e=F(t),n=e.prefix,r=e.value,a=e.suffix;if(void 0===r)return t;if(-1<M.indexOf(n))return Qa(K(t));var i=ei(r,n),o=[r],s=",",l=n+"(",u=")"+a;return i instanceof Za&&(s=i.separator,o=i.value,l+=i.prefix,u=i.suffix+u),new Za(o,{separator:s,model:n,prefix:l,suffix:u})}(t):"#"===t.charAt(0)&&"url"!==e?(r=K(n=t))?Qa(r):n:t}function ni(t){return t instanceof Za}function ri(t){var e=typeof t;if(e===z){if(ht(t))return C;if(ni(t))return D}else if(e===O||e===R)return"value";return e}function ai(t,e){var n,r=[];if(T(n=t)&&n.constructor===Object)for(var a in t)e.push(a),r=r.concat(ai(t[a],e)),e.pop();else r.push(e.slice());return r}function ii(t,e,n){void 0===n&&(n=t.length);for(var r=e,a=0;a<n;++a){if(!T(r))return;r=r[t[a]]}return r}function oi(t,e,n){var r=e.length,a=t;if(0===r)return!1;for(var i=0;i<r;++i){if(!0===a)return!1;if(!(a=a[e[i]])||!n&&!0===a)return!1}return!0}function si(t,e){return oi(Va,t,e)}function li(t){return oi($a,t,!0)}function ui(t){if(!t)return"";var e=[];for(var n in t)e.push(n.replace(/\d$/g,"")+"("+t[n]+")");return e.join(" ")}function ci(t,e){return void 0===e&&(e=!1),pi({},t,e)}function pi(t,e,n){for(var r in void 0===n&&(n=!1),e){var a=e[r],i=ri(a);i===D?t[r]=n?a.toValue():a.clone():i===E?t[r]=n?di([r],a):a:i===C?t[r]=a.slice():i===z?T(t[r])&&!ni(t[r])?pi(t[r],a,n):t[r]=ci(a,n):t[r]=e[r]}return t}function fi(t){return t[0]in Ua?Ua[t[0]]:t}function di(t,e){var n=ri(e);if(n===D)return e.toValue();if(n===E){if(t[0]!==Ka)return di(t,e())}else if(n===z)return ci(e,!0);return e}var hi=function(){function f(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=f.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.raw.apply(this,t);return di(fi(t),n)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ii(fi(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=fi(t),r=n.length;if(!r)return this;var a=ii(n,this.properties,r-1);return T(a)&&delete a[n[r-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=this,a=t.length,i=t.slice(0,-1),o=t[a-1],s=i[0];if(1===a&&o instanceof f)r.merge(o);else if(s in Ua)r._set(Ua[s],o);else if(2===a&&ht(s))r._set(s,o);else if(ni(o))si(i)?r.set.apply(r,i.concat([function e(t,n){void 0===n&&(n={});var r,a=t.model;return a?(t.setOptions({model:"",suffix:"",prefix:""}),r=1<t.size()?t:t.get(0),n[a]=r):t.forEach(function(t){e(t,n)}),n}(o)])):r._set(i,o);else if(ht(o))r._set(i,o);else if(T(o))for(var l in!r.has.apply(r,i)&&si(i)&&r._set(i,{}),o)r.set.apply(r,i.concat([l,o[l]]));else if(q(o)){if(si(i,!0))return li(i)||!si(i)?this._set(i,o):T(n=ei(o))&&r.set.apply(r,i.concat([n])),this;var u=function(t){for(var e=Y(t,";"),n={},r=e.length,a=0;a<r;++a){var i=Y(e[a],":");i.length<2||!i[1]?--r:n[i[0].trim()]=ei(i[1].trim())}return{styles:n,length:r}}(o),c=u.styles,p=u.length;for(var l in c)r.set.apply(r,i.concat([l,c[l]]));if(p)return this;r._set(i,o)}else r._set(i,o);return r},t.getNames=function(){return ai(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=fi(t),r=n.length;return!!r&&!N(ii(n,this.properties,r))},t.clone=function(){return(new f).merge(this)},t.merge=function(t){var e=this.properties,n=t.properties;return n&&pi(e,n),this},t.toCSSObject=function(){var t,e=this.get(),n={};for(var r in e){si([r],!0)||(t=e[r],r===Ka?n[Ka.replace("animation",A)]=(q(t)?t:t.easingName)||"initial":n[r]=t)}var a=ui(e.transform),i=ui(e.filter);return G&&a&&(n[G]=a),k&&i&&(n[k]=i),n},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var n in t)e.push(n+":"+t[n]+";");return e.join("")},t._set=function(t,e){for(var n,r=this.properties,a=t.length,i=0;i<a-1;++i){var o=t[i];o in r||(r[o]={}),r=r[o]}a&&(1===a&&t[0]===Ka?r[Ka]=function(t){var e;if(q(t))if(t in Ja)e=Ja[t];else{var n=ei(t);if(q(n))return 0;if("cubic-bezier"===n.model)e=Ta((t=n.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==n.model)return 0;e=qa(parseFloat(n.value[0]),n.value[1])}}else e=ht(t)?Ta(t[0],t[1],t[2],t[3]):t;return e}(e):r[n=t[a-1]]=q(e)&&!li(t)?ei(e,n):e)},f}(),gi=function(t,e){return(gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var vi=function(e){function t(){this.constructor=n}var n,r;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}gi(n=a,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return i.render=function(){return ct("canvas",{ref:m(this,"canvasElement"),style:this.props.style})},i.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},i.componentDidUpdate=function(){this.resize()},i.scroll=function(t){this.draw(t)},i.resize=function(){var t=this.canvasElement,e=this.props,n=e.width,r=e.height;this.width=n||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw()},i.draw=function(t){void 0===t&&(t=this.state.scrollPos);var e=this.props,n=e.unit,r=e.zoom,a=e.type,i=e.backgroundColor,o=e.lineColor,s=e.textColor,l=this.width,u=this.height;this.state.scrollPos=t;var c=this.canvasContext,p="horizontal"===a;c.rect(0,0,2*l,2*u),c.fillStyle=i,c.fill(),c.save(),c.scale(2,2),c.strokeStyle=o,c.lineWidth=1,c.font="10px sans-serif",c.fillStyle=s,c.translate(.5,0),c.beginPath();for(var f=p?l:u,d=r*n,h=Math.floor(t*r/d),g=Math.ceil((t*r+f)/d)-h,v=0;v<g;++v){var m,b,y=((v+h)*n-t)*r;-d<=y&&y<f&&(m=p?3+y:l-18,b=p?u-18:y-4,p?c.fillText(""+(v+h)*n,m,b):(c.save(),c.translate(m,b),c.rotate(-Math.PI/2),c.fillText(""+(v+h)*n,0,0),c.restore()));for(var x=0;x<10;++x){var w,S,M,E,D,C=y+x/10*d;C<0||f<=C||(w=0===x?p?u:l:x%2==0?10:7,S=p?C:l-w,M=p?C:l,E=p?u-w:C,D=p?u:C,c.moveTo(S,E),c.lineTo(M,D))}}c.stroke(),c.restore()},a.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,style:{width:"100%",height:"100%"},backgroundColor:"#333333",textColor:"#ffffff",lineColor:"#777777"},a}(wt),mi=function(t,e){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var bi=function(){return(bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var yi=function(t,e){return(yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,["scena-"].concat(t))}xi("ruler");var wi,Si,Mi,Ei=xi("guide","adder"),Di=xi("guides"),Ci=xi("guide"),zi=xi("dragging"),Oi=(wi="div",Si=e("scena-",'\n{\n    position: relative;\n}\ncanvas {\n    position: relative;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'),Mi=ue(Si),function(t){function e(){this.constructor=n}var n,r;function a(){return null!==t&&t.apply(this,arguments)||this}return mi(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e),a.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}(t,["className"]);return ct(wi,bi({ref:m(this,"element"),className:n+" "+Mi.className},r))},a.prototype.componentDidMount=function(){this.injectResult=Mi.inject(this.element)},a.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},a.prototype.getElement=function(){return this.element},a}(xt)),Ri=function(t){function e(){this.constructor=n}var n,r;function a(){var u=null!==t&&t.apply(this,arguments)||this;return u.state={guides:[]},u.scrollPos=0,u.guideElements=[],u.onDragStart=function(t){var e=t.datas,n=t.clientX,r=t.clientY,a=t.inputEvent,i="horizontal"===u.props.type,o=u.guidesElement.getBoundingClientRect();e.offset=i?o.top:o.left,U(e.target,zi),u.onDrag({datas:e,clientX:n,clientY:r}),a.stopPropagation(),a.preventDefault()},u.onDrag=function(t){var e=t.datas,n=t.clientX,r=t.clientY,a="horizontal"===u.props.type,i=Math.round((a?r:n)-e.offset);return e.target.style.transform=u.getTranslateName()+"("+i+"px)",i},u.onDragEnd=function(t){var e,n=t.datas,r=t.clientX,a=t.clientY,i=u.onDrag({datas:n,clientX:r,clientY:a}),o=u.state.guides,s=u.props.setGuides,l=Math.round(i/u.props.zoom);$(n.target,zi),n.fromRuler?i>=u.scrollPos&&o.indexOf(l)<0&&u.setState({guides:o.concat([l])},function(){s(u.state.guides)}):(e=n.target.getAttribute("data-index"),i<u.scrollPos||-1<o.indexOf(l)?o.splice(e,1):o[e]=l,u.setState({guides:o.slice()},function(){s(u.state.guides)}))},u}yi(n=a,r=t),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e);var i=a.prototype;return i.render=function(){var t=this.props,e=t.className,n=t.type,r=t.width,a=t.height,i=t.unit,o=t.zoom,s=t.style,l=t.rulerStyle,u=t.backgroundColor,c=t.lineColor,p=t.textColor;return ct(Oi,{ref:m(this,"manager"),className:xi("manager",n)+" "+e,style:s},ct(vi,{ref:m(this,"ruler"),type:n,width:r,height:a,unit:i,zoom:o,backgroundColor:u,lineColor:c,style:l,textColor:p}),ct("div",{className:Di,ref:m(this,"guidesElement")},ct("div",{className:Ei,ref:m(this,"adderElement")}),this.renderGuides()))},i.renderGuides=function(){var n=this,t=this.props,r=t.type,a=t.zoom,i="horizontal"===r?"translateY":"translateX",e=this.state.guides;return this.guideElements=[],e.map(function(t,e){return ct("div",{className:xi("guide",r),ref:o(n,"guideElements",e),key:e,"data-index":e,style:{transform:i+"("+t*a+"px)"}})})},i.componentDidMount=function(){var r=this;this.dragger=new Me(this.manager.getElement(),{container:document.body,dragstart:function(t){var e=t.inputEvent.target,n=t.datas;if(e===r.ruler.canvasElement)t.datas.fromRuler=!0,n.target=r.adderElement;else{if(!V(e,Ci))return!1;n.target=e}r.onDragStart(t)},drag:this.onDrag,dragend:this.onDragEnd})},i.componentWillUnmount=function(){this.dragger.unset()},i.getGuides=function(){return this.state.guides},i.scrollGuides=function(n){var t=this.props.zoom,e=this.guidesElement;this.scrollPos=n,e.style.transform=this.getTranslateName()+"("+-n*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,e){t&&(t.style.display=-n+r[e]<0?"none":"block")})},i.resize=function(){this.ruler.resize()},i.scroll=function(t){this.ruler.scroll(t)},i.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},a.defaultProps={className:"",type:"horizontal",setGuides:function(){},zoom:1,style:{width:"100%",height:"100%"}},a}(wt),Pi=function(t,e){return(Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var _i=function(){return(_i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var Bi=["setGuides","type","width","height","rulerStyle","unit","zoom","style","backgroundColor","lineColor","container","className","textColor"],Gi=function(n){function t(){this.constructor=e}var e,r;function a(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return Pi(e=a,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),a.prototype.render=function(){var t=this.state,e=t.container,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}(t,["container"]);return zt(ct(Ri,_i({ref:m(this,"guides")},n)),e)},a}(xt),ki=function(){function t(t,e){void 0===e&&(e={}),this.tempElement=document.createElement("div"),Ct(ct(Gi,_i({ref:m(this,"innerGuides")},e,{container:t})),this.tempElement)}var e=t.prototype;return e.scroll=function(t){this.getPreactGuides().scroll(t)},e.scrollGuides=function(t){this.getPreactGuides().scrollGuides(t)},e.resize=function(){this.getPreactGuides().resize()},e.getGuides=function(){return this.getPreactGuides().getGuides()},e.setState=function(t,e){this.innerGuides.setState(t,e)},e.destroy=function(){Ct(null,this.tempElement),this.tempElement=null,this.innerGuides=null},e.getPreactGuides=function(){return this.innerGuides.guides},t=function(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(o=(i<3?a(o):3<i?a(e,n,o):a(e,n))||o);return 3<i&&o&&Object.defineProperty(e,n,o),o}([u(Bi,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getPreactGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(),Ai=function(t,e){return(Ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ji,Ti=(function(t,e){function n(t){var e;if(!t||"object"!=typeof t||(e=t.which||t.keyCode||t.charCode)&&(t=e),"number"==typeof t)return o[t];var n=String(t),r=a[n.toLowerCase()];return r||((r=i[n.toLowerCase()])?r:1===n.length?n.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var r=a[e.toLowerCase()];if(r)return r===n;if(r=i[e.toLowerCase()])return r===n}else if("number"==typeof e)return e===n;return!1}};for(var a=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},r=97;r<123;r++)a[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)a[r-48]=r;for(r=1;r<13;r++)a["f"+r]=r+111;for(r=0;r<10;r++)a["numpad "+r]=r+96;var o=e.names=e.title={};for(r in a)o[a[r]]=r;for(var s in i)a[s]=i[s]}(ji={exports:{}},ji.exports),ji.exports),qi=(Ti.code,Ti.codes,Ti.aliases,Ti.names);Ti.title;function Ni(t){return Array.isArray(t)}function Ii(t){return"string"==typeof t}function Yi(t,e,n,r){t.addEventListener(e,n,r)}var Xi,Fi={"+":"plus","left command":"meta","right command":"meta"},Wi={shift:1,ctrl:2,alt:3,meta:4};function Li(t){var e=qi[t]||"";for(var n in Fi)e=e.replace(n,Fi[n]);return e.replace(/\s/g,"")}function Hi(t){var e=t.slice();return e.sort(function(t,e){return(Wi[t]||5)-(Wi[e]||5)}),e}var Ki=function(n){function t(){this.constructor=e}var e,r;function a(t){void 0===t&&(t=window);var e=n.call(this)||this;return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(t){e.triggerEvent("keydown",t)},e.keyupEvent=function(t){e.triggerEvent("keyup",t)},Yi(t,"blur",e.clear),Yi(t,"keydown",e.keydownEvent),Yi(t,"keyup",e.keyupEvent),e}Ai(e=a,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=a.prototype;return Object.defineProperty(a,"global",{get:function(){return Xi=Xi||new a},enumerable:!0,configurable:!0}),i.keydown=function(t,e){return this.addEvent("keydown",t,e)},i.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},i.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},i.keyup=function(t,e){return this.addEvent("keyup",t,e)},i.addEvent=function(t,e,n){return Ni(e)?this.on(t+"."+Hi(e).join("."),n):Ii(e)?this.on(t+"."+e,n):this.on(t,e),this},i.removeEvent=function(t,e,n){return Ni(e)?this.off(t+"."+Hi(e).join("."),n):Ii(e)?this.off(t+"."+e,n):this.off(t,e),this},i.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Li(e.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var a=function(t,e){void 0===e&&(e=Li(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}(e,n);1<a.length&&this.trigger(t+"."+a.join("."),r)},a}(t),Vi=Yt();(Vi.isMobile||-1<Vi.os.name.indexOf("ios")||-1<Vi.browser.name.indexOf("safari"))&&U(document.body,"mobile");var Ui=document.querySelector(".editor .view"),$i=document.querySelector(".label"),Ji=document.querySelector(".rulers"),Zi=Ji.querySelector(".ruler.horizontal"),Qi=Ji.querySelector(".ruler.vertical"),to=document.querySelector('.control input[name="x"]'),eo=document.querySelector('.control input[name="y"]'),no=document.querySelector('.control input[name="w"]'),ro=document.querySelector('.control input[name="h"]'),ao=document.querySelector('.control input[name="r"]'),io=document.querySelector(".moveable.target"),oo=new hi({left:"0px",top:"0px",width:"250px",height:"200px",transform:{translateX:window.innerWidth/2-125+"px",translateY:Math.max(700,window.innerHeight)/2-250+"px",rotate:"0deg",scaleX:1,scaleY:1}});function so(t,e){function n(){e(t.value)}new Ki(t).keyup("enter",n),t.addEventListener("blur",n)}function lo(t){oo.set("transform","translateX",t[0]+"px"),oo.set("transform","translateY",t[1]+"px"),setTimeout(function(){var t=po.getRect();to.value=""+Math.round(10*t.left)/10,eo.value=""+Math.round(10*t.top)/10})}function uo(){io.style.cssText+=oo.toCSS()}so(to,function(t){po.request("draggable",{x:parseFloat(t),isInstant:!0})}),so(eo,function(t){po.request("draggable",{y:parseFloat(t),isInstant:!0})}),so(no,function(t){po.request("resizable",{offsetWidth:parseFloat(t),isInstant:!0})}),so(ro,function(t){po.request("resizable",{offsetHeight:parseFloat(t),isInstant:!0})}),so(ao,function(t){po.request("rotatable",{deltaRotate:parseFloat(t)-parseFloat(oo.get("transform","rotate")),isInstant:!0})}),to.value=""+parseFloat(oo.get("transform","translateX")),eo.value=""+parseFloat(oo.get("transform","translateY")),uo();var co=!1,po=new ka(Ui,{target:io,draggable:!0,resizable:!0,rotatable:!0,snappable:!0,pinchable:!0,snapCenter:!0,snapThreshold:10,throttleResize:0,throttleRotate:1,keepRatio:!1,origin:!1,bounds:{left:0,top:0}}).on("dragStart",function(t){(0,t.set)([parseFloat(oo.get("transform","translateX")),parseFloat(oo.get("transform","translateY"))])}).on("drag",function(t){lo(t.beforeTranslate)}).on("rotateStart",function(t){(0,t.set)(parseFloat(oo.get("transform","rotate")))}).on("rotate",function(t){var e=t.beforeRotate,n=t.clientX,r=t.clientY,a=t.isPinch;oo.set("transform","rotate",e+"deg"),ao.value=e+"°",a||mo(n,r,e+"°")}).on("resizeStart",function(t){var e=t.setOrigin,n=t.dragStart;e(["%","%"]),n&&n.set([parseFloat(oo.get("transform","translateX")),parseFloat(oo.get("transform","translateY"))])}).on("resize",function(t){var e=t.width,n=t.height,r=t.drag,a=t.clientX,i=t.clientY,o=t.isPinch;oo.set("width",e+"px"),oo.set("height",n+"px"),lo(r.beforeTranslate),no.value=""+e,ro.value=""+n,o||mo(a,i,e+" X "+n)}).on("pinchStart",function(){co=!0}).on("pinch",function(t){vo(t.clientX,t.clientY)}).on("render",function(){co&&($i.innerHTML="W: "+parseFloat(oo.get("width"))+"<br/>H: "+parseFloat(oo.get("height"))+"<br/>R: "+parseFloat(oo.get("transform","rotate"))+"°"),uo()}).on("renderEnd",function(){co=!1,$i.style.display="none"});function fo(){return po.innerMoveable.moveable.moveable.isDragging()}Ki.global.keydown("left",function(t){var e=t.inputEvent;fo()||(po.request("draggable",{deltaX:-10,isInstant:!0}),e.preventDefault())}).keydown("up",function(t){var e=t.inputEvent;fo()||(po.request("draggable",{deltaY:-10,isInstant:!0}),e.preventDefault())}).keydown("right",function(t){var e=t.inputEvent;fo()||(po.request("draggable",{deltaX:10,isInstant:!0}),e.preventDefault())}).keydown("down",function(t){var e=t.inputEvent;fo()||(po.request("draggable",{deltaY:10,isInstant:!0}),e.preventDefault())});var ho=new ki(Zi,{type:"horizontal",setGuides:bo,backgroundColor:"#444444"}),go=new ki(Qi,{type:"vertical",setGuides:bo,backgroundColor:"#444444"});function vo(t,e){$i.style.cssText="display: block; transform: translate("+t+"px, "+(e-10)+"px) translate(-100%, -100%);"}function mo(t,e,n){vo(t,e),$i.innerHTML=n}function bo(){var t=window.innerWidth/2+15,e=window.innerHeight/2;po.verticalGuidelines=n(go.getGuides(),[t]),po.horizontalGuidelines=n(ho.getGuides(),[e])}function yo(t){t?(po.throttleRotate=30,po.throttleDragRotate=45,po.keepRatio=!0):(po.throttleRotate=1,po.throttleDragRotate=0,po.keepRatio=!1)}Ki.global.on("keydown",function(t){yo(t.shiftKey)}).on("keyup",function(t){yo(t.shiftKey)}),window.addEventListener("resize",function(){bo(),po.updateRect(),ho.resize(),go.resize()}),document.body.addEventListener("gesturestart",function(t){t.preventDefault()}),bo();var xo=document.querySelector(".draggable"),wo=new ka(xo.parentElement,{target:xo,origin:!1,draggable:!0}).on("drag",function(t){var e=t.target,n=t.transform;e.style.transform=n}),So=document.querySelector(".resizable"),Mo=new ka(So.parentElement,{target:So,origin:!1,resizable:!0}).on("resize",function(t){var e=t.target,n=t.width,r=t.height;e.style.width=n+"px",e.style.height=r+"px"}),Eo=document.querySelector(".scalable"),Do=new ka(Eo.parentElement,{target:Eo,origin:!1,scalable:!0}).on("scale",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Co=document.querySelector(".rotatable"),zo=new ka(Co.parentElement,{target:Co,origin:!1,rotatable:!0}).on("rotate",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Oo=document.querySelector(".warpable"),Ro=new ka(Oo.parentElement,{target:Oo,warpable:!0,origin:!1}).on("warp",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Po=document.querySelector(".snappable"),_o=(new ka(Po.parentElement,{target:Po,draggable:!0,snappable:!0,snapCenter:!0,origin:!1,verticalGuidelines:[0,150,200],horizontalGuidelines:[0,150,200]}).on("drag",function(t){var e=t.target,n=t.left,r=t.top;e.style.left=n+"px",e.style.top=r+"px"}),document.querySelector(".pinchable")),Bo=[1,1],Go=0,ko=new ka(_o.parentElement,{target:_o,pinchable:["rotatable","scalable"],origin:!1}).on("rotate",function(t){var e=t.beforeDelta;Go+=e,_o.style.transform="scale("+Bo.join(", ")+") rotate("+Go+"deg)"}).on("scale",function(t){var e=t.delta;Bo[0]*=e[0],Bo[1]*=e[1],_o.style.transform="scale("+Bo.join(", ")+") rotate("+Go+"deg)"}),Ao=document.querySelector(".groupable"),jo=[[0,0],[0,0],[0,0]],To=new ka(Ao.parentElement,{target:[].slice.call(Ao.querySelectorAll("span")),origin:!1,draggable:!0}).on("dragGroup",function(t){t.events.forEach(function(t,e){var n=t.target,r=t.beforeDelta;jo[e][0]+=r[0],jo[e][1]+=r[1],n.style.transform="translate("+jo[e][0]+"px, "+jo[e][1]+"px)"})});window.addEventListener("resize",function(){wo.updateRect(),Mo.updateRect(),Do.updateRect(),zo.updateRect(),Ro.updateRect(),ko.updateRect(),To.updateRect()}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(function(t){var e=t.getAttribute("data-group"),n=t.getAttribute("data-panel"),r=t.querySelector("code"),a=Aa[e]["preact"===n?"react":n].trim();"preact"===n&&(a=a.replace(/react/g,"preact")),r.innerText=a,hljs.highlightBlock(r)})});var qo={};[].slice.call(document.querySelectorAll("[data-tab]")).forEach(function(r){var t=r.getAttribute("data-group"),e=r.getAttribute("data-tab"),n=document.querySelector('[data-group="'+t+'"][data-panel="'+e+'"]');qo[t]||(qo[t]=[]),qo[t].push([r,n]),r.addEventListener("click",function(){qo[t].forEach(function(t){var e=t[0],n=t[1];r!==e&&(e.classList.remove("selected"),n.classList.remove("selected"))}),r.classList.add("selected"),n.classList.add("selected")})})}();
