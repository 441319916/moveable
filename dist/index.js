/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.15.1
*/
!function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function l(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[];if(!(0<n.length))return!0;n=n.concat(),e.eventType=t;var r=!1,i=[e],o=0;e.stop=function(){r=!0},e.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];for(1<=s.length&&(i=i.concat(s)),o=0;n[o];o++)n[o].apply(this,i);return!r},e.once=function(i,o){if("object"==typeof i&&l(o)){var t,e=i;for(t in e)this.once(t,e[t]);return this}if("string"==typeof i&&"function"==typeof o){var a=this;this.on(i,function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];o.apply(a,n),a.off(i,t)})}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&l(e)){var n,r=t;for(n in r)this.on(n,r[n]);return this}if("string"==typeof t&&"function"==typeof e){var i=this._eventHandler[t];l(i)&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(e)}return this},e.off=function(t,e){if(l(t))return this._eventHandler={},this;if(l(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,r=t;for(n in r)this.off(n,r[n]);return this}var i,o,a=this._eventHandler[t];if(a)for(i=0;void 0!==(o=a[i]);i++)if(o===e){a=a.splice(i,1);break}return this},t}();return t.VERSION="2.1.2",t}();function p(e,n){return function(t){t&&(e[n]=t)}}function o(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),y=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),_="function"==typeof Map,a=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var x=function(){function t(t,e,n,r,i,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,n){var s=[],l=[];return t.forEach(function(t){var e=t[0],n=t[1],r=new a;s[e]=r,l[n]=r}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],r=t[1];if(n===r)return[0,0];var i=s[n],o=l[r-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),s=this.changed,l=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],r=t[1],i=s[e],o=i[0],a=i[1];if(n!==r)return l.push([o,a]),!0}),this.cachePureChanged=l},t}();function u(t,e,n){var r=_?Map:n?y:b,i=n||function(t){return t},o=[],a=[],s=[],l=t.map(i),u=e.map(i),c=new r,f=new r,p=[],h=[],d={},g=[],v=0,m=0;return l.forEach(function(t,e){c.set(t,e)}),u.forEach(function(t,e){f.set(t,e)}),l.forEach(function(t,e){var n=f.get(t);void 0===n?(++m,a.push(e)):d[n]=m}),u.forEach(function(t,e){var n=c.get(t);void 0===n?(o.push(e),++v):(s.push([n,e]),m=d[e]||0,p.push([n-m,e-v]),h.push(e===n),n!==e&&g.push([n,e]))}),a.reverse(),new x(t,e,o,a,g,s,p,h)}function e(t){if(!O)return"";var e=(O.body||O.documentElement).style,n=P.length;if(typeof e[t]!==D)return t;for(var r=0;r<n;++r){var i="-"+P[r]+"-"+t;if(typeof e[i]!==D)return i}return""}var c=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=u(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),f="rgb",h="rgba",d="hsl",g="hsla",v=[f,h,d,g],m="function",w="property",S="array",E="object",M="string",C="number",D="undefined",O=typeof document!==D&&document,P=["webkit","ms","moz","o"],R=e("transform"),z=e("filter"),k=e("animation");function X(t){return typeof t===D}function A(t){return t&&typeof t===E}function V(t){return Array.isArray(t)}function B(t){return typeof t===M}function G(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}function N(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function T(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function j(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Y(t){var e=function(t){return t.replace("#","")}(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16)/255;return isNaN(o)&&(o=1),[n,r,i,o]}function F(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?Y(function(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4);return["#",e,e,n,n,r,r,i,i].join("")}(t)):Y(t);if(-1!==t.indexOf("(")){var e=N(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=G(r),o=[],a=i.length;switch(n){case f:case h:for(var s=0;s<a;++s)o[s]=parseFloat(i[s]);return o;case d:case g:for(s=0;s<a;++s)-1!==i[s].indexOf("%")?o[s]=parseFloat(i[s])/100:o[s]=parseFloat(i[s]);return function(t){var e=t[0],n=t[1],r=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var i,o=(1-Math.abs(2*r-1))*n,a=o*(1-Math.abs(e/60%2-1)),s=r-o/2;return e<60?i=[o,a,0]:e<120?i=[a,o,0]:e<180?i=[0,o,a]:e<240?i=[0,a,o]:e<300?i=[a,0,o]:e<360&&(i=[o,0,a]),[Math.round(255*(i[0]+s)),Math.round(255*(i[1]+s)),Math.round(255*(i[2]+s)),3<t.length?t[3]:1]}(o)}}}function I(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function q(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function W(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function L(t,e,n,r){t.addEventListener(e,n,r)}function H(t,e,n){t.removeEventListener(e,n)}var U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function K(t,e){function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var $=function(){return($=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Z(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function J(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Q(i,o){var a=Object.keys(i),n=Object.keys(o),t=u(a,n,function(t){return t}),r={},s={},l={};return t.added.forEach(function(t){var e=n[t];r[e]=o[e]}),t.removed.forEach(function(t){var e=a[t];s[e]=i[e]}),t.maintained.forEach(function(t){var e=t[0],n=a[e],r=[i[n],o[n]];i[n]!==o[n]&&(l[n]=r)}),{added:r,removed:s,changed:l}}function tt(t){t.forEach(function(t){t()})}function et(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function nt(t,e,n,r){return B(t)?new lt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?ut:t.type.prototype.render?ht:ft)(t.type,e,n,r,t.ref,t.props)}function rt(t){var e=t.className,n=Z(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function it(t,e){if(!e)return t;for(var n in e)X(t[n])&&(t[n]=e[n]);return t}function ot(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.key,a=i.ref,s=Z(i,["key","ref"]);return{type:t,key:o,ref:a,props:$($({},s),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat(V(t)?e(t):t)}),n}(n).filter(function(t){return null!=t})})}}var at=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!B(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return B(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function st(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}K(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(at),ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t}K(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return J(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=document.createElement(this.type)),bt(this,this._providers,this.props.children,t,null);var i=this.base,o=st(e),a=o.attributes,s=o.events,l=st(this.props),u=l.attributes,c=l.events;return function(t,e,n){var r=Q(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in i)n.setAttribute(s,i[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in o)n.removeAttribute(s)}(rt(a),rt(u),i),function(t,e,n){var r=Q(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in o)n.removeEventListener(s);for(var s in i)n.addEventListener(s,i[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in o)n.removeEventListener(s)}(s,c,this),function(t,e,n){var r=n.style,i=Q(t,e),o=i.added,a=i.removed,s=i.changed;for(var l in o)r[l]=o[l];for(var l in s)r[l]=s[l][1];for(var l in a)r[l]=""}(e.style||{},this.props.style||{},i),t.push(function(){r?n._mounted():n._updated()}),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach(function(t){t._unmount()}),this.events={},e.parentNode.removeChild(e)},t}(at);function ct(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?ct(e[0].base):null}var ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}K(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return bt(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(at),pt=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}K(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(at),ht=function(a){function t(t,e,n,r,i,o){return void 0===o&&(o={}),a.call(this,t,e,n,r,i,it(o,t.defaultProps))||this}K(t,a);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(it(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this;this.props=it(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),bt(this,this._providers,s?[s]:[],t,n,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(e,a))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(at),dt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],i=this._provider;bt(i.container,[i],[i.original],r,$($({},this.state),t),n)&&(e&&r.push(e),tt(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.shouldComponentUpdate=function(t,e){return J(this.props,t)||J(this.state,e)},e}(dt),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}K(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new pt(n),yt(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;yt(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){yt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(gt);function mt(i,a,o){var s=o.map(function(t){return B(t)?null:t.key}),t=u(et(a.map(function(t){return t.key})),et(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],n=t[1],r=a.splice(e,1)[0];a.splice(n,0,r);var i=ct(r.base),o=ct(a[n+1]&&a[n+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,nt(o[t],s[t],t,i))});var e=t.maintained.filter(function(t){t[0];var e=t[1],n=o[e],r=a[e];return(B(n)?"text_"+n:n.type)!==r.type?(r._unmount(),a.splice(e,1,nt(n,s[e],e,i)),!0):(r.index=e,!1)});return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,e.map(function(t){t[0];return t[1]}))}function bt(i,o,n,r,a,s){var t=mt(i,o,n),e=o.filter(function(t,e){return t._update(r,n[e],a,s)}),l=function t(e){if(!e)return null;var n=e.base;return n instanceof Node?n:t(e.container)}(i);return l&&t.reverse().forEach(function(t){var e=o[t],n=ct(e.base);if(n&&l!==n&&!n.parentNode){var r=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=ct(n[i].base);if(o)return o}return null}(i,e);l.insertBefore(n,r)}}),0<e.length}function yt(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return function(t,e,n){var r=[];bt(t,t._providers,e,r,n),tt(r)}(n=n||new pt(e),t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function _t(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),yt(t,e,r),n&&n()}function xt(e,n){return function(t){t&&(e[n]=t)}}var wt=("undefined"!=typeof window&&window||{}).navigator,St={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function Et(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r])&&n.push(t[r]);return n}var Mt=void 0;function Ct(t,e){return e&&e.test?!!e.test(t):-1<t.indexOf(e)}function Dt(t,e){var n=Et(t,function(t){return Ct(Mt,t.criteria)})[0];return n&&n.identity||e.name}function Ot(t,r){return Et(t,function(t){var e=t.criteria,n=new RegExp(t.identity,"i").test(r);return!!(e?n&&Ct(Mt,e):n)})[0]}function Pt(t,e){var n=St.defaultString.browser.version,r=new RegExp("("+t+")","i").exec(e);if(!r)return n;var i=r.index,o=r[0];if(-1<i){var a=i+o.length+1;n=e.substring(a).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return n}function Rt(t){if(t)return Pt(function(t){var e=Ot(St.browser,t);return e=e||{criteria:t,versionSearch:t,identity:t}}(t).versionSearch||t,Mt)}function zt(){var t=St.webview,e=void 0;return function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(Et(t,function(t){return Ct(Mt,t.criteria)}),function(t){return e=Pt(t.browserVersionSearch,Mt),!(!Ct(Mt,t.webviewToken)&&!Ct(e,t.webviewBrowserVersion))})}function kt(t){var e=function(t){return Ot(St.os,t)}(t)||{},n=St.defaultString.os.version,r=void 0;if(t){if(e.versionAlias)return e.versionAlias;var i=e.versionSearch||t,o=new RegExp("("+i+")\\s([\\d_\\.]+|\\d_0)","i");return o.exec(Mt)&&(r=o.exec(Mt)[2].replace(/_/g,".").replace(/;|\)/g,"")),r||n}}function Bt(){var t=Dt(St.os,St.defaultString.os);return{name:t,version:kt(t)}}function Gt(){var t=Dt(St.browser,St.defaultString.browser);return{name:t,version:Rt(t),webview:zt()}}function At(){!function(t){Mt=t}(0<arguments.length&&void 0!==arguments[0]?arguments[0]:wt.userAgent);var t={os:Bt(),browser:Gt(),isMobile:-1!==Mt.indexOf("Mobi")};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),"ios"===t.os.name&&t.browser.webview&&(t.browser.version="-1"),t}function Nt(t,e,n,r,i,o){for(var a=n;a<r;++a)t[a]+=t[i+a-n]*o,e[a]+=e[i+a-n]*o}function Tt(t,e,n,r,i){for(var o=n;o<r;++o){var a=t[o],s=e[o];t[o]=t[i+o-n],t[i+o-n]=a,e[o]=e[i+o-n],e[i+o-n]=s}}function jt(t,e,n,r,i){for(var o=n;o<r;++o)t[o]/=i,e[o]/=i}function Yt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Xt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=ee(e),i=0;i<e;++i){var o=e*i,a=e*(i+1),s=o+i;if(0===n[s])for(var l=i+1;l<e;++l)if(n[e*l+i]){Tt(n,r,o,a,e*l);break}if(!n[s])return[];jt(n,r,o,a,n[s]);for(l=0;l<e;++l){var u=e*l,c=u+e,f=n[u+i];0!==f&&i!==l&&Nt(n,r,u,c,o,-f)}}return r}function Ft(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function It(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return 0<=i?i:i+2*Math.PI}function qt(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Wt(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=ee(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*n+a]=t[o*e+a];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function Lt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ee(e);return t.forEach(function(t){r=Ht(r,t,e)}),r}function Ht(t,e,n){var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s)for(var l=r[a*o+s]=0;l<i;++l)r[a*o+s]+=t[a*i+l]*e[l*o+s];return r}function Ut(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],i=t.length/n,o=e.length/i,a=0;a<n;++a)for(var s=0;s<o;++s)for(var l=r[a+s*o]=0;l<i;++l)r[a+s*o]+=t[a+l*i]*e[l+s*o];return r}function Kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,r=0,i=n-1;0<=i;--i)r+=t[i];return n?r/n:0}function Vt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function $t(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Zt(t,e,n){void 0===n&&(n=e.length);var r=Ht(t,e,n),i=r[n-1];return r.map(function(t){return t/i})}function Jt(t,e){return Zt(te(e,3),qt(t,3))}function Qt(t){return 9===t.length?[t[0],t[3],t[1],t[4],t[2],t[5]]:Ft(t)}function te(t,e){var n=Math.cos(t),r=Math.sin(t),i=ee(e);return i[0]=n,i[1]=-r,i[e]=r,i[e+1]=n,i}function ee(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function ne(t,e){for(var n=ee(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function re(t,e){for(var n=ee(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(i+1)-1]=t[i];return n}function ie(t,e,n,r,i,o,a,s){var l=t[0],u=t[1],c=e[0],f=e[1],p=n[0],h=n[1],d=r[0],g=r[1],v=i[0],m=i[1],b=o[0],y=o[1],_=a[0],x=a[1],w=s[0],S=s[1],E=Xt([l,u,1,0,0,0,-v*l,-v*u,0,0,0,l,u,1,-m*l,-m*u,c,f,1,0,0,0,-b*c,-b*f,0,0,0,c,f,1,-y*c,-y*f,p,h,1,0,0,0,-_*p,-_*h,0,0,0,p,h,1,-x*p,-x*h,d,g,1,0,0,0,-w*d,-w*g,0,0,0,d,g,1,-S*d,-S*g],8);if(!E.length)return[];var M=Ht(E,[v,m,b,y,_,x,w,S],8);return M[8]=1,Wt(M,3,4)}At.VERSION="2.1.5";var oe=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function ae(i){var o,a="rCS"+function(t){return oe(t).toString(36)}(i),s=0;return{className:a,inject:function(t){var e,n=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===s;return(n||r)&&(e=function(n,t,e){var r=document.createElement("style");return r.setAttribute("type","text/css"),r.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return G(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(e||document.head||document.body).appendChild(r),r}(a,i,n)),r&&(o=e),n||++s,{destroy:function(){n?(t.removeChild(e),e=null):(0<s&&--s,0===s&&o&&(o.parentNode.removeChild(o),o=null))}}}}}var se=function(t,e){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var le=function(){return(le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var ue=function(){return(ue=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ce(t,e,n,r){var i=me(t),o=me(e),a=me(r);return pe(be(r[0],ye(i,a)),be(r[0],ye(o,a)),n[0])}function fe(t){return t.touches?ge(t.touches):[ve(t)]}function pe(t,e,n){var r=t.clientX,i=t.clientY;return{clientX:r,clientY:i,deltaX:r-e.clientX,deltaY:i-e.clientY,distX:r-n.clientX,distY:i-n.clientY}}function he(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function de(t,n,r){return t.map(function(t,e){return pe(t,n[e],r[e])})}function ge(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ve(t[r]));return n}function ve(t){return{clientX:t.clientX,clientY:t.clientY}}function me(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function be(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function ye(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var _e=function(){function t(t,e){var s=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.onDragStart=function(t){if(s.flag||!1!==t.cancelable){if(function(t){return t.touches&&2<=t.touches.length}(t)){if(!s.flag&&t.touches.length!==t.changedTouches.length)return;s.pinchFlag||s.onPinchStart(t)}if(!s.flag){var e=s.startClients[0]?s.startClients:fe(t);s.customDist=[0,0],s.flag=!0,s.isDrag=!1,s.startClients=e,s.prevClients=e,s.datas={};var n=pe(e[s.movement=0],s.prevClients[0],s.startClients[0]),r=s.options,i=r.dragstart,o=r.preventRightClick,a=r.preventDefault;(o&&3===t.which||!1===(i&&i(ue({datas:s.datas,inputEvent:t},n))))&&(s.startClients=[],s.prevClients=[],s.flag=!1),s.flag&&a&&t.preventDefault()}}},this.onDrag=function(t,e){if(s.flag){var n=fe(t);s.pinchFlag&&s.onPinch(t,n);var r=s.move([0,0],t,n);if(r&&(r.deltaX||r.deltaY)){var i=s.options.drag;i&&i(ue({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(s.flag){s.pinchFlag&&s.onPinchEnd(t),s.flag=!1;var e=s.options.dragend,n=s.prevClients,r=s.startClients,i=s.pinchFlag?ce(n,n,r,s.startPinchClients):pe(n[0],n[0],r[0]);s.startClients=[],s.prevClients=[],e&&e(ue({datas:s.datas,isDrag:s.isDrag,inputEvent:t},i))}},this.options=ue({container:t,preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var n=this.options,r=n.container,i=n.events;if(this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.isMouse&&(L(t,"mousedown",this.onDragStart),L(r,"mousemove",this.onDrag),L(r,"mouseup",this.onDragEnd)),this.isTouch){var o={passive:!1};L(t,"touchstart",this.onDragStart,o),L(r,"touchmove",this.onDrag,o),L(r,"touchend",this.onDragEnd,o)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],i=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,l=this.pinchFlag?ce(n,a,s,this.startPinchClients):pe(n[0],a[0],s[0]);o[0]+=r,o[1]+=i,l.deltaX+=r,l.deltaY+=i;var u=l.deltaX,c=l.deltaY;return l.distX+=o[0],l.distY+=o[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,ue({datas:this.datas},l,{isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r=this.options,i=r.pinchstart,o=r.pinchThreshold;if(!(this.isDrag&&this.movement>o)){var a=ge(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,a),(n=this.prevClients).push.apply(n,a),this.startDistance=he(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,l=me(s),u=pe(l,l,l);i(ue({datas:this.datas,touches:de(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,i=this.startClients,o=pe(me(e),me(r),me(i)),a=he(e);n(ue({datas:this.datas,touches:de(e,r,i),scale:a/this.startDistance,distance:a},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,i=this.startClients,o=pe(me(r),me(r),me(i));n(ue({datas:this.datas,isPinch:e,touches:de(r,r,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(H(t,"mousedown",this.onDragStart),H(e,"mousemove",this.onDrag),H(e,"mouseup",this.onDragEnd)),this.isTouch&&(H(t,"touchstart",this.onDragStart),H(e,"touchmove",this.onDrag),H(e,"touchend",this.onDragEnd))},t}(),xe=function(t,e){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function we(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}!function(t,e){function n(){this.constructor=t}xe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e);var n=t.prototype;return n.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),r=n.top,i=n.left,o=n.width,a=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:i,width:o,height:a}},n.drag=function(t,e){var n=this,r=t.clientX,i=t.clientY,o=e.container,a=e.threshold,s=void 0===a?0:a,l=e.throttleTime,u=void 0===l?0:l,c=e.getScrollPosition,f=void 0===c?we:c,p=this.startRect,h=this.startPos,d=Date.now?Date.now():(new Date).getTime(),g=Math.max(u+this.prevTime-d,0),v=[0,0];if(p.top>i-s?(h[1]>p.top||i<h[1])&&(v[1]=-1):p.top+p.height<i+s&&(h[1]<p.top+p.height||i>h[1])&&(v[1]=1),p.left>r-s?(h[0]>p.left||r<h[0])&&(v[0]=-1):p.left+p.width<r+s&&(h[0]<p.left+p.width||r>h[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){n.drag(t,e)},g),!1;this.prevTime=d;var m=f({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=f({container:o,direction:v}),y=b[0]-m[0],_=b[1]-m[1];return!(!y&&!_)&&(this.trigger("move",{offsetX:v[0]?y:0,offsetY:v[1]?_:0,inputEvent:t}),u&&(this.timer=window.setTimeout(function(){n.drag(t,e)},u)),!0)},n.dragEnd=function(){clearTimeout(this.timer)},t}(t),Ee=function(t,e){return(Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Me,Ce="function"==typeof Map?void 0:(Me=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Me)}),De=function(e){function t(t){return void 0===t&&(t=[]),e.call(this,t,Ce)||this}return function(t,e){function n(){this.constructor=t}Ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e),t}(c),Oe=function(t,e){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pe(t,e){function n(){this.constructor=t}Oe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Re=function(){return(Re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ze(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var ke,Be=At(),Ge=-1<Be.os.name.indexOf("ios")||-1<Be.browser.name.indexOf("safari"),Ae="moveable-",Ne=(ke=Ae,("\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=ze(1,t),n=ze(2,t),r=45*Math.round(t/45)%180,i=135==r?"nwse-resize":45==r?"nesw-resize":90==r?"ew-resize":"ns-resize";return"cursor:"+i+";cursor: url('"+e+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+i+";"}(t)+"\n}\n"}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n"+(Ge?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n").replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+ke+"$1")+"{"})),Te=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],je=1e-7,Ye=Math.pow(10,10),Xe=-Ye,Fe={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ie={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function qe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,[Ae].concat(t))}function We(){return ee(3)}function Le(t,e,n){return Lt(e,re(n,e),t,re(n.map(function(t){return-t}),e))}function He(o){return Ue(wn(o,":before")).map(function(t,e){var n=T(t),r=n.value,i=n.unit;return r*function(t,e,n){return"%"!==e?1:t.ownerSVGElement.viewBox.baseVal[n?"width":"height"]/100}(o,i,0===e)})}function Ue(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Ke(t,e,n){for(var r=document.body,i=!t||n?t:t.parentElement,o=!1,a="relative";i&&i!==r;){e===i&&(o=!0);var s=wn(i),l=s.transform;if("static"!==(a=s.position)||l&&"none"!==l)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function Ve(t,e,n,r){var i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(r){var l=(e||document.documentElement).getBoundingClientRect();a-=l.left,s-=l.top}var u,c=X(a),f=!c;return f||"svg"===o?u=Ue(n).map(function(t){return parseFloat(t)}):(u=Ge?He(t):Ue(n).map(function(t){return parseFloat(t)}),f=!0,"g"===o?s=a=0:(a=(i=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=t.ownerSVGElement.viewBox.baseVal,i=n.x-r.x,o=n.y-r.y;return[i,o,e[0]-i,e[1]-o]}(t,u))[0],s=i[1],u[0]=i[2],u[1]=i[3])),{isSVG:c,hasOffset:f,offset:[a,s],origin:u}}function $e(t,e,n){var r,i,o,a,s=t,l=[],u=t===e,c=!1,f=3,p=Ke(e,e,!0).offsetParent;for(n&&(e=t.parentElement);s&&!u;){var h=wn(s),d=s.tagName.toLowerCase(),g=h.position,v="fixed"===g,m=h.transform,b=6===(o=(a=m)&&"none"!==a?A(a)?a:N(a).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]).length?[o[0],o[2],o[4],o[1],o[3],o[5],0,0,1]:Ft(o),y=b.length;if(!c&&16===y){c=!0,f=4;for(var _=l.length,x=0;x<_;++x)l[x]=Wt(l[x],3,4)}c&&9===y&&(b=Wt(b,3,4));var w=Ve(s,e,h,v),S=w.hasOffset,E=w.isSVG,M=w.origin,C=w.offset,D=C[0],O=C[1];"svg"===d&&i&&l.push(Je(s,f),ee(f));var P=Ke(s,e),R=P.offsetParent,z=P.isEnd,k=P.isStatic;Ge&&S&&!E&&k&&"relative"===g&&(D-=R.offsetLeft,O-=R.offsetTop,u=u||z);var B=0,G=0;if(S&&p!==R&&(B=R.clientLeft,G=R.clientTop),l.push(Le(b,f,M),re(S?[D-s.scrollLeft+B,O-s.scrollTop+G]:[s,M],f)),i=i||b,r=r||M,u||v)break;s=R,u=z}return{offsetContainer:p,matrixes:l,targetMatrix:i=i||ee(f),transformOrigin:r=r||[0,0],is3d:c}}function Ze(t,e,n,r,i,o){var a=$e(t,e,r),s=a.matrixes,l=a.is3d,u=a.targetMatrix,c=a.transformOrigin,f=$e(a.offsetContainer,n,i),p=f.matrixes,h=f.is3d,d=h||l?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=e||document.body,m=r?Wt(r,o,d):ee(d),b=u,y=i?Wt(i,o,d):ee(d),_=r?Wt(r,o,d):ee(d),x=ee(d),w=s.length,S=Ke(v,v,!0).offsetParent;p.reverse(),s.reverse(),!l&&h&&(b=Wt(b,3,4),s.forEach(function(t,e){s[e]=Wt(t,3,4)})),l&&!h&&p.forEach(function(t,e){p[e]=Wt(t,3,4)}),i||p.forEach(function(t){y=Ht(y,t,d)}),s.forEach(function(t,e){var n;w-2===e&&(_=m.slice()),w-1===e&&(x=m.slice()),A(t[d-1])&&(n=function(t,e,n,r,i,o){var a,s=ln(t),l=s[0],u=s[1],c=e.getBoundingClientRect(),f=t.getBoundingClientRect(),p=f.left-c.left+e.scrollLeft,h=f.top-c.top+e.scrollTop,d=f.width,g=f.height,v=Lt(n,i,o),m=nn(v,l,u,n),b=m.left,y=m.top,_=m.width,x=m.height,w=Qe(v,r,n),S=$t(w,[b,y]),E=[p+S[0]*d/_,h+S[1]*g/x],M=[0,0],C=0;for(;++C<10;){var D=Xt(i,n);a=$t(Qe(D,E,n),Qe(D,w,n)),M[0]=a[0],M[1]=a[1];var O=nn(Lt(n,i,re(M,n),o),l,u,n),P=O.left,R=O.top,z=P-p,k=R-h;if(Math.abs(z)<2&&Math.abs(k)<2)break;E[0]-=z,E[1]-=k}return M.map(function(t){return Math.round(t)})}(t[d-1],S,d,t[2*d-1],m,s[e+1]),t[d-1]=n[0],t[2*d-1]=n[1]),m=Ht(m,t,d)});var E=!g&&l;b=b||ee(E?4:3);var M=(E?"matrix3d":"matrix")+"("+Qt(g&&16===b.length?Wt(b,4,3):b)+")";return[y=Yt(y,d,d),_,x,m,b,M,c,l||h]}function Je(t,e){var n=t.clientWidth,r=t.clientHeight,i=t.viewBox.baseVal,o=i.width||n,a=i.height||r,s=n/o,l=r/a,u=t.preserveAspectRatio.baseVal,c=u.align,f=u.meetOrSlice,p=[0,0],h=[s,l],d=[0,0];if(1!==c){var g=(c-2)%3,v=Math.floor((c-2)/3);p[0]=o*g/2,p[1]=a*v/2;var m=2===f?Math.max(l,s):Math.min(s,l);h[0]=m,h[1]=m,d[0]=(n-o)/2*g,d[1]=(r-a)/2*v}var b=ne(h,e);return b[e-1]=d[0],b[2*e-1]=d[1],Le(b,e,p)}function Qe(t,e,n){return Zt(t,qt(e,n),n)}function tn(t,e,n,r){return[Qe(t,[0,0],r),Qe(t,[e,0],r),Qe(t,[0,n],r),Qe(t,[e,n],r)]}function en(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function nn(t,e,n,r){return en(tn(t,e,n,r))}function rn(t,e,n,r){var i=16===t.length?4:3,o=tn(t,n,r,i),a=o[0],s=a[0],l=a[1],u=o[1],c=u[0],f=u[1],p=o[2],h=p[0],d=p[1],g=o[3],v=g[0],m=g[1],b=Qe(t,e,i),y=b[0],_=b[1],x=Math.min(s,c,h,v),w=Math.min(l,f,d,m),S=Math.max(s,c,h,v),E=Math.max(l,f,d,m);y=y-x||0,_=_-w||0;var M=[((s=s-x||0)+(c=c-x||0)+(h=h-x||0)+(v=v-x||0))/4,((l=l-w||0)+(f=f-w||0)+(d=d-w||0)+(m=m-w||0))/4],C=It(M,[s,l]),D=It(M,[c,f]);return[[x,w,S,E],[y,_],[s,l],[c,f],[h,d],[v,m],C<D&&D-C<Math.PI||D<C&&D-C<-Math.PI?1:-1]}function on(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function an(t,e,n){void 0===n&&(n=It(t,e));var r=function(t,e){return on([e[0]-t[0],e[1]-t[1]])}(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:r+"px"}}function sn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.length;return{transform:"translate("+e.reduce(function(t,e){return t+e[0]},0)/r+"px, "+e.reduce(function(t,e){return t+e[1]},0)/r+"px) rotate("+t+"rad)"}}function ln(t,e,n,r){void 0===e&&(e=window.getComputedStyle(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!X(i);if((n||r)&&a)return[i,o];if(i=t.clientWidth,o=t.clientHeight,a||i||o)return n||r?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function un(t,e){return It(0<e?t[0]:t[1],0<e?t[1]:t[0])}function cn(t,e,n,r,i){var o,a,s,l,u,c=0,f=0,p=0,h=0,d=[0,0],g=[0,0],v=[0,0],m=[0,0],b=[0,0],y=We(),_=We(),x=We(),w=We(),S=We(),E=0,M=0,C=[0,0],D=1,O=1,P=!1,R="",z=[0,0],k={left:0,right:0,top:0,bottom:0,width:0,height:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},B={left:0,right:0,top:0,bottom:0,width:0,height:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},G=0,A=i?i.beforeMatrix:void 0,N=i?i.rootMatrix:void 0,T=i?i.is3d?4:3:void 0;if(t){if(i)E=i.width,M=i.height;else{var j=wn(t);E=t.offsetWidth,M=t.offsetHeight,X(E)&&(E=(o=ln(t,j,!0))[0],M=o[1])}y=(a=Ze(t,e,r,A,N,T))[0],x=a[1],_=a[2],w=a[3],S=a[4],R=a[5],C=a[6],P=a[7],c=(l=(s=rn(w,C,E,M))[0])[0],f=l[1],p=l[2],h=l[3],d=s[1],g=s[2],v=s[3],m=s[4],b=s[5],D=s[6];var Y;Y=(u=rn(_,Vt(C,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e-1;++r)n[r]=t[(r+1)*e-1];return n[e-1]=0,n}(S,P?4:3)),E,M))[0],z=u[1],O=u[6],z=[z[0]+Y[0]-c,z[1]+Y[1]-f],k=fn(t),B=fn(Ke(n,n,!0).offsetParent||document.body,!0),G=un([g,v],D)}return{rotation:G,targetClientRect:k,containerClientRect:B,beforeDirection:O,direction:D,target:t,left:c,top:f,right:p,bottom:h,pos1:g,pos2:v,pos3:m,pos4:b,width:E,height:M,rootMatrix:y,beforeMatrix:x,offsetMatrix:_,targetMatrix:S,matrix:w,targetTransform:R,is3d:P,beforeOrigin:z,origin:d,transformOrigin:C}}function fn(t,e){var n=t.getBoundingClientRect(),r=n.left,i=n.width,o=n.top,a=n.bottom,s={left:r,right:n.right,top:o,bottom:a,width:i,height:n.height};return e&&(s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function pn(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function hn(t,e){return[Vt(e,t[0]),Vt(e,t[1]),Vt(e,t[2]),Vt(e,t[3])]}function dn(t){var e=t.left,n=t.top;return hn([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function gn(t){return Math.round(t%1==-.5?t-1:t)}function vn(t,e){return e?Math.round(t/e)*e:t}function mn(n,r){return n.forEach(function(t,e){n[e]=vn(n[e],r)}),n}function bn(t,e){t[e]&&(t[e].unset(),t[e]=null)}function yn(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function _n(t,e,n){var r=e.datas;return r.datas||(r.datas={}),Re({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:r.datas})}function xn(t,e,n){return t.triggerEvent(e,n)}function wn(t,e){return window.getComputedStyle(t,e)}function Sn(t,n){var r={},i={};return t.filter(function(e){var t=e.name;if(r[t]||!n.some(function(t){return e[t]}))return!1;if(e.ableGroup){if(i[e.ableGroup])return!1;i[e.ableGroup]=!0}return r[t]=!0})}function En(t,e,n){return t*(e?n:1/n)}function Mn(t,e,n){return t*(e?1/n:n)}function Cn(t,e){return t===e||null==t&&null==e}function Dn(t){return t.reduce(function(t,e){return t.concat(e)},[])}function On(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function Pn(t,e){var n,r=t.is3d?4:3;return n=Zt(Xt(t.rootMatrix,4),qt([e.distX,e.distY],r),r),e.distX=n[0],e.distY=n[1],e}function Rn(n,t,e,r,i,o,a){var s="Start"===i;if(s&&-1<r.indexOf("Control")&&!o.isRequest&&n.areaElement===o.inputEvent.target)return!1;var l=""+e+r+i,u=""+e+r+"Condition",c="End"===i,f=-1<i.indexOf("After");s&&n.updateRect(i,!0,!1),""!==i||f||Pn(n.state,o);var p=-1<r.indexOf("Group"),h=n[t].filter(function(t){return t[l]}),d=h.filter(function(t){var e=s&&t[u];return!(e&&!e(o,n))&&t[l](n,o)}),g=d.length;if(s){if(h.length&&!g)return n.state.dragger=null,n.moveables&&n.moveables.forEach(function(t){t.state.dragger=null}),!1;!function(t,e,n){var r=_n(t,n,{isPinch:!!n.isPinch}),i=e?"Group":"";e&&(r.targets=t.props.targets),xn(t,"onRender"+i+"Start",r)}(n,p,o)}else c?function(t,e,n){var r=_n(t,n,{isPinch:!!n.sPinch,isDrag:n.isDrag}),i=e?"Group":"";e&&(r.targets=t.props.targets),xn(t,"onRender"+i+"End",r)}(n,p,o):g&&function(t,e,n){var r=_n(t,n,{isPinch:!!n.isPinch}),i=e?"Group":"";e&&(r.targets=t.props.targets),xn(t,"onRender"+i,r)}(n,p,o);c&&(n.state.dragger=null),!s&&g&&(d.some(function(t){return t.updateRect})&&!p?n.updateRect(i,!1,!1):n.updateRect(i,!0,!1)),(!s&&g||c&&!g)&&!a&&n.forceUpdate(),s||c||f||!g||Rn(n,t,e,r,i+"After",o)}function zn(r,t,i,o){var a={container:window,pinchThreshold:r.props.pinchThreshold};return["drag","pinch"].forEach(function(n){["Start","","End"].forEach(function(e){a[""+n+e.toLowerCase()]=function(t){return Rn(r,i,n,o,e,t)}})}),new _e(t,a)}var kn,Bn,Gn=(kn="div",Bn=ae(Ne),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className"]);return ot(kn,le({ref:xt(this,"element"),className:n+" "+Bn.className},r))},e.prototype.componentDidMount=function(){this.injectResult=Bn.inject(this.element)},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(dt));function An(t,e,n,r){var i=It(e,n),o=t?vn(i/Math.PI*180,15)%180:-1;return ot("div",{key:"line"+r,className:qe("line","direction",t),"data-rotation":o,"data-direction":t,style:an(e,n,i)})}var Nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={conatainer:null,target:null,beforeMatrix:We(),matrix:We(),targetMatrix:We(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],targetClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},rotation:0},t.targetAbles=[],t.controlAbles=[],t}Pe(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=this.props,n=e.edge,r=e.parentPosition,i=e.className,o=e.target,a=e.zoom;this.checkUpdate();var s=r||{left:0,top:0},l=s.left,u=s.top,c=this.state,f=c.left,p=c.top,h=c.pos1,d=c.pos2,g=c.pos3,v=c.pos4,m=c.target,b=c.direction,y=t.targets,_=(y&&y.length||o)&&m;return ot(Gn,{ref:xt(this,"controlBox"),className:qe("control-box",-1===b?"reverse":"")+" "+i,style:{position:"absolute",display:_?"block":"none",transform:"translate("+(f-l)+"px, "+(p-u)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}},this.renderAbles(),An(n?"n":"",h,d,0),An(n?"e":"",d,v,1),An(n?"w":"",h,g,2),An(n?"s":"",g,v,3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0)},n.componentDidUpdate=function(t){this.updateEvent(t)},n.componentWillUnmount=function(){bn(this,"targetDragger"),bn(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Ae)},n.dragStart=function(t){this.targetDragger&&this.targetDragger.onDragStart(t)},n.isInside=function(t,e){var n=this.state,r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,s=n.target,l=n.targetClientRect;return!!s&&function(t,e,n,r,i){var o=[yn(t,e,n),yn(t,n,i),yn(t,i,e)],a=[yn(t,n,i),yn(t,i,r),yn(t,r,n)];return!!(o.every(function(t){return 0<=t})||o.every(function(t){return t<=0})||a.every(function(t){return 0<=t})||a.every(function(t){return t<=0}))}([t-l.left,e-l.top],r,i,a,o)},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),l=i?i.props.rootContainer:r.rootContainer;this.updateState(cn(a,s,s,l||s,e?o:void 0),!i&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,i=this.props.target,o=t.target,a=this.props.dragArea,s=t.dragArea,l=!a&&o!==i,u=!n&&this.targetDragger||l||s!==a;u&&(bn(this,"targetDragger"),this.updateState({dragger:null})),r||bn(this,"controlDragger"),i&&n&&!this.targetDragger&&(this.targetDragger=zn(this,a?this.areaElement:i,"targetAbles","")),!this.controlDragger&&r&&(this.controlDragger=zn(this,e,"controlAbles","Control")),u&&this.unsetAbles()},n.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=dn(this.state),n=e[0],r=e[1],i=e[2],o=e[3],a=en(e),s=t.width,l=t.height,u=a.width,c=a.height,f=a.left,p=a.top,h=[t.left,t.top],d=Vt(h,t.origin);return{width:u,height:c,left:f,top:p,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:l,beforeOrigin:Vt(h,t.beforeOrigin),origin:d}},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,l=a.request(this),u=l.isControl?"controlAbles":"targetAbles",c=(o?"Group":"")+(l.isControl?"Control":""),f={request:function(t){return Rn(s,u,"drag",c,"",Re({},l.request(t),{isRequest:!0}),n),this},requestEnd:function(){return Rn(s,u,"drag",c,"End",Re({},l.requestEnd(),{isRequest:!0})),this}};return Rn(s,u,"drag",c,"Start",Re({},l.requestStart(t),{isRequest:!0}),n),t.isInstant?f.request(t).requestEnd():f},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||e)&&(this.updateAbles(),Cn(o,e)&&Cn(a,n)||(this.updateState({target:e,container:n}),r||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=t.filter(function(t){return t&&n[t.name]}),i="drag"+e+"ControlStart",o=Sn(r,["drag"+e+"Start","pinch"+e+"Start"]),a=Sn(r,[i]);this.targetAbles=o,this.controlAbles=a},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},n.renderAbles=function(){var e=this,n=this.props,t=n.ables.filter(function(t){return t&&n[t.name]}),r={createElement:ot};return Dn(Sn(t,["render"]).map(function(t){return(0,t.render)(e,r)}))},t.defaultProps={target:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1},t}(gt);function Tn(t){return It([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}var jn={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,pinchThreshold:Number},pinchStart:function(n,t){var r=t.datas,i=t.clientX,o=t.clientY,e=t.touches,a=t.inputEvent,s=t.targets,l=n.props,u=l.pinchable,c=l.ables;if(!u)return!1;var f="onPinch"+(s?"Group":"")+"Start",p="drag"+(s?"Group":"")+"ControlStart",h=(!0===u?n.controlAbles:c.filter(function(t){return-1<u.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[p]}),d=_n(n,t,{});s&&(d.targets=s);var g=xn(n,f,d);r.isPinch=!1!==g,r.ables=h;var v=r.isPinch;if(!v)return!1;var m=Tn(e);return h.forEach(function(t){r[t.name+"Datas"]={};var e={datas:r[t.name+"Datas"],clientX:i,clientY:o,inputEvent:a,parentRotate:m,pinchFlag:!0};t[p](n,e)}),n.state.snapRenderInfo={direction:[0,0]},v},pinch:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,o=t.scale,a=t.distance,s=t.touches,l=t.inputEvent,u=t.targets;if(n.isPinch){var c=Tn(s),f=a*(1-1/o),p=_n(e,t,{});u&&(p.targets=u),xn(e,"onPinch"+(u?"Group":""),p);var h=n.ables,d="drag"+(u?"Group":"")+"Control";return h.forEach(function(t){t[d](e,{clientX:r,clientY:i,datas:n[t.name+"Datas"],inputEvent:l,parentDistance:f,parentRotate:c,pinchFlag:!0})}),p}},pinchEnd:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,o=t.isPinch,a=t.inputEvent,s=t.targets;if(n.isPinch){var l="onPinch"+(s?"Group":"")+"End",u=_n(e,t,{isDrag:o});s&&(u.targets=s),xn(e,l,u);var c=n.ables,f="drag"+(s?"Group":"")+"ControlEnd";return c.forEach(function(t){t[f](e,{clientX:r,clientY:i,isDrag:o,datas:n[t.name+"Datas"],inputEvent:a,pinchFlag:!0})}),o}},pinchGroupStart:function(t,e){return this.pinchStart(t,Re({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Re({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Re({},e,{targets:t.props.targets}))}};function Yn(t,o,a,e,s,l){var n=o.name,u=e[n]||(e[n]=[]),c=!!a.match(/End$/g);return t.moveables.map(function(t,e){var n=u[e]||(u[e]={}),r=function(t){return typeof t===m}(s)?s(t,n):s,i=o[a](t,Re({},r,{datas:n,parentFlag:!0}));return i&&l&&l(t,n,i,e),c&&(t.state.dragger=null),i})}function Xn(t,e){var n=e.datas,r=t.state,i=r.matrix,o=r.beforeMatrix,a=r.is3d,s=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,h=a?4:3;n.is3d=a,n.matrix=i,n.targetMatrix=f,n.beforeMatrix=o,n.offsetMatrix=c,n.transformOrigin=p,n.inverseMatrix=Xt(i,h),n.inverseBeforeMatrix=Xt(o,h),n.absoluteOrigin=qt(Vt([s,l],u),h),n.startDragBeforeDist=Zt(n.inverseBeforeMatrix,n.absoluteOrigin,h),n.startDragDist=Zt(n.inverseMatrix,n.absoluteOrigin,h)}function Fn(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=s?4:3;return $t(Zt(e?o:a,Vt(n.absoluteOrigin,[r,i]),c),e?l:u)}function In(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function qn(e,t){return In(t).map(function(t){return e[t]})}function Wn(t,e){var n=qn(t,e);return[Kt.apply(void 0,n.map(function(t){return t[0]})),Kt.apply(void 0,n.map(function(t){return t[1]}))]}function Ln(t,e){var n=t[0],r=t[1],i=t[2];return Wn([t[3],i,r,n],e)}function Hn(t,e){return Ln([t[0],t[1],t[2],t[3]],e)}function Un(t,e,n,r,i,o){var a=Ln(tn(e,n,r,i),o);return[t[0]-a[0],t[1]-a[1]]}function Kn(t,e,n,r){return Ht(t,Le(e,r,n),r)}function Vn(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d?4:3;return Kn(r,Ht(t.targetMatrix,ne(e,i),i),n,i)}function $n(t,e,n,r,i,o){var a=t.props.groupable,s=t.state,l=s.transformOrigin,u=s.targetMatrix,c=s.offsetMatrix,f=s.is3d,p=s.width,h=s.height,d=s.left,g=s.top,v=f?4:3,m=a?d:0,b=a?g:0;return $t(Un(i,Kn(c,u,function(t,s,l,u,c,f){return void 0===u&&(u=s),void 0===c&&(c=l),void 0===f&&(f=[0,0]),t?t.map(function(t,e){var n=T(t),r=n.value,i=n.unit,o=e?c:u,a=e?l:s;return"%"===t||isNaN(r)?a*(o?f[e]/o:0):"%"!==i?r:a*r/100}):f}(o,e,n,p,h,l),v),e,n,v,r),[m,b])}function Zn(t,e){return Hn(dn(t.state),e)}function Jn(t){return t.isRequest?t.parentDirection:I(t.inputEvent.target,qe("direction"))}function Qn(t,e,n,r,i){var o=function(t){var e=t.state,n=e.guidelines,r=e.containerClientRect,i=r.scrollHeight,o=r.scrollWidth,a=t.props,s=a.snapHorizontal,l=void 0===s||s,u=a.snapVertical,c=void 0===u||u,f=a.verticalGuidelines,p=a.horizontalGuidelines,h=n.slice();return l&&p&&p.forEach(function(t){h.push({type:"horizontal",pos:[0,vn(t,.1)],size:o})}),c&&f&&f.forEach(function(t){h.push({type:"vertical",pos:[vn(t,.1),0],size:i})}),h}(t),a=t.props,s=a.snapElement,l=void 0===s||s,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!X(i))return i}return t[n]}(i,a.snapThreshold,5);return{vertical:er(o,"vertical",e,u,r,l),horizontal:er(o,"horizontal",n,u,r,l)}}function tr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:a}}function er(e,a,t,s,l,u){if(!e||!e.length)return{isSnap:!1,posInfos:[]};var i="vertical"===a?0:1,n=t.map(function(r){var t=e.map(function(t){var e=t.pos,n=r-e[i];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist,r=e.type,i=e.center,o=e.element;return!(!u&&o||!l&&i||r!==a||s<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist});return{isSnap:0<n.length,posInfos:n}}function nr(t,l){return t.slice().sort(function(t,e){var n=t.sign[l],r=e.sign[l],i=t.offset[l],o=e.offset[l],a=Math.abs(i),s=Math.abs(o);return n?r?t.isBound&&e.isBound?s-a:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?a-s:t.isSnap?-1:e.isSnap?1:a<je?1:s<je?-1:a-s:-1:1})[0]}function rr(t,e){var n=Kt(e[0][0],e[1][0]),r=Kt(e[0][1],e[1][1]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function ir(t,e){var n,r,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];if(a)if(s){n=s/a*(t[0]-i[0])+i[1],r=t[1]}else n=i[1],r=t[1];else n=i[0],r=t[0];return n-r}function or(t,n,r){void 0===r&&(r=je);var i=ir(t[0],n)<=0;return t.slice(1).every(function(t){var e=ir(t,n);return e<=0==i||Math.abs(e)<=r})}function ar(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function sr(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1],l=o[1]-i[1],u=o[0]-i[0],c=s[1]-a[1];if(s[0]-a[0]){if(!c&&l){var f=l/u;return ar(u?(a[1]-i[1])/f+i[0]:i[0],a[0],s[0],n,r)}}else if(u)return ar(l?l/u*(a[0]-i[0])+i[1]:i[1],a[1],s[1],n,r);return{isBound:!1,offset:0}}function lr(c,t,f,p){return t.map(function(t){var n=t[0],e=t[1],r=t[2],i=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,l=[[i,o],[i,o+s]],u=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=rr(n,e),h=p.horizontal,d=p.vertical;if(or([n,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=sr(e,u,d),v=sr(e,f,d),m=sr(e,l,h),b=sr(e,c,h),y=g.isBound&&v.isBound,_=g.isBound||v.isBound,x=m.isBound&&b.isBound,w=m.isBound||b.isBound,S=On(g.offset,v.offset),E=On(m.offset,b.offset),M=[0,0],C=!1;return{isAllBound:Math.abs(E)<Math.abs(S)?(M=[S,0],C=_,y):(M=[0,E],C=w,x),isVerticalBound:_,isHorizontalBound:w,isBound:C,offset:M}}(c,[e,r],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,l=i.isHorizontalBound,u=Fn({datas:p,distX:a[0],distY:a[1]}).map(function(t,e){return t*(n[e]?2/n[e]:0)});return{sign:n,isBound:o,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:u}})}function ur(t,e,n){var r,i=lr(t,cr(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),Wn(e,[0,0]),n),o=nr(i,0),a=nr(i,1),s=0,l=0,u=o.isVerticalBound||a.isVerticalBound,c=o.isHorizontalBound||a.isHorizontalBound;return(u||c)&&(s=(r=function(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.beforeMatrix,a=n.matrix,s=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,f=s?4:3;return $t(Zt(e?o:a,Vt(e?l:u,[r,i]),f),c)}({datas:n,distX:-o.offset[0],distY:-a.offset[1]}))[0],l=r[1]),{vertical:{isBound:u,offset:s},horizontal:{isBound:c,offset:l}}}function cr(i,t,e){return function(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(t,e).map(function(t){var e=t[0],n=t[1],r=t[2];return[e,Wn(i,n),Wn(i,r)]})}function fr(t,e,n,r){var i=r?t.map(function(t){return Jt(t,r)}):t,o=[n].concat(e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,e){return!or(o,t)})}function pr(t,e,n,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,l=o.top,u=o.width,c=o.height,f=s-r[0],p=s+u-r[0],h=l-r[1],d=l+c-r[1],g=[[f,h],[p,h],[f,d],[p,d]],v=Wn(n,[0,0]);if(!fr(n,g,v,0))return[];var m=[],b=g.map(function(t){return[on(t),It([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var i=It([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&o<=e}).map(function(t){var e=t[0],n=t[1],r=Math.acos(e?o/e:0);return[a+(n+r)-i,a+(n-r)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!fr(e,g,v,t)}).map(function(t){return vn(180*t/Math.PI,je)}))}),m}function hr(t,e,n){var r=t.props.bounds||{},i=r.left,o=void 0===i?-1/0:i,a=r.top,s=void 0===a?-1/0:a,l=r.right,u=void 0===l?1/0:l,c=r.bottom,f={left:o,top:s,right:u,bottom:void 0===c?1/0:c};return{vertical:dr(f,e,!0),horizontal:dr(f,n,!1)}}function dr(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return o<r+1?{isBound:!0,offset:o-r,pos:r}:i-1<a?{isBound:!0,offset:a-i,pos:i}:{isBound:!1,offset:0,pos:0}}function gr(t,e,n){return(n?t.map(function(t){return Jt(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function vr(t,i,o,e,n){var r=t.props.bounds,a=n*Math.PI/180;if(!r)return[];var s=r.left,l=void 0===s?-1/0:s,u=r.top,c=void 0===u?-1/0:u,f=r.right,p=void 0===f?1/0:f,h=r.bottom,d=void 0===h?1/0:h,g=l-e[0],v=p-e[0],m=c-e[1],b=d-e[1],y={left:g,top:m,right:v,bottom:b};if(!gr(o,y,0))return[];var _=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,e){var n=t[0],r=t[1];o.forEach(function(t){var e=It([0,0],t);_.push.apply(_,function(n,e,r){var t=on(n),i=Math.sqrt(t*t-e*e)||0;return[i,-i].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return It([0,0],r?[t,e]:[e,t])})}(t,n,r).map(function(t){return a+t-e}).filter(function(t){return!gr(i,y,t)}).map(function(t){return vn(180*t/Math.PI,je)}))})}),_}function mr(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.props,r=n.horizontalGuidelines,i=void 0===r?[]:r,o=n.verticalGuidelines,a=void 0===o?[]:o,s=n.elementGuidelines,l=void 0===s?[]:s,u=n.bounds,c=n.snapCenter;if(u||i.length||a.length||l.length){var f=e.containerClientRect,p=f.top,h=f.left,d=e.targetClientRect,g=d.top,v=d.left,m=dn(e),b=Math.min.apply(Math,m.map(function(t){return t[0]})),y=Math.min.apply(Math,m.map(function(t){return t[1]})),_=gn(b-(v-h)),x=gn(y-(g-p)),w=[];l.forEach(function(t){var e=t.getBoundingClientRect(),n=e.top,r=e.left,i=e.width,o=e.height,a=n-p,s=a+o,l=r-h,u=l+i;w.push({type:"vertical",element:t,pos:[vn(l+_,.1),a],size:o}),w.push({type:"vertical",element:t,pos:[vn(u+_,.1),a],size:o}),w.push({type:"horizontal",element:t,pos:[l,vn(a+x,.1)],size:i}),w.push({type:"horizontal",element:t,pos:[l,vn(s+x,.1)],size:i}),c&&(w.push({type:"vertical",element:t,pos:[vn((l+u)/2+_,.1),a],size:o,center:!0}),w.push({type:"horizontal",element:t,pos:[l,vn((a+s)/2+x,.1)],size:i,center:!0}))}),e.guidelines=w,e.enableSnap=!0}}}function br(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.verticalGuidelines,a=n.horizontalGuidelines,s=t.state,l=s.guidelines,u=s.enableSnap;return!(!r||!u||e&&!0!==r&&r.indexOf(e)<0)&&!!(i||l&&l.length||o&&o.length||a&&a.length)}function yr(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];Math.abs(i)<je&&(i=0);Math.abs(o)<je&&(o=0);if(!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(r){var l=a*(e[0]+n)+s;return[n,l-e[1]]}return[(e[1]+n-s)/a-e[0],n]}}(t,e,-n,r);if(!o)return[0,0];var a=Fn({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function _r(t,e,n,r,i,o){var a=tn(t,e,n,o?4:3);return hn(a,$t(r,Ln(a,i)))}function xr(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function wr(t,e){return t.isBound?t.offset:e.isSnap?tr(e).offset:0}function Sr(t,e,n){var r=function(t,e,n){var r=t.props.bounds||{},i=r.left,o=void 0===i?-1/0:i,a=r.top,s=void 0===a?-1/0:a,l=r.right,u=void 0===l?1/0:l,c=r.bottom,f=void 0===c?1/0:c,p=n[0],h=n[1],d=$t(n,e),g=d[0],v=d[1],m=0<v,b=0<g,y={isBound:!1,offset:0,pos:0},_={isBound:!1,offset:0,pos:0};if(0===g&&0===v)return{vertical:y,horizontal:_};if(0===g)m?f<h&&(_.pos=f,_.offset=h-f):h<s&&(_.pos=s,_.offset=h-s);else if(0===v)b?u<p&&(y.pos=u,y.offset=p-u):p<o&&(y.pos=o,y.offset=p-o);else{var x=v/g,w=n[1]-x*p,S=0,E=0,M=!1;b&&u<=p?(S=x*u+w,E=u,M=!0):!b&&p<=o?(S=x*o+w,E=o,M=!0):m&&f<=h?(E=((S=f)-w)/x,M=!0):!m&&h<=s&&(E=((S=s)-w)/x,M=!0),M&&(y.isBound=!0,y.pos=E,y.offset=p-E,_.isBound=!0,_.pos=S,_.offset=h-S)}return{vertical:y,horizontal:_}}(t,e,n),i=r.horizontal,o=r.vertical,a=function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=$t(n,e),l=s[0],u=s[1],c=0<u,f=0<l,p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===l&&0===u)return{vertical:p,horizontal:h};var d=Qn(t,l?[r]:[],u?[i]:[]),g=d.vertical,v=d.horizontal;g.posInfos.filter(function(t){var e=t.pos;return f?o<=e:e<=o}),v.posInfos.filter(function(t){var e=t.pos;return c?a<=e:e<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m=tr(g),b=m.isSnap,y=m.guideline,_=tr(v),x=_.isSnap,w=_.guideline,S=x?w.pos[1]:0,E=b?y.pos[0]:0;if(0===l)x&&(h.isSnap=!0,h.pos=w.pos[1],h.offset=i-h.pos);else if(0===u)b&&(p.isSnap=!0,p.pos=E,p.offset=r-E);else{var M=u/l,C=n[1]-M*r,D=0,O=0,P=!1;b?(D=M*(O=E)+C,P=!0):x&&(O=((D=S)-C)/M,P=!0),P&&(p.isSnap=!0,p.pos=O,p.offset=r-O,h.isSnap=!0,h.pos=D,h.offset=i-D)}return{vertical:p,horizontal:h}}(t,e,n),s=a.horizontal,l=a.vertical,u=xr(i,s),c=xr(o,l),f=Math.abs(u),p=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:s.isSnap,offset:u,dist:f},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:p}}}function Er(t,e,n){void 0===n&&(n=e);var r=hr(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),i=r.horizontal,o=r.vertical,a=Qn(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),s=a.horizontal,l=a.vertical,u=wr(i,s),c=wr(o,l),f=Math.abs(u),p=Math.abs(c);return{horizontal:{isBound:i.isBound,isSnap:s.isSnap,offset:u,dist:f},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:c,dist:p}}}function Mr(t,e,n,r,i){var o=function(t,e){var n=[],r=[-t[0],-t[1]];return t[0]&&t[1]?(n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),e&&n.push([r,t])):t[0]?e?n.push([r,[r[0],-1]],[r,[r[0],1]],[r,[t[0],-1]],[r,t],[r,[t[0],1]]):n.push([[r[0],-1],[t[0],-1]],[[r[0],0],[t[0],0]],[[r[0],1],[t[0],1]]):t[1]?e?n.push([r,[-1,r[1]]],[r,[1,r[1]]],[r,[-1,t[1]]],[r,[1,t[1]]],[r,t]):n.push([[-1,r[1]],[-1,t[1]]],[[0,r[1]],[0,t[1]]],[[1,r[1]],[1,t[1]]]):n.push([r,[1,0]],[r,[-1,0]],[r,[0,-1]],[r,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),n}(n,r),a=cr(e,n,r),s=function(y,_,t,x,w){return t.map(function(t){var e=t[0],n=t[1],r=Wn(_,e),i=Wn(_,n),o=x?Sr(y,r,i):Er(y,[i]),a=o.horizontal,s=a.dist,l=a.offset,u=a.isBound,c=a.isSnap,f=o.vertical,p=f.dist,h=f.offset,d=f.isBound,g=f.isSnap,v=$t(n,e);if(!h&&!l)return{isBound:d||u,isSnap:g||c,sign:v,offset:[0,0]};var m=s<p,b=yr(r,i,m?h:l,m,w).map(function(t,e){return t*(v[e]?2/v[e]:0)});return{sign:v,isBound:m?d:u,isSnap:m?g:c,offset:b}})}(t,e,o,r,i).concat(lr(t,a,Wn(e,[0,0]),i)),l=nr(s,0),u=nr(s,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function Cr(t,e,n,r,i,o,a,s,l,u,c){for(var f=dn(t.state),p=t.props.keepRatio,h=0,d=0,g=0;g<2;++g){var v=Mr(t,e(h,d),o,p,c),m=v.width,b=v.height,y=m.isBound,_=b.isBound,x=m.offset,w=b.offset;if(1===g&&(y||(x=0),_||(w=0)),0===g&&l&&!y&&!_)return[0,0];if(p){var S=Math.abs(x)*(r?1/r:1),E=Math.abs(w)*(i?1/i:1);(y&&_?S<E:_||!y&&S<E)?x=r*w/i:w=i*x/r}return[h+=x,d+=w]}if(o[0]&&o[1]){var M=function(t,a,s,l,e,u,c){var f=[-e[0],-e[1]],n=t.props.bounds,p=1/0,h=1/0;if(n){var r=[[e[0],-e[1]],[-e[0],e[1]]],i=n.left,d=void 0===i?-1/0:i,o=n.top,g=void 0===o?-1/0:o,v=n.right,m=void 0===v?1/0:v,b=n.bottom,y=void 0===b?1/0:b;r.forEach(function(t){var e=t[0]!==f[0],n=t[1]!==f[1],r=Wn(l,t);if(n){var i=yr(u,r,(u[1]<r[1]?y:g)-r[1],!1,c)[1];isNaN(i)||(h=s+i)}if(e){var o=yr(u,r,(u[0]<r[0]?m:d)-r[0],!0,c)[0];isNaN(o)||(p=a+o)}})}return{maxWidth:p,maxHeight:h}}(t,r,i,f,o,s,c),C=M.maxWidth,D=M.maxHeight,O=function(t,e,n,r,i,o,a,s){var l=Er(t,[Wn(e,a)]),u=l.horizontal.offset,c=l.vertical.offset;if(c||u){var f=Fn({datas:s,distX:-c,distY:-u}),p=f[0],h=f[1];return[Math.min(i||1/0,n+a[0]*p)-n,Math.min(o||1/0,r+a[1]*h)-r]}return[0,0]}(t,e(h,d),r+h,i+d,C,D,o,c);h+=x=O[0],d+=w=O[1]}return[h,d]}function Dr(t,e,n,r){if(!br(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,l=r*Math.PI/180,u=[i,o,a,s].map(function(t){return $t(t,n)}),c=u.map(function(t){return Jt(t,l)}),f=vr(t,u,c,n,r).concat(pr(t,u,c,n,r));return f.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),f.length?f[0]:r}function Or(t,e,n,r,i){if(!br(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=hn(i.absolutePoses,[e,n]),a=en(o),s=a.left,l=a.right,u=a.top,c=a.bottom,f=[[s,u],[l,u],[s,c],[l,c]];t.props.snapCenter&&f.push([(s+l)/2,(u+c)/2]);var p=Er(t,f,o),h=p.vertical,d=p.horizontal,g=ur(t,o,i),v=g.vertical,m=g.horizontal,b=h.isSnap,y=d.isSnap,_=h.isBound||v.isBound,x=d.isBound||m.isBound,w=function(t,e,n,r,i){var o=e[0],a=e[1],s=n[0],l=n[1],u=r[0],c=r[1],f=i[0],p=i[1],h=-f,d=-p;if(t&&o&&a){d=h=0;var g=[];if(s&&l?g.push([0,p],[f,0]):s?g.push([f,0]):l?g.push([0,p]):u&&c?g.push([0,p],[f,0]):u?g.push([f,0]):c&&g.push([0,p]),g.length){g.sort(function(t,e){return on($t([o,a],t))-on($t([o,a],e))});var v=g[0];if(v[0]&&Math.abs(o)>je)h=-v[0],d=a*Math.abs(o+h)/Math.abs(o)-a;else if(v[1]&&Math.abs(a)>je){var m=a;d=-v[1],h=o*Math.abs(a+d)/Math.abs(m)-o}if(t&&l&&s)if(Math.abs(h)>je&&Math.abs(h)<Math.abs(f))h*=b=Math.abs(f)/Math.abs(h),d*=b;else if(Math.abs(d)>je&&Math.abs(d)<Math.abs(p)){var b;h*=b=Math.abs(p)/Math.abs(d),d*=b}else h=On(-f,h),d=On(-p,d)}}else h=o||s?-f:0,d=a||l?-p:0;return[h,d]}(r,[e,n],[_,x],[b,y],[On(h.offset,v.offset),On(d.offset,m.offset)]);return[{isBound:_,isSnap:b,offset:w[0]},{isBound:x,isSnap:y,offset:w[1]}]}function Pr(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}function Rr(t,e,n,r){var i=t-n,o=i<0?i+e:r;return{size:(i<0?0:i)-o,pos:o}}function zr(t,a,n,s){var l=[],e=function(r,i){var o=[],a={};return r.forEach(function(t,e){var n=i(t,e,r);a[n]||(a[n]=[],o.push(a[n])),a[n].push(t)}),o}(t.filter(function(t){return t.element}),function(t){var r=t.element,e=t.pos,i=(t.size,e[s]),n=(Math.min(0,i-a)<0?-1:1)+"_"+e[s?0:1],o=function(t,e,n){var r=j(t,e);return-1<r?t[r]:n}(l,function(t){var e=t[0],n=t[1];return r===e&&i===n});return o?o[2]:(l.push([r,i,n]),n)});return e.forEach(function(t){t.sort(function(t,e){return Rr(t.pos[s],t.size,a,n).size-Rr(e.pos[s],t.size,a,n).size||t.pos[s?0:1]-e.pos[s?0:1]})}),e}function kr(t,e,p,h,d,g,v,m,b,y,_){var x=e[0],w=e[1],S=e[2],E=e[3];return Dn(t.map(function(t,c){var f=!0;return t.map(function(t,e){var n,r=t.pos,i=t.size,o=Rr(r[y],i,h,d),a=o.pos,s=o.size;if(s<v)return null;var l=f;f=!1;var u=m&&l?parseFloat(s.toFixed(b)):0;return _.createElement("div",{className:qe("line",x,"guideline","dashed"),"data-size":0<u?u:"",key:x+"LinkGuidline"+c+"-"+e,style:(n={},n[w]=p+a+"px",n[S]=-g+r[y?0:1]+"px",n[E]=s+"px",n)})})}))}function Br(t,e,r,i,o,a){var s=e[0],l=e[1],u=e[2],c=e[3];return t.map(function(t,e){var n;return a.createElement("div",{className:qe("line",s,"guideline","target","bold"),key:s+"TargetGuidline"+e,style:(n={},n[l]=r+"px",n[u]=-i+t+"px",n[c]=o+"px",n)})})}function Gr(t,e,a,s,l,u){var c=e[0],f=e[1],p=e[2],h=e[3];return t.map(function(t,e){var n,r=t.pos,i=t.size,o=t.element;return u.createElement("div",{className:qe("line",c,"guideline",o?"bold":""),key:c+"Guidline"+e,style:(n={},n[f]=-a+r[l]+"px",n[p]=-s+r[l?0:1]+"px",n[h]=i+"px",n)})})}function Ar(t,e,n,r,i){var o=hr(t,e,n),a=o.vertical,s=a.isBound,l=a.pos,u=o.horizontal,c=u.isBound,f=u.pos;s&&r.indexOf(l)<0&&r.push(l),c&&i.indexOf(f)<0&&i.push(f);var p=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,l=Wn([r,i,o,a],[0,0]),u=e.left,c=e.top,f=e.width,p=e.height,h=[[u,c],[u,c+p]],d=[[u,c],[u+f,c]],g=[[u+f,c],[u+f,c+p]],v=[[u,c+p],[u+f,c+p]],m=[],b=[],y={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var e=rr(l,t),n=e.horizontal,r=e.vertical,i=sr(t,d,r,1),o=sr(t,v,r,1),a=sr(t,h,n,1),s=sr(t,g,n,1);i.isBound&&!y.top&&(m.push(c),y.top=!0),o.isBound&&!y.bottom&&(m.push(c+p),y.bottom=!0),a.isBound&&!y.left&&(b.push(u),y.left=!0),s.isBound&&!y.right&&(b.push(u+f),y.right=!0)}),{horizontal:m,vertical:b}}(t),h=p.vertical,d=p.horizontal;r.push.apply(r,h.filter(function(t){return r.indexOf(t)<0})),i.push.apply(i,d.filter(function(t){return i.indexOf(t)<0}))}var Nr={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object},render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=n.targetClientRect,f=n.containerClientRect,p=c.left-f.left,h=c.top-f.top,d=Math.min(o[0],a[0],s[0],l[0]),g=Math.min(o[1],a[1],s[1],l[1]);if(!u||!br(t,""))return[];var v=t.props,m=v.snapThreshold,b=void 0===m?5:m,y=v.snapDigit,_=void 0===y?0:y,x=v.isDisplaySnapDigit,w=void 0===x||x,S=dn(t.state),E=en(S),M=E.width,C=E.height,D=E.top,O=E.left,P=E.bottom,R=E.right,z=[],k=[],B=[],G=[],A=[];if(u.direction&&A.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return Wn(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return Wn(e,t)}):1<(r=qn(e,n)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Qn(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),!0,1)}(t,S,u.direction)),u.snap){var N=en(S);u.center&&(N.middle=(N.top+N.bottom)/2,N.center=(N.left+N.right)/2),A.push(function(t,e,n,r){var i=t.props.snapCenter&&n,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in e}),a=a.filter(function(t){return t in e}),Qn(t,o.map(function(t){return e[t]}),a.map(function(t){return e[t]}),i,r)}(t,N,!0,1))}A.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;z.push.apply(z,e.map(function(t){return t.pos})),k.push.apply(k,n.map(function(t){return t.pos})),B.push.apply(B,Pr(e)),G.push.apply(G,Pr(n))}),Ar(t,[O,R],[D,P],z,k);var T=zr(G,p,M,0),j=zr(B,h,C,1),Y=["horizontal","left","top","width"],X=["vertical","top","left","height"];return kr(T,Y,d,p,M,r,b,w,_,0,e).concat(kr(j,X,g,h,C,i,b,w,_,1,e),Br(k,Y,d,r,M,e),Br(z,X,g,i,C,e),Gr(G,Y,i,r,0,e),Gr(B,X,r,i,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={snap:!0,center:!0},mr(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return Jn(t)||Wr(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,mr(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,mr(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},Tr={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number},render:function(t,e){var n=t.props.throttleDragRotate,r=t.state,i=r.dragInfo,o=r.beforeOrigin;if(n&&i){var a=i.dist;if(a[0]||a[1]){var s=on(a),l=It(a,[0,0]);return e.createElement("div",{className:qe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+l+"rad)"}})}}},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentDragger,o=t.state,a=o.targetTransform,s=o.target;if(o.dragger)return!1;o.dragger=i||t.targetDragger;var l=window.getComputedStyle(s);n.datas={},n.left=parseFloat(l.left||"")||0,n.top=parseFloat(l.top||"")||0,n.bottom=parseFloat(l.bottom||"")||0,n.right=parseFloat(l.right||"")||0,n.transform=a,n.startTranslate=[0,0],Xn(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,function(t,e){e.absolutePoses=dn(t.state)}(t,n);var u=_n(t,e,{set:function(t){n.startTranslate=t}});return!1!==(r||xn(t,"onDragStart",u))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.dragger=null,n.isPinch=!1),!!n.isDrag&&u},drag:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.distX,a=e.distY,s=n.isPinch,l=n.isDrag,u=n.prevDist,c=n.prevBeforeDist,f=n.transform,p=n.startTranslate;if(l){var h=t.props,d=h.parentMoveable,g=r?0:h.throttleDrag||0,v=r?0:h.throttleDragRotate||0,m=!1,b=0;if(0<v&&(o||a)){var y=vn(180*It([0,0],[o,a])/Math.PI,v),_=on([o,a]);b=y*Math.PI/180,o=_*Math.cos(b),a=_*Math.sin(b)}if(!s&&!r&&!i&&(o||a)){var x=Or(t,o,a,v,n),w=x[0],S=x[1],E=w.isSnap,M=w.isBound,C=w.offset,D=S.isSnap,O=S.isBound;m=E||D||M||O,o+=C,a+=S.offset}n.passDistX=o,n.passDistY=a;var P=Vt(Fn({datas:n,distX:o,distY:a},!0),p),R=Vt(Fn({datas:n,distX:o,distY:a},!1),p);v||m||(mn(R,g),mn(P,g));var z=$t(P,p),k=$t(R,p),B=$t(k,u),G=$t(z,c);n.prevDist=k,n.prevBeforeDist=z;var A=n.left+z[0],N=n.top+z[1],T=n.right-z[0],j=n.bottom-z[1],Y=f+" translate("+k[0]+"px, "+k[1]+"px)";if(t.state.dragInfo.dist=r?[0,0]:k,r||d||!B.every(function(t){return!t})||!G.some(function(t){return!t})){var X=_n(t,e,{transform:Y,dist:k,delta:B,translate:R,beforeDist:z,beforeDelta:G,beforeTranslate:P,left:A,top:N,right:T,bottom:j,isPinch:s});return r||xn(t,"onDrag",X),X}}},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas,i=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,n||xn(t,"onDragEnd",_n(t,e,{isDrag:i})),i},dragGroupStart:function(t,e){var n=e.datas,r=this.dragStart(t,e);if(!r)return!1;var i=Yn(t,this,"dragStart",n,e),o=xn(t,"onDragGroupStart",Re({},r,{targets:t.props.targets,events:i}));return n.isDrag=!1!==o,!!n.isDrag&&r},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),i=e.datas,o=i.passDistX,a=i.passDistY,s=Yn(t,this,"drag",n,Re({},e,{distX:o,distY:a}));if(r){var l=Re({targets:t.props.targets,events:s},r);return xn(t,"onDragGroup",l),l}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag)return this.dragEnd(t,e),Yn(t,this,"dragEnd",r,e),xn(t,"onDragGroupEnd",_n(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(t){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function jr(t,e,n,r){void 0===r&&(r=!0);var i=t.dragger.move(e,n);return Re({},r?Pn(t,i):i,{parentEvent:!0})}var Yr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={},this.move(t,e)},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Xr(t,e,n,r,i,o){var a=t.state.is3d?4:3,s=Qe(t.state.rootMatrix,i,a),l=Vt([o.left,o.top],s);e.startAbsoluteOrigin=l,e.prevDeg=It(l,[n,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function Fr(t,e,n,r,i,o){var a=n.prevDeg,s=o+r,l=Dr(t,e,n.origin,r);return[i*((n.prevDeg=l)-a),l,s]}function Ir(t,e,n,r,i,o,a,s){var l=n.prevDeg,u=n.prevSnapDeg,c=n.startDeg,f=n.loop;r<l&&270<l&&r<90?++n.loop:l<r&&l<90&&270<r&&--n.loop;var p=n.loop,h=360*f+u-c+o,d=360*p+r-c+o;n.prevDeg=d-360*p+c-o;var g=i*((d=vn(d,a))-o);return s&&(d=(g=Dr(t,e,n.origin,g))/i+o),n.prevSnapDeg=d-360*p+c-o,[i*(d-h),g,d]}function qr(t,e,n,r,i,o,a,s){return Ir(t,e,n,It(n.startAbsoluteOrigin,[i,o])/Math.PI*180,r,a,s,!0)}function Wr(t){return!!t.isRequest||I(t.inputEvent.target,qe("rotation"))}var Lr={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(t,e){var n=t.props,r=n.rotatable,i=n.rotationPosition;if(!r)return null;var o=t.state,a=o.pos1,s=o.pos2,l=o.pos3,u=o.pos4,c=o.direction,f=function(t,e,n,r,i){return"left"===t?[r,e]:"right"===t?[n,i]:"bottom"===t?[i,r]:[e,n]}(i,a,s,l,u),p=un(f,c);return e.createElement("div",{key:"rotation",className:qe("line rotation-line"),style:{transform:"translate(-50%) translate("+(f[0][0]+f[1][0])/2+"px, "+(f[0][1]+f[1][1])/2+"px) rotate("+p+"rad)"}},e.createElement("div",{className:qe("control","rotation")}))},dragControlCondition:Wr,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.pinchFlag,l=e.isRequest,u=t.state,c=u.target,f=u.left,p=u.top,h=u.origin,d=u.beforeOrigin,g=u.direction,v=u.beforeDirection,m=u.targetTransform;if(!l&&!c)return!1;var b=t.getRect();if(n.rect=b,n.transform=m,n.left=f,n.top=p,l||s||a){var y=o||0;n.beforeInfo={origin:b.beforeOrigin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0},n.afterInfo={origin:b.origin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0}}else{n.beforeInfo={origin:b.beforeOrigin},n.afterInfo={origin:b.origin};var _=fn(t.controlBox.getElement());Xr(t,n.beforeInfo,r,i,d,_),Xr(t,n.afterInfo,r,i,h,_)}n.direction=g,n.beforeDirection=v,n.startRotate=0,n.datas={};var x=_n(t,e,{set:function(t){n.startRotate=t}}),w=xn(t,"onRotateStart",x);return n.isRotate=!1!==w,t.state.snapRenderInfo={},!!n.isRotate&&x},dragControl:function(t,e){var n,r,i,o,a,s,l=e.datas,u=e.clientX,c=e.clientY,f=e.parentRotate,p=e.parentFlag,h=e.pinchFlag,d=l.direction,g=l.beforeDirection,v=l.beforeInfo,m=l.afterInfo,b=l.isRotate,y=l.startRotate,_=l.rect;if(b){var x,w,S,E,M,C,D=t.props,O=D.throttleRotate,P=void 0===O?0:O,R=D.parentMoveable;if("parentDist"in e){var z=e.parentDist;x=(n=Fr(t,_,m,z,d,y))[0],w=n[1],S=n[2],E=(r=Fr(t,_,v,z,d,y))[0],M=r[1],C=r[2]}else C=h||p?(x=(i=Ir(t,_,m,f,d,y,P))[0],w=i[1],S=i[2],E=(o=Ir(t,_,v,f,d,y,P))[0],M=o[1],o[2]):(x=(a=qr(t,_,m,d,u,c,y,P))[0],w=a[1],S=a[2],E=(s=qr(t,_,v,g,u,c,y,P))[0],M=s[1],s[2]);if(x||E||R){var k=_n(t,e,{delta:x,dist:w,rotate:S,beforeDist:M,beforeDelta:E,beforeRotate:C,transform:l.transform+" rotate("+w+"deg)",isPinch:!!h});return xn(t,"onRotate",k),k}}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,xn(t,"onRotateEnd",_n(t,e,{isDrag:r})),r)},dragGroupControlCondition:Wr,dragGroupControlStart:function(t,e){var n=e.datas,l=e.inputEvent,r=t.state,u=r.left,c=r.top,f=r.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;i.set(t.rotation);var o=Yn(t,this,"dragControlStart",n,Re({},e,{parentRotate:0}),function(t,e,n){var r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,s=Vt($t([i,o],[u,c]),$t(a,f));e.prevClient=s,n.dragStart=Tr.dragStart(t,(new Yr).dragStart(s,l))}),a=xn(t,"onRotateGroupStart",Re({},i,{targets:t.props.targets,events:o}));return n.isRotate=!1!==a,!!n.isRotate&&i},dragGroupControl:function(e,t){var p=t.inputEvent,n=t.datas;if(n.isRotate){var r=this.dragControl(e,t);if(r){var i=r.beforeDist,h=r.beforeDelta/180*Math.PI,o=Yn(e,this,"dragControl",n,Re({},t,{parentRotate:i}),function(t,e,n,r){var i=e.prevClient,o=i[0],a=i[1],s=Jt([o,a],h),l=s[0],u=s[1],c=[l-o,u-a];e.prevClient=[l,u];var f=Tr.drag(t,jr(t.state,c,p,!1));n.drag=f});e.rotation=r.beforeRotate;var a=Re({targets:e.props.targets,events:o,set:function(t){e.rotation=t}},r);return xn(e,"onRotateGroup",a),a}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate)return this.dragControlEnd(t,e),Yn(t,this,"dragControlEnd",r,e),xn(t,"onRotateGroupEnd",_n(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0;return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return n+=t.deltaRotate,{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Hr(t,e,r){var n=t.state,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,l=n.rotation,u=t.props.renderDirections,c=void 0===u?e:u,f=[i,o,a,s],p={};return c.forEach(function(t){p[t]=!0}),c.map(function(t){var e=Fe[t];if(!e||!p[t])return null;var n=(vn(l/Math.PI*180,15)+Ie[t])%180;return r.createElement("div",{className:qe("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:sn.apply(void 0,[l].concat(e.map(function(t){return f[t]})))})})}function Ur(t,e){return Hr(t,["nw","ne","sw","se","n","w","s","e"],e)}function Kr(t,e){return Hr(t,["nw","ne","sw","se"],e)}var Vr={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,i=n.edge;if(r)return i?Kr(t,e):Ur(t,e)},dragControlCondition:Jn,dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.pinchFlag,o=e.parentDirection,a=e.datas,s=o||(i?[1,1]:pn(r.target)),l=t.state,u=l.target,c=l.width,f=l.height;if(!s||!u)return!1;i||Xn(t,{datas:a}),a.datas={},a.direction=s,a.startOffsetWidth=c,a.startOffsetHeight=f,a.prevWidth=0,a.prevHeight=0,n=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(u),a.startWidth=n[0],a.startHeight=n[1],a.transformOrigin=t.props.transformOrigin,a.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var n=t.props.baseDirection,r=void 0===n?[-1,-1]:n;return[e[0]?e[0]:-1*r[0],e[1]?e[1]:-1*r[1]]}(t,s),a.fixedPosition=Zn(t,a.startDirection),a.fixedOriginalPosition=Zn(t,s);var p=_n(t,e,{direction:s,set:function(t){var e=t[0],n=t[1];a.startWidth=e,a.startHeight=n},setOrigin:function(t){a.transformOrigin=t},dragStart:Tr.dragStart(t,(new Yr).dragStart([0,0],r))});return!1!==xn(t,"onResizeStart",p)&&(a.isResize=!0,t.state.snapRenderInfo={direction:s}),!!a.isResize&&p},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,o=e.parentFlag,a=e.pinchFlag,s=e.parentDistance,l=e.parentScale,u=e.inputEvent,c=e.parentKeepRatio,f=e.dragClient,p=e.parentDist,h=n.direction,d=n.isResize,g=n.transformOrigin;if(d){var v=n.startWidth,m=n.startHeight,b=n.startOffsetWidth,y=n.startOffsetHeight,_=n.prevWidth,x=n.prevHeight,w=t.props,S=w.throttleResize,E=void 0===S?0:S,M=w.parentMoveable,C=h;h[0]||h[1]||(C=[1,1]);var D=t.props.keepRatio||c,O=C[0]||!C[1],P=O?y/b:b/y,R=D||o?h:n.startDirection,z=f||(D?n.fixedOriginalPosition:n.fixedPosition),k=0,B=0;if(p)k=p[0],B=p[1];else if(l)k=(l[0]-1)*b,B=(l[1]-1)*y;else if(a)s&&(B=(k=s)*y/b);else{var G=Fn({datas:n,distX:r,distY:i});if(k=C[0]*G[0],B=C[1]*G[1],D&&b&&y){var A=It([0,0],G),N=It([0,0],C),T=It([0,0],[b,y]),j=on([k,B]),Y=Math.cos(A-N)*j;C[0]?B=C[1]?(k=Math.cos(T)*Y,Math.sin(T)*Y):En(k=Y,O,P):k=Mn(B=Y,O,P)}}var X=C[0]||D?Math.max(b+k,je):b,F=C[1]||D?Math.max(y+B,je):y;D&&b&&y&&(F=X*y/b);var I=[0,0];if(a||(I=function(t,n,r,i,o,e,a){if(!br(t,"resizable"))return[0,0];var s=t.state,l=s.matrix,u=s.is3d;return Cr(t,function(t,e){return _r(l,n+t,r+e,o,i,u)},0,n,r,i,0,o,e,0,a)}(t,X,F,h,n.fixedOriginalPosition,p,n)),p&&(p[0]||(I[0]=0),p[1]||(I[1]=0)),D){C[0]&&C[1]&&I[0]&&I[1]&&(Math.abs(I[0])>Math.abs(I[1])?I[1]=0:I[0]=0);var q=!I[0]&&!I[1];q&&(O?X=vn(X,E):F=vn(F,E)),C[0]&&!C[1]||I[0]&&!I[1]||q&&O?F=En(X+=I[0],O,P):(!C[0]&&C[1]||!I[0]&&I[1]||q&&!O)&&(X=Mn(F+=I[1],O,P))}else X+=I[0],F+=I[1],I[0]||(X=vn(X,E)),I[1]||(F=vn(F,E));var W=[(k=(X=Math.round(X))-b)-_,(B=(F=Math.round(F))-y)-x];if(n.prevWidth=k,n.prevHeight=B,M||!W.every(function(t){return!t})){var L=!o&&a?[0,0]:$n(t,X,F,R,z,g),H=_n(t,e,{width:v+k,height:m+B,offsetWidth:X,offsetHeight:F,direction:h,dist:[k,B],delta:W,isPinch:!!a,drag:Tr.drag(t,jr(t.state,L,u,!1))});return xn(t,"onResize",H),H}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var l=t.state,u=l.width-(i+a),c=l.height-(o+s),f=3<Math.abs(u),p=3<Math.abs(c);return f&&(n.startWidth+=u,n.startOffsetWidth+=u,n.prevWidth+=u),p&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),f||p?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isResize&&(n.isResize=!1,xn(t,"onResizeEnd",_n(t,e,{isDrag:r})),r)},dragGroupControlCondition:Jn,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var l=e.direction,u=Ln(dn(a.state),l),n=Yn(a,this,"dragControlStart",t,function(t,e){var n=Ln(dn(t.state),l),r=Zt(te(-a.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),i=r[0],o=r[1];return e.originalX=i,e.originalY=o,s}),r=Re({},e,{targets:a.props.targets,events:n}),i=xn(a,"onResizeGroupStart",r);return t.isResize=!1!==i,!!t.isResize&&e},dragGroupControl:function(o,a){var t=a.datas;if(t.isResize){var e=this.dragControl(o,a);if(e){var n=e.offsetWidth,r=e.offsetHeight,i=e.dist,s=o.props.keepRatio,l=[n/(n-i[0]),r/(r-i[1])],u=t.fixedOriginalPosition,c=Yn(o,this,"dragControl",t,function(t,e){var n=Zt(te(o.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],i=n[1];return Re({},a,{parentScale:l,dragClient:Vt(u,[r,i]),parentKeepRatio:s})}),f=Re({targets:o.props.targets,events:c},e);return xn(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize)return this.dragControlEnd(t,e),Yn(t,this,"dragControlEnd",r,e),xn(t,"onResizeGroupEnd",_n(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},$r={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.edge;if(!r&&i)return o?Kr(t,e):Ur(t,e)},dragControlCondition:Jn,dragControlStart:function(t,e){var n=e.datas,r=e.pinchFlag,i=e.inputEvent,o=e.parentDirection||(r?[1,1]:pn(i.target)),a=t.state,s=a.width,l=a.height,u=a.targetTransform,c=a.target;if(!o||!c)return!1;r||Xn(t,{datas:n}),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=l,n.startScale=[1,1],n.fixedPosition=Zn(t,o);var f=_n(t,e,{direction:o,set:function(t){n.startScale=t},dragStart:Tr.dragStart(t,(new Yr).dragStart([0,0],i))});return!1!==xn(t,"onScaleStart",f)&&(n.isScale=!0,t.state.snapRenderInfo={direction:o}),!!n.isScale&&f},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,l=e.parentFlag,u=e.pinchFlag,c=e.inputEvent,f=e.dragClient,p=e.parentDist,h=n.prevDist,d=n.direction,g=n.width,v=n.height,m=n.transform,b=n.isScale,y=n.startScale;if(!b)return!1;var _=t.props,x=_.throttleScale,w=_.parentMoveable,S=t.props.keepRatio||s,E=t.state,M=d[0]||!d[1],C=g*y[0],D=v*y[1],O=M?D/C:C/D,P=1,R=1;if(o)P=o[0],R=o[1];else if(u)a&&(P=(g+a)/g,R=(v+a*v/g)/v);else{var z=Fn({datas:n,distX:r,distY:i}),k=d[0]*z[0],B=d[1]*z[1];if(S&&g&&v){var G=It([0,0],z),A=It([0,0],d),N=It([0,0],[C,D]),T=on([k,B]),j=Math.cos(G-A)*T;d[0]?B=d[1]?(k=Math.cos(N)*j,Math.sin(N)*j):En(k=j,M,O):k=Mn(B=j,M,O)}P=(g+k)/g,R=(v+B)/v}P=d[0]||S?P*y[0]:y[0],R=d[1]||S?R*y[1]:y[1],0===P&&(P=1e-9*(0<h[0]?1:-1)),0===R&&(R=1e-9*(0<h[1]?1:-1));var Y,X=[P/y[0],R/y[1]];if(t.props.groupable){[(0<=X[0]?1:-1)*d[0],(0<=X[1]?1:-1)*d[1]];var F=(E.snapRenderInfo||{}).direction;V(F)&&(F[0]||F[1])&&(E.snapRenderInfo={direction:d})}var I=[0,0];if(u||(I=function(t,n,r,e,i,o,a){var s=a.width,l=a.height;if(!br(t,"scalable"))return[0,0];var u=a.is3d,c=Cr(t,function(t,e){return _r(Vn(a,Vt(n,[t/s,e/l])),s,l,i,r,u)},Vn(a,n),s,l,r,0,i,o,0,a);return[c[0]/s,c[1]/l]}(t,X,d,0,n.fixedPosition,p,n)),S){d[0]&&d[1]&&I[0]&&I[1]&&(Math.abs(I[0])>Math.abs(I[1])?I[1]=0:I[0]=0);var q=!I[0]&&!I[1];if(q&&(M?X[0]=vn(X[0]*y[0],x)/y[0]:X[1]=vn(X[1]*y[1],x)/y[1]),d[0]&&!d[1]||I[0]&&!I[1]||q&&M){X[0]+=I[0];var W=En(g*X[0]*y[0],M,O);X[1]=W/v/y[1]}else if(!d[0]&&d[1]||!I[0]&&I[1]||q&&!M){X[1]+=I[1];var L=Mn(v*X[1]*y[1],M,O);X[0]=L/g/y[0]}}else X[0]+=I[0],X[1]+=I[1],I[0]||(X[0]=vn(X[0]*y[0],x)/y[0]),I[1]||(X[1]=vn(X[1]*y[1],x)/y[1]);0===X[0]&&(X[0]=1e-9*(0<h[0]?1:-1)),0===X[1]&&(X[1]=1e-9*(0<h[1]?1:-1));var H=[X[0]/h[0],X[1]/h[1]];if(Y=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(X,y),n.prevDist=X,P===h[0]&&R===h[1]&&!w)return!1;var U=!l&&u?[0,0]:function(t,e,n,r){var i=t.state,o=i.is3d,a=i.left,s=i.top,l=i.width,u=i.height,c=o?4:3,f=t.props.groupable,p=Vn(t.state,e),h=f?a:0,d=f?s:0;return $t(Un(r||Hn(dn(t.state),n),p,l,u,c,n),[h,d])}(t,H,d,f),K=_n(t,e,{scale:Y,direction:d,dist:X,delta:H,transform:m+" scale("+P+", "+R+")",isPinch:!!u,drag:Tr.drag(t,jr(t.state,U,c,!1))});return xn(t,"onScale",K),K},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,xn(t,"onScaleEnd",_n(t,e,{isDrag:r})),r)},dragGroupControlCondition:Jn,dragGroupControlStart:function(a,s){var t=s.datas,e=this.dragControlStart(a,s);if(!e)return!1;var l=e.direction,u=Zn(a,l);t.startPos=u;var n=Yn(a,this,"dragControlStart",t,function(t,e){var n=Zn(t,l),r=Zt(te(-a.rotation/180*Math.PI,3),[n[0]-u[0],n[1]-u[1],1],3),i=r[0],o=r[1];return e.originalX=i,e.originalY=o,s}),r=Re({},e,{targets:a.props.targets,events:n}),i=xn(a,"onScaleGroupStart",r);return t.isScale=!1!==i,!!t.isScale&&r},dragGroupControl:function(o,a){var t=a.datas;if(t.isScale){var e=this.dragControl(o,a);if(e){var s=o.props.keepRatio,l=e.scale,u=t.startPos,n=Yn(o,this,"dragControl",t,function(t,e){var n=Zt(te(o.rotation/180*Math.PI,3),[e.originalX*l[0],e.originalY*l[1],1],3),r=n[0],i=n[1];return Re({},a,{parentScale:l,parentKeepRatio:s,dragClient:Vt(u,[r,i])})}),r=Re({targets:o.props.targets,events:n},e);return xn(o,"onScaleGroup",r),r}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale)return this.dragControlEnd(t,e),Yn(t,this,"dragControlEnd",r,e),xn(t,"onScaleGroupEnd",_n(t,e,{targets:t.props.targets,isDrag:n})),n},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Zr(t,n){return t.map(function(t,e){return function(t,e,n,r){return(t*r+e*n)/(n+r)}(t,n[e],1,2)})}function Jr(t,e,n){var r=It(t,e),i=It(t,n)-r;return 0<=i?i:i+2*Math.PI}var Qr={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable;if(!r&&!i&&o){var a=t.state,s=a.pos1,l=a.pos2,u=a.pos3,c=a.pos4,f=Zr(s,l),p=Zr(l,s),h=Zr(s,u),d=Zr(u,s),g=Zr(u,c),v=Zr(c,u),m=Zr(l,c),b=Zr(c,l);return[e.createElement("div",{className:qe("line"),key:"middeLine1",style:an(f,g)}),e.createElement("div",{className:qe("line"),key:"middeLine2",style:an(p,v)}),e.createElement("div",{className:qe("line"),key:"middeLine3",style:an(h,m)}),e.createElement("div",{className:qe("line"),key:"middeLine4",style:an(d,b)})].concat(Ur(t,e))}},dragControlCondition:function(t){return!t.isRequest&&I(t.inputEvent.target,qe("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=pn(n.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,l=a.is3d,u=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,h=a.left,d=a.top;return r.datas={},r.targetTransform=u,r.warpTargetMatrix=l?c:Wt(c,3,4),r.targetInverseMatrix=Yt(Xt(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=h,r.top=d,Xn(t,{datas:r}),r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t,e){return $t(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return Zt(r.warpTargetMatrix,[e,n,0,1],4)}),r.startMatrix=ee(4),r.prevMatrix=ee(4),r.absolutePoses=dn(a),r.posIndexes=In(o),!(a.snapRenderInfo={direction:o})!==xn(t,"onWarpStart",_n(t,e,{set:function(t){r.startMatrix=t}}))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,o=n.targetInverseMatrix,a=n.prevMatrix,s=n.isWarp,l=n.startMatrix,u=n.poses,c=n.posIndexes,f=n.absolutePoses;if(!s)return!1;if(br(t,"warpable")){var p=c.map(function(t){return f[t]});1<p.length&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var h=Er(t,p.map(function(t){return[t[0]+r,t[1]+i]})),d=h.horizontal,g=h.vertical;i-=d.offset,r-=g.offset}var v=Fn({datas:n,distX:r,distY:i},!0),m=n.nextPoses.slice();if(c.forEach(function(t){m[t]=Vt(m[t],v)}),!Te.every(function(t){return function(t,e){var n=Jr(t[0],t[1],t[2]),r=Jr(e[0],e[1],e[2]),i=Math.PI;return!(i<=n&&r<=i||n<=i&&i<=r)}(t.map(function(t){return u[t]}),t.map(function(t){return m[t]}))}))return!1;var b=ie(u[0],u[1],u[2],u[3],m[0],m[1],m[2],m[3]);if(!b.length)return!1;var y=Qt(Ht(o,b,4)),_=n.targetTransform+" matrix3d("+y.join(",")+")";return xn(t,"onWarp",_n(t,e,{delta:Ut(Xt(a,4),y,4),matrix:Ut(l,n.prevMatrix=y,4),multiply:Ut,dist:y,transform:_})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,xn(t,"onWarpEnd",_n(t,e,{isDrag:r})),r)}},ti=qe("area"),ei=qe("area-pieces"),ni=qe("area-piece"),ri=qe("avoid");function ii(t){var e=t.areaElement,n=t.state,r=n.width,i=n.height;W(e,ri),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+i+"px"}function oi(t){return t.createElement("div",{key:"area_pieces",className:ei},t.createElement("div",{className:ni}),t.createElement("div",{className:ni}),t.createElement("div",{className:ni}),t.createElement("div",{className:ni}))}var ai={name:"dragArea",props:{dragArea:Boolean},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,a=t.state,s=a.width,l=a.height,u=a.pos1,c=a.pos2,f=a.pos3,p=a.pos4;if(o)return[e.createElement("div",{key:"area",ref:xt(t,"areaElement"),className:ti}),oi(e)];if(!r||!i)return[];var h=ie([0,0],[s,0],[0,l],[s,l],u,c,f,p),d=h.length?"matrix3d("+Qt(h).join(",")+")":"none";return[e.createElement("div",{key:"area",ref:xt(t,"areaElement"),className:ti,style:{top:"0px",left:"0px",width:s+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),oi(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.inputEvent;if(!o)return!1;n.isDragArea=!1,n.inputTarget=o.target;var a=t.areaElement,s=t.state,l=s.targetClientRect,u=s.pos1,c=s.pos2,f=s.pos3,p=s.pos4,h=s.width,d=s.height,g=s.rootMatrix,v=s.is3d,m=l.left,b=l.top,y=en([u,c,f,p]),_=y.left,x=y.top,w=v?4:3,S=tn(g,h,d,w),E=en(S),M=$t([r,i],Vt([m-E.left,b-E.top],S[0])),C=Zt(Xt(g,w),qt(M,w),w),D=C[0],O=C[1],P=[{left:_,top:x,width:h,height:O-10},{left:_,top:x,width:D-10,height:d},{left:_,top:x+O+10,width:h,height:d-O-10},{left:_+D+10,top:x,width:h-D-10,height:d}],R=[].slice.call(a.nextElementSibling.children);P.forEach(function(t,e){R[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),q(a,ri)},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,ii(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var n=e.inputEvent,r=e.isDragArea;e.datas.isDragArea||ii(t);var i=t.state.target,o=n.target;if(!r&&!t.isMoveableElement(o)){var a=i.contains(o);xn(t,"onClick",_n(t,e,{inputTarget:o,isTarget:i===o,containsTarget:a}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.isDragArea,i=e.datas;if(!n)return!1;r||ii(t);var o=i.inputTarget,a=n.target;if(!r&&!t.isMoveableElement(a)&&o!==a){var s=t.props.targets,l=s.indexOf(a),u=-1<l,c=!1;-1===l&&(c=-1<(l=j(s,function(t){return t.contains(a)}))),xn(t,"onClickGroup",_n(t,e,{targets:s,inputTarget:a,targetIndex:l,isTarget:u,containsTarget:c}))}}},si={name:"origin",props:{origin:Boolean},render:function(t,e){if(!t.props.origin)return null;var n=t.state,r=n.beforeOrigin,i=n.rotation;return[e.createElement("div",{className:qe("control","origin"),style:sn(i,r),key:"beforeOrigin"})]}};function li(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ui={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(o,a){var t=o.props.scrollContainer,e=void 0===t?o.getContainer():t,n=new Se;a.datas.dragScroll=n;var r=a.isControl?"controlDragger":"targetDragger",s=a.targets;n.on("scroll",function(t){var e=t.container,n=t.direction,r=_n(o,a,{scrollContainer:e,direction:n}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),xn(o,i,r)}).on("move",function(t){var e=t.offsetX,n=t.offsetY;o[r].scrollBy(e,n,a.inputEvent,!1)}),n.dragStart(a,{container:e})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,l=r.getScrollPosition,u=void 0===l?li:l;return n.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return u({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Re({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,Re({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragStart(t,e)},dragGroupContro:function(t,e){return this.drag(t,Re({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,e)}},ci=[{name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Nr,jn,Tr,Lr,Vr,$r,Qr,ui,ai,si],fi={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,i={left:e.left,top:e.top};return t.map(function(t,e){return r.createElement(Nn,{key:"moveable"+e,ref:function(e,n,r){return function(t){t&&(e[n][r]=t)}}(n,"moveables",e),target:t,origin:!1,parentMoveable:n,parentPosition:i})})}};function pi(t,o){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.max(e[o],n[o],r[o],i[o])}))}function hi(t,o){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.min(e[o],n[o],r[o],i[o])}))}var di=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.differ=new De,t.moveables=[],t.rotation=0,t}Pe(t,n);var e=t.prototype;return e.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=zn(this,e.target,"targetAbles","Group"),this.controlDragger=zn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=!Cn(t.container,n.container);r&&(e.container=n.container);var i=this.differ.update(n.targets),o=i.added,a=i.changed,s=i.removed;(r||o.length||a.length||s.length)&&this.updateRect()},e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r;if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var i=this.state,o=this.props,a=i.target||o.target;(!t||""!==e&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate);var s=this.rotation,l=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map(function(t){return dn(t.state)}),i=Ye,o=Ye,r=0,a=0,s=vn(e,je);if(s%90){var l=e/180*Math.PI,u=Math.tan(l),c=-1/u,f=[Xe,Ye],p=[Xe,Ye];n.forEach(function(t){t.forEach(function(t){var e=t[1]-u*t[0],n=t[1]-c*t[0];f[0]=Math.max(f[0],e),f[1]=Math.min(f[1],e),p[0]=Math.max(p[0],n),p[1]=Math.min(p[1],n)})}),f.forEach(function(r){p.forEach(function(t){var e=(t-r)/(u-c),n=u*e+r;i=Math.min(i,e),o=Math.min(o,n)})});var h=n.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return[Jt(e,-l),Jt(n,-l),Jt(r,-l),Jt(i,-l)]});r=pi(h,0)-hi(h,0),a=pi(h,1)-hi(h,1)}else if(i=hi(n,0),o=hi(n,1),r=pi(n,0)-i,a=pi(n,1)-o,s%180){var d=r;r=a,a=d}return[i,o,r,a]}(this.moveables,s),u=l[0],c=l[1],f=l[2],p=l[3];a.style.cssText+="left:0px;top:0px;width:"+f+"px; height:"+p+"px;transform:rotate("+s+"deg)",i.width=f,i.height=p;var h=this.getContainer(),d=cn(a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h,i),g=[d.left,d.top];r=dn(d),d.pos1=r[0],d.pos2=r[1],d.pos3=r[2],d.pos4=r[3],d.origin=Vt(g,d.origin),d.beforeOrigin=Vt(g,d.beforeOrigin);var v=d.targetClientRect;v.top+=c-d.top-i.top,v.left+=u-d.left-i.left,this.updateState(Re({},d,{left:u-d.left,top:c-d.top}),n)}},e.triggerEvent=function(t,e){if(-1<t.indexOf("Group"))return n.prototype.triggerEvent.call(this,t,e)},e.updateAbles=function(){n.prototype.updateAbles.call(this,this.props.ables.concat([fi]),"Group")},t.defaultProps=Re({},Nn.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0}),t}(Nn),gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Pe(e,t);var n=e.prototype;return n.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=V(e);if(n&&1<e.length){var r=Re({},this.props,{target:null,targets:e,ables:ci.concat([fi],t)});return ot(di,Re({key:"group",ref:xt(this,"moveable")},r))}var i=n?e[0]:e;return ot(Nn,Re({key:"single",ref:xt(this,"moveable")},Re({},this.props,{target:i,ables:ci.concat(t)})))},n.isMoveableElement=function(t){return this.moveable.isMoveableElement(t)},n.dragStart=function(t){this.moveable.dragStart(t)},n.isInside=function(t,e){return this.moveable.isInside(t,e)},n.updateRect=function(){this.moveable.updateRect()},n.updateTarget=function(){this.moveable.updateTarget()},n.getRect=function(){return this.moveable.getRect()},n.request=function(t,e){return this.moveable.request(t,e)},n.destroy=function(){this.moveable.componentWillUnmount()},e}(gt),vi=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,n),t.prototype.render=function(){return function(t,e){return ot(vt,{element:t,container:e})}(ot(gi,s({ref:p(this,"moveable")},this.state)),this.state.parentElement)},t}(dt),mi=["draggable","resizable","scalable","rotatable","warpable","pinchable","snappable","origin","target","edge","throttleDrag","throttleDragRotate","throttleResize","throttleScale","throttleRotate","keepRatio","dragArea","pinchThreshold","snapCenter","snapThreshold","horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","className","renderDirections","scrollable","getScrollPosition","scrollContainer","scrollThreshold","baseDirection","snapElement","snapVertical","snapHorizontal","isDisplaySnapDigit","snapDigit","zoom"],bi=["dragStart","drag","dragEnd","resizeStart","resize","resizeEnd","scaleStart","scale","scaleEnd","rotateStart","rotate","rotateEnd","warpStart","warp","warpEnd","pinchStart","pinch","pinchEnd","dragGroupStart","dragGroup","dragGroupEnd","resizeGroupStart","resizeGroup","resizeGroupEnd","scaleGroupStart","scaleGroup","scaleGroupEnd","rotateGroupStart","rotateGroup","rotateGroupEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","clickGroup","scroll","scrollGroup","renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],yi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","setState","getRect","request"],_i=function(a){function t(t,e){void 0===e&&(e={});var n=a.call(this)||this;n.tempElement=document.createElement("div");var r=s({container:t},e),i={};bi.forEach(function(e){i[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}("on "+e)]=function(t){return n.trigger(e,t)}}),_t(ot(vi,s({ref:p(n,"innerMoveable"),parentElement:t},r,i)),n.tempElement);var o=r.target;return V(o)&&1<o.length&&n.updateRect(),n}i(t,a);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.destroy=function(){_t(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([o(yi,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),o(mi,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(t),xi={draggable:{vanilla:'\nimport Moveable from "moveable";\n\n/* const translate = [0, 0]; */\nconst draggable = new Moveable(document.body, {\n    target: document.querySelector(".draggable"),\n    draggable: true,\n    throttleDrag: 0,\n}).on("drag", ({ target, left, top, beforeDelta }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n\n    /* translate[0] += beforeDelta[0]; */\n    /* translate[1] += beforeDelta[1]; */\n    /* target.style.transform\n        = "translateX(" + translate[0] + "px) "\n        + "translateY(" + translate[1] + "px)"; */\n});\n        ',react:'\nimport Moveable from "react-moveable";\nthis.translate = [0, 0];\nreturn (\n    <Moveable\n        target={document.querySelector(".draggable")}\n        draggable={true}\n        throttleDrag={0}\n        onDrag={({ target, left, top, beforeDelta }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n\n            /* const translate = this.translate */\n            /* translate[0] += beforeDelta[0]; */\n            /* translate[1] += beforeDelta[1]; */\n            /* target.style.transform\n                = "translateX(" + translate[0] + "px) "\n                + "translateY(" + translate[1] + "px)"; */\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [draggable]="true"\n    [throttleDrag]="0"\n    (drag)="onDrag($event)\n    />\n`,\n})\nexport class AppComponent {\n    translate = [0, 0];\n    onDrag({ target, left, top, beforeDelta }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n\n        /* const translate = this.translate */\n        /* translate[0] += beforeDelta[0]; */\n        /* translate[1] += beforeDelta[1]; */\n        /* target.style.transform\n            = "translateX(" + translate[0] + "px) "\n            + "translateY(" + translate[1] + "px)"; */\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target draggable" bind:this={target}>Draggable</div>\n<Moveable\n    target={target}\n    draggable={true}\n    throttleDrag={0}\n    on:drag={({ detail }) => {\n        target.style.left = detail.left + "px";\n        target.style.top = detail.top + "px";\n    }}\n/>'},resizable:{vanilla:'\nimport Moveable from "moveable";\n\nconst resizable = new Moveable(document.body, {\n    target: document.querySelector(".resizable"),\n    resizable: true,\n    throttleResize: 0,\n    keepRatio: true,\n}).on("resize", ({ target, width, height, dist }) => {\n    console.log(width, height, dist);\n    target.style.width = width + "px";\n    target.style.height = height + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".resizable")}\n        resizable={true}\n        throttleResize={0}\n        keepRatio={true}\n        onResize={({ target, width, height, dist }) => {\n            console.log(width, height, dist);\n            target.style.width = width + "px";\n            target.style.height = height + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [resizable]="true"\n    [throttleResize]="0"\n    [keepRatio]="true"\n    (resize)="onResize($event)\n    />\n`,\n})\nexport class AppComponent {\n    onResize({ target, width, height, dist }) {\n        console.log(width, height, dist);\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let translate = [0, 0];\n    let target;\n<\/script>\n<div class="target resizable" bind:this={target}>Resizable</div>\n<Moveable\n    target={target}\n    resizable={true}\n    throttleResize={0}\n    keepRatio={true}\n    on:resize={({ detail }) => {\n        const { target, width, height, dist } = detail;\n        target.style.width = width + "px";\n        target.style.height = height + "px";\n    }}\n/>'},scalable:{vanilla:'\nimport Moveable from "moveable";\n\nconst scale = [1, 1];\nconst scalable = new Moveable(document.body, {\n    target: document.querySelector(".scalable"),\n    scalable: true,\n    throttleScale: 0,\n    keepRatio: true,\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale[0] +  "," + scale[1] + ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.scale = [1, 1];\nreturn (\n    <Moveable\n        target={document.querySelector(".scalable")}\n        scalable={true}\n        throttleScale={0}\n        keepRatio={true}\n        onScale={({ target, delta }) => {\n            const scale = this.scale;\n            scale[0] *= delta[0];\n            scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + scale[0] +  "," + scale[1] + ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [scalable]="true"\n    [throttleScale]="0"\n    [keepRatio]="true"\n    (scale)="onScale($event)\n    />\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    onScale({ target, delta }) {\n        const scale = this.scale;\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let scale = [1, 1];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    scalable={true}\n    throttleScale={0}\n    keepRatio={true}\n    on:scale={({ detail: { target, delta }}) => {\n        scale[0] *= delta[0];\n        scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + scale[0] +  "," + scale[1] + ")";\n    }}\n/>'},rotatable:{vanilla:'\nimport Moveable from "moveable";\n\nlet rotate = 0;\n\nconst rotatable = new Moveable(document.body, {\n    target: document.querySelector(".rotatable"),\n    rotatable: true,\n    throttleRotate: 0,\n}).on("rotate", ({ target, beforeDelta, delta }) => {\n    rotate += delta;\n    target.style.transform\n        = "rotate(" + rotate +  "deg)";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".rotatable")}\n        rotatable={true}\n        throttleRotate={0}\n        onRotate={({ target, beforeDelta, delta }) => {\n            this.rotate += delta;\n            target.style.transform\n                = "rotate(" + this.rotate +  "deg)";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [rotatable]="true"\n    [throttleRotate]="0"\n    [keepRatio]="true"\n    (rotate)="onRotate($event)\n    />\n`,\n})\nexport class AppComponent {\n    rotate = 0;\n    onRotate({ target, delta }) {\n        this.rotate += delta;\n        target.style.transform\n            = "rotate(" + this.rotate +  "deg)";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let rotate = 0;\n    let target;\n<\/script>\n<div class="target rotatable" bind:this={target}>Rotatable</div>\n<Moveable\n    target={target}\n    rotatable={true}\n    throttleRotate={0}\n    on:rotate={({ detail }) => {\n        const { target, beforeDelta, delta } = detail;\n        rotate += delta;\n        target.style.transform\n            = "rotate(" + rotate +  "deg)";\n    }}\n/>'},warpable:{vanilla:'\nimport Moveable from "moveable";\n\nlet matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nconst warpable = new Moveable(document.body, {\n    target: document.querySelector(".warpable"),\n    warpable: true,\n    throttleRotate: 0,\n}).on("warp", ({ target, multiply, delta }) => {\n    matrix = multiply(matrix, delta);\n    target.style.transform\n        = "matrix3d(" + matrix.join(",") +  ")";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.matrix = [\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n];\n\nreturn (\n    <Moveable\n        target={document.querySelector(".warpable")}\n        warpable={true}\n        onWarp={({ target, multiply, delta }) => {\n            this.matrix = multiply(this.matrix, delta);\n            target.style.transform\n                = "matrix3d(" + matrix.join(",") +  ")";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [warpable]="true"\n    (warp)="onWarp($event)\n    />\n`,\n})\nexport class AppComponent {\n    matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    onWarp({ target, dist }) {\n        this.matrix = multiply(this.matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target scalable" bind:this={target}>Scalable</div>\n<Moveable\n    target={target}\n    warpable={true}\n    on:warp={({ detail }) => {\n        const { target, multiply, delta } = detail;\n        matrix = multiply(matrix, delta);\n        target.style.transform\n            = "matrix3d(" + matrix.join(",") +  ")";\n    }}\n/>'},pinchable:{vanilla:'\nimport Moveable from "moveable";\nconst scale = [1, 1];\nlet rotate = 0;\n\nconst pinchable = new Moveable(document.body, {\n    target: document.querySelector(".pinchable"),\n    pinchable: ["rotatable", "scalable"],\n}).on("rotate", ({ target, beforeDelta }) => {\n    rotate += beforeDelta;\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n}).on("scale", ({ target, delta }) => {\n    scale[0] *= delta[0];\n    scale[1] *= delta[1];\n    target.style.transform = "scale(" + scale.join(", ") + ") rotate(" + rotate + "deg)";\n});',react:'\nimport Moveable from "react-moveable";\nthis.scale = [1, 1];\nthis.rotate = 0;\n\nreturn (\n    <Moveable\n        target={document.querySelector(".pinchable")}\n        pinchable={["rotatable", "scalable"]},\n        onRotate={({ target, beforeDelta }) => {\n            this.rotate += beforeDelta;\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n        onScale={({ target, beforeDelta }) => {\n            this.scale[0] *= delta[0];\n            this.scale[1] *= delta[1];\n            target.style.transform\n                = "scale(" + this.scale.join(", ") + ") "\n                + "rotate(" + this.rotate + "deg)";\n        }}\n    />\n);',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n    <div #target class="target">target</div>\n    <ngx-moveable\n        [target]="target"\n        [pinchable]="[\'rotatable\', \'scalable\']"\n        [rotate]="onRotate($event)"\n        [scale]="onScale($event)"\n/>\n`,\n})\nexport class AppComponent {\n    scale = [1, 1];\n    rotate = 0;\n    onRotate({ target, beforeDelta }) {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n    onScale({ target, beforeDelta }) {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let matrix = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    pinchable={["rotatable", "scalable"]},\n    on:rotate={({ detail: { target, beforeDelta }}) => {\n        this.rotate += beforeDelta;\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n    on:scale={({ detail: { target, beforeDelta }}) => {\n        this.scale[0] *= delta[0];\n        this.scale[1] *= delta[1];\n        target.style.transform\n            = "scale(" + this.scale.join(", ") + ") "\n            + "rotate(" + this.rotate + "deg)";\n    }}\n/>'},snappable:{vanilla:'\nimport Moveable from "moveable";\n\nconst snappable = new Moveable(document.body, {\n    target: document.querySelector(".snappable"),\n    snappable: true,\n    verticalGuidelines: [0, 150, 200],\n    horizontalGuidelines: [0, 150, 200],\n}).on("drag", ({ target, left, top }) => {\n    target.style.left = left + "px";\n    target.style.top = top + "px";\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nreturn (\n    <Moveable\n        target={document.querySelector(".origin")}\n        origin={true}\n        snappable={true}\n        verticalGuidelines={[0, 150, 200]}\n        horizontalGuidelines={[0, 150, 200]}\n        onDrag={({ target, left, top }) => {\n            target.style.left = left + "px";\n            target.style.top = top + "px";\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target class="target">target</div>\n<ngx-moveable\n    [target]="target"\n    [snappable]="true"\n    [verticalGuidelines]="[0, 150, 200]"\n    [horizontalGuidelines]="[0, 150, 200]"\n    />\n`,\n})\nexport class AppComponent {\n    onDrag({ target, left, top }) {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }\n}\n',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n\n    let target;\n<\/script>\n<div class="target pinchable" bind:this={target}>Pinchable</div>\n<Moveable\n    target={target}\n    origin={true}\n    snappable={true}\n    verticalGuidelines={[0, 150, 200]}\n    horizontalGuidelines={[0, 150, 200]}\n    on:drag={({ detail: { target, left, top }}) => {\n        target.style.left = left + "px";\n        target.style.top = top + "px";\n    }}\n/>'},groupable:{vanilla:'\nimport Moveable from "moveable";\nconst poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nconst groupable = new Moveable(document.body, {\n    target,\n    draggable: true,\n}).on("dragGroup", ({ events }) => {\n    events.forEach(({ target, beforeDelta }, i) => {\n        poses[i][0] += beforeDelta[0];\n        poses[i][1] += beforeDelta[1];\n\n        target.style.transform\n            = "translate("\n            + poses[i][0] + "px, "\n            + poses[i][1] + "px)";\n    });\n});\n        ',react:'\nimport Moveable from "react-moveable";\n\nthis.poses = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n];\n\nconst target = [].slice.call(\n    document.querySelectorAll(".target"),\n);\nreturn (\n    <Moveable\n        target={target}\n        draggable={true}\n        onDragGroup={({ events }) => {\n            events.forEach(({ target, beforeDelta }, i) => {\n                this.poses[i][0] += beforeDelta[0];\n                this.poses[i][1] += beforeDelta[1];\n\n                target.style.transform\n                    = "translate("\n                    + this.poses[i][0] + "px, "\n                    + this.poses[i][1] + "px)";\n            });\n        }}\n    />\n);\n        ',angular:'\nimport {\n    NgxMoveableModule,\n    NgxMoveableComponent,\n} from "ngx-moveable";\n\n@Component({\n    selector: \'AppComponent\',\n    template: `\n<div #target1 class="target">target1</div>\n<div #target2 class="target">target2</div>\n<div #target3 class="target">target3</div>\n<ngx-moveable\n    [target]="[target1, target2, target3]"\n    [draggable]="true"\n    (dragGroup)="onDragGroup($event)\n    />\n`,\n})\nexport class AppComponent {\n    poses = [\n        [0, 0],\n        [0, 0],\n        [0, 0],\n    ];\n    onDragGroup({ events }) {\n        events.forEach(({ target, beforeDelta }, i) => {\n            this.poses[i][0] += beforeDelta[0];\n            this.poses[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + this.poses[i][0] + "px, "\n                + this.poses[i][1] + "px)";\n        });\n    }\n}\n        ',svelte:'\n<script>\n    import Moveable from "svelte-moveable";\n    import { onMount } from "svelte";\n    let targets = [];\n    let translates = [];\n\n    onMount(() => {\n        targets = [].slice.call(document.querySelectorAll(".target"));\n        translates = targets.map(() => {\n            return [0, 0];\n        });\n    });\n<\/script>\n<div class="target">Target1</div>\n<div class="target">Target2</div>\n<div class="target">Target3</div>\n<Moveable\n    target={targets}\n    draggable={true}\n    on:dragGroup={({ detail: { events }}) => {\n        events.forEach(({ target, beforeDelta }, i) => {\n            translates[i][0] += beforeDelta[0];\n            translates[i][1] += beforeDelta[1];\n\n            target.style.transform\n                = "translate("\n                + translates[i][0] + "px, "\n                + translates[i][1] + "px)";\n        });\n    }}\n/>'}};function wi(t,e,n){var r=1-n;return n*n*n+3*n*n*r*e+3*n*r*r*t}function Si(n,r,i,o){function t(t){var e=function(t,e,n){for(var r=n,i=1;.001<Math.abs(i);){if(i=wi(t,e,r)-n,Math.abs(i)<.001)return r;r-=i/2}return r}(n,i,Math.max(Math.min(1,t),0));return wi(r,o,e)}return t.easingName="cubic-bezier("+n+","+r+","+i+","+o+")",t}function Ei(n,r){function t(t){var e=1/n;return 1<=t?1:("start"===r?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+n+", "+r+")",t}var Mi,Ci=Ei(1,"start"),Di=Ei(1,"end"),Oi=Si(0,0,1,1),Pi=Si(.25,.1,.25,1),Ri=Si(.42,0,1,1),zi=Si(0,0,.58,1),ki=Si(.42,0,.58,1),Bi="animation-timing-function",Gi={transform:{},filter:{},attribute:{},html:!0},Ai={easing:[Bi]},Ni=((Mi={})[Bi]=!0,Mi.contents=!0,Mi.html=!0,Mi),Ti={linear:Oi,ease:Pi,"ease-in":Ri,"ease-out":zi,"ease-in-out":ki,"step-start":Ci,"step-end":Di},ji=function(){function o(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=B(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this.separator,e=this.prefix,n=this.suffix,r=this.model,i=this.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:t,prefix:e,suffix:n,model:r,type:i})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function Yi(t){var e=h;return 3===t.length&&(t[3]=1),new ji(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function Xi(t,e){return new ji(t,{type:"array",separator:e})}function Fi(t){if(!B(t))return V(t)?Xi(t,","):t;var e=G(t);return 1<e.length?Xi(e.map(function(t){return Fi(t)}),","):1<(e=function(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}(t)).length?Xi(e.map(function(t){return Fi(t)})," "):(e=/^(['"])([^'"]*)(['"])$/g.exec(t))&&e[1]===e[3]?new ji([Fi(e[2])],{prefix:e[1],suffix:e[1]}):-1!==t.indexOf("(")?function(t){var e=N(t),n=e.prefix,r=e.value,i=e.suffix;if(void 0===r)return t;if(-1!==v.indexOf(n))return Yi(F(t));var o=Fi(r),a=[r],s=",",l=n+"(",u=")"+i;return o instanceof ji&&(s=o.separator,a=o.value,l+=o.prefix,u=o.suffix+u),new ji(a,{separator:s,model:n,prefix:l,suffix:u})}(t):"#"===t.charAt(0)?function(t){var e=F(t);return e?Yi(e):t}(t):t}function Ii(t){return t instanceof ji}function qi(t){var e=typeof t;if(e===E){if(V(t))return S;if(Ii(t))return w}else if(e===M||e===C)return"value";return e}function Wi(t,e){var n=[];if(function(t){return A(t)&&t.constructor===Object}(t))for(var r in t)e.push(r),n=n.concat(Wi(t[r],e)),e.pop();else n.push(e.slice());return n}function Li(t,e,n){void 0===n&&(n=t.length);for(var r=e,i=0;i<n;++i){if(!A(r))return;r=r[t[i]]}return r}function Hi(t,e,n){var r=e.length,i=t;if(0===r)return!1;for(var o=0;o<r;++o){if(!0===i)return!1;if(!(i=i[e[o]])||!n&&!0===i)return!1}return!0}function Ui(t,e){return Hi(Gi,t,e)}function Ki(t){if(!t)return"";var e=[];for(var n in t)e.push(n.replace(/\d$/g,"")+"("+t[n]+")");return e.join(" ")}function Vi(t,e){return void 0===e&&(e=!1),$i({},t,e)}function $i(t,e,n){for(var r in void 0===n&&(n=!1),e){var i=e[r],o=qi(i);o===w?t[r]=n?i.toValue():i.clone():o===m?t[r]=n?Ji([r],i):i:o===S?t[r]=i.slice():o===E?A(t[r])&&!Ii(t[r])?$i(t[r],i,n):t[r]=Vi(i,n):t[r]=e[r]}return t}function Zi(t){return t[0]in Ai?Ai[t[0]]:t}function Ji(t,e){var n=qi(e);if(n===w)return e.toValue();if(n===m){if(t[0]!==Bi)return Ji(t,e())}else if(n===E)return Vi(e,!0);return e}var Qi,to,eo,no,ro,io=function(){function p(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=p.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.raw.apply(this,t);return Ji(Zi(t),n)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Li(Zi(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zi(t),r=n.length;if(!r)return this;var i=Li(n,this.properties,r-1);return A(i)&&delete i[n[r-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,r=t.length,i=t.slice(0,-1),o=t[r-1],a=i[0];if(1===r&&o instanceof p)n.merge(o);else if(a in Ai)n._set(Ai[a],o);else if(2===r&&V(a))n._set(a,o);else if(Ii(o))Ui(i)?n.set.apply(n,i.concat([function e(t,n){void 0===n&&(n={});var r=t.model;if(r){t.setOptions({model:"",suffix:"",prefix:""});var i=1<t.size()?t:t.get(0);n[r]=i}else t.forEach(function(t){e(t,n)});return n}(o)])):n._set(i,o);else if(V(o))n._set(i,o);else if(A(o))for(var s in!n.has.apply(n,i)&&Ui(i)&&n._set(i,{}),o)n.set.apply(n,i.concat([s,o[s]]));else if(B(o)){if(Ui(i,!0)){if(function(t){return Hi(Ni,t,!0)}(i)||!Ui(i))this._set(i,o);else{var l=Fi(o);A(l)&&n.set.apply(n,i.concat([l]))}return this}var u=function(t){for(var e=t.split(";"),n={},r=e.length,i=0;i<r;++i){var o=/([^:]*):([\S\s]*)/g.exec(e[i]);!o||o.length<3||!o[1]?--r:n[o[1].trim()]=Fi(o[2].trim())}return{styles:n,length:r}}(o),c=u.styles,f=u.length;for(var s in c)n.set.apply(n,i.concat([s,c[s]]));if(f)return this;n._set(i,o)}else n._set(i,o);return n},t.getNames=function(){return Wi(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zi(t),r=n.length;return!!r&&!X(Li(n,this.properties,r))},t.clone=function(){return(new p).merge(this)},t.merge=function(t){var e=this.properties,n=t.properties;return n&&$i(e,n),this},t.toCSSObject=function(){var t=this.get(),e={};for(var n in t)if(!Ui([n],!0)){var r=t[n];n===Bi?e[Bi.replace("animation",k)]=(B(r)?r:r.easingName)||"initial":e[n]=r}var i=Ki(t.transform),o=Ki(t.filter);return R&&i&&(e[R]=i),z&&o&&(e[z]=o),e},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var n in t)e.push(n+":"+t[n]+";");return e.join("")},t._set=function(t,e){for(var n=this.properties,r=t.length,i=0;i<r-1;++i){var o=t[i];o in n||(n[o]={}),n=n[o]}r&&(1===t.length&&t[0]===Bi?n[Bi]=function(t){var e;if(B(t))if(t in Ti)e=Ti[t];else{var n=Fi(t);if(B(n))return 0;if("cubic-bezier"===n.model)e=Si((t=n.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==n.model)return 0;e=Ei(parseFloat(n.value[0]),n.value[1])}}else e=V(t)?Si(t[0],t[1],t[2],t[3]):t;return e}(e):n[t[r-1]]=B(e)?Fi(e):e)},p}(),oo={},ao=[],so=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function lo(t,e){for(var n in e)t[n]=e[n];return t}function uo(t){var e=t.parentNode;e&&e.removeChild(t)}function co(t,e,n){var r,i,o,a,s=arguments;if(e=lo({},e),3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(e.children=n),null!=t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===e[i]&&(e[i]=t.defaultProps[i]);return a=e.key,null!=(o=e.ref)&&delete e.ref,null!=a&&delete e.key,fo(t,e,a,o)}function fo(t,e,n,r){var i={type:t,props:e,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return Qi.vnode&&Qi.vnode(i),i}function po(t){return t.children}function ho(t,e){this.props=t,this.context=e}function go(t,e){if(null==e)return t.__p?go(t.__p,t.__p.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?go(t):null}function vo(t){var e,n;if(null!=(t=t.__p)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return vo(t)}}function mo(t){(!t.__d&&(t.__d=!0)&&1===to.push(t)||no!==Qi.debounceRendering)&&(no=Qi.debounceRendering,(Qi.debounceRendering||eo)(bo))}function bo(){var t,e,n,r,i,o,a;for(to.sort(function(t,e){return e.__v.__b-t.__v.__b});t=to.pop();)t.__d&&(r=n=void 0,o=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],r=Eo(a,i,lo({},i),e.__n,void 0!==a.ownerSVGElement,null,n,null==o?go(i):o),Mo(n,i),r!=o&&vo(i)))}function yo(e,n,t,r,i,o,a,s,l){var u,c,f,p,h,d,g,v=t&&t.__k||ao,m=v.length;if(s==oo&&(s=null!=o?o[0]:m?go(t,0):null),u=0,n.__k=_o(n.__k,function(t){if(null!=t){if(t.__p=n,t.__b=n.__b+1,null===(f=v[u])||f&&t.key==f.key&&t.type===f.type)v[u]=void 0;else for(c=0;c<m;c++){if((f=v[c])&&t.key==f.key&&t.type===f.type){v[c]=void 0;break}f=null}if(p=Eo(e,t,f=f||oo,r,i,o,a,s,l),(c=t.ref)&&f.ref!=c&&(g=g||[]).push(c,t.__c||p,t),null!=p){if(null==d&&(d=p),null!=t.__d)p=t.__d,t.__d=null;else if(o==f||p!=s||null==p.parentNode){t:if(null==s||s.parentNode!==e)e.appendChild(p);else{for(h=s,c=0;(h=h.nextSibling)&&c<m;c+=2)if(h==p)break t;e.insertBefore(p,s)}"option"==n.type&&(e.value="")}s=p.nextSibling,"function"==typeof n.type&&(n.__d=p)}}return u++,t}),n.__e=d,null!=o&&"function"!=typeof n.type)for(u=o.length;u--;)null!=o[u]&&uo(o[u]);for(u=m;u--;)null!=v[u]&&Do(v[u],v[u]);if(g)for(u=0;u<g.length;u++)Co(g[u],g[++u],g[++u])}function _o(t,e,n){if(null==n&&(n=[]),null==t||"boolean"==typeof t)e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)_o(t[r],e,n);else n.push(e?e("string"==typeof t||"number"==typeof t?fo(null,t,null,null):null!=t.__e||null!=t.__c?fo(t.type,t.props,t.key,null):t):t);return n}function xo(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===so.test(e)?n+"px":null==n?"":n}function wo(t,e,n,r,i){var o,a,s,l,u;if("key"===(e=i?"className"===e?"class":e:"class"===e?"className":e)||"children"===e);else if("style"===e)if(o=t.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(a in r)n&&a in n||xo(o,a,"");if(n)for(s in n)r&&n[s]===r[s]||xo(o,s,n[s])}else"o"===e[0]&&"n"===e[1]?(l=e!==(e=e.replace(/Capture$/,"")),e=((u=e.toLowerCase())in t?u:e).slice(2),n?(r||t.addEventListener(e,So,l),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,So,l)):"list"!==e&&"tagName"!==e&&"form"!==e&&!i&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n?t.removeAttribute(e):t.setAttribute(e,n))}function So(t){this.l[t.type](Qi.event?Qi.event(t):t)}function Eo(t,e,n,r,i,o,a,s,l){var u,c,f,p,h,d,g,v,m,b,y=e.type;if(void 0!==e.constructor)return null;(u=Qi.__b)&&u(e);try{t:if("function"==typeof y){if(v=e.props,m=(u=y.contextType)&&r[u.__c],b=u?m?m.props.value:u.__p:r,n.__c?g=(c=e.__c=n.__c).__p=c.__E:("prototype"in y&&y.prototype.render?e.__c=c=new y(v,b):(e.__c=c=new ho(v,b),c.constructor=y,c.render=Oo),m&&m.sub(c),c.props=v,c.state||(c.state={}),c.context=b,c.__n=r,f=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=y.getDerivedStateFromProps&&lo(c.__s==c.state?c.__s=lo({},c.__s):c.__s,y.getDerivedStateFromProps(v,c.__s)),p=c.props,h=c.state,f)null==y.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==y.getDerivedStateFromProps&&null==c.__e&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(v,b),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(v,c.__s,b)){for(c.props=v,c.state=c.__s,c.__d=!1,(c.__v=e).__e=n.__e,e.__k=n.__k,u=0;u<e.__k.length;u++)e.__k[u]&&(e.__k[u].__p=e);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(v,c.__s,b),null!=c.componentDidUpdate&&c.__h.push(function(){c.componentDidUpdate(p,h,d)})}c.context=b,c.props=v,c.state=c.__s,(u=Qi.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=t,u=c.render(c.props,c.state,c.context),e.__k=_o(null!=u&&u.type==po&&null==u.key?u.props.children:u),null!=c.getChildContext&&(r=lo(lo({},r),c.getChildContext())),f||null==c.getSnapshotBeforeUpdate||(d=c.getSnapshotBeforeUpdate(p,h)),yo(t,e,n,r,i,o,a,s,l),c.base=e.__e,c.__h.length&&a.push(c),g&&(c.__E=c.__p=null),c.__e=null}else e.__e=function(t,e,n,r,i,o,a,s){var l,u,c,f,p,h=n.props,d=e.props;if(i="svg"===e.type||i,null==t&&null!=o)for(l=0;l<o.length;l++)if(null!=(u=o[l])&&(null===e.type?3===u.nodeType:u.localName===e.type)){t=u,o[l]=null;break}if(null==t){if(null===e.type)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),o=null}if(null===e.type)null!=o&&(o[o.indexOf(t)]=null),h!==d&&(t.data=d);else if(e!==n){if(null!=o&&(o=ao.slice.call(t.childNodes)),c=(h=n.props||oo).dangerouslySetInnerHTML,f=d.dangerouslySetInnerHTML,!s){if(h===oo)for(h={},p=0;p<t.attributes.length;p++)h[t.attributes[p].name]=t.attributes[p].value;(f||c)&&(f&&c&&f.__html==c.__html||(t.innerHTML=f&&f.__html||""))}(function(t,e,n,r,i){var o;for(o in n)o in e||wo(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"value"===o||"checked"===o||n[o]===e[o]||wo(t,o,e[o],n[o],r)})(t,d,h,i,s),e.__k=e.props.children,f||yo(t,e,n,r,"foreignObject"!==e.type&&i,o,a,oo,s),s||("value"in d&&void 0!==d.value&&d.value!==t.value&&(t.value=null==d.value?"":d.value),"checked"in d&&void 0!==d.checked&&d.checked!==t.checked&&(t.checked=d.checked))}return t}(n.__e,e,n,r,i,o,a,l);(u=Qi.diffed)&&u(e)}catch(t){Qi.__e(t,e,n)}return e.__e}function Mo(t,e){Qi.__c&&Qi.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){Qi.__e(t,e.__v)}})}function Co(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){Qi.__e(t,n)}}function Do(t,e,n){var r,i,o;if(Qi.unmount&&Qi.unmount(t),(r=t.ref)&&Co(r,null,e),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=null,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){Qi.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&Do(r[o],e,n);null!=i&&uo(i)}function Oo(t,e,n){return this.constructor(t,n)}function Po(t,e,n){var r,i,o;Qi.__p&&Qi.__p(t,e),i=(r=n===ro)?null:n&&n.__k||e.__k,t=co(po,null,[t]),o=[],Eo(e,(r?e:n||e).__k=t,i||oo,oo,void 0!==e.ownerSVGElement,n&&!r?[n]:i?null:ao.slice.call(e.childNodes),o,n||oo,r),Mo(o,t)}Qi={},ho.prototype.setState=function(t,e){var n=this.__s!==this.state&&this.__s||(this.__s=lo({},this.state));"function"==typeof t&&!(t=t(n,this.props))||lo(n,t),null!=t&&this.__v&&(this.__e=!1,e&&this.__h.push(e),mo(this))},ho.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),mo(this))},ho.prototype.render=po,to=[],eo="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,no=Qi.debounceRendering,Qi.__e=function(t,e,n){for(var r;e=e.__p;)if((r=e.__c)&&!r.__p)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(t));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(t)}return mo(r.__E=r)}catch(e){t=e}throw t},ro=oo;var Ro,zo=[],ko=Qi.__r;Qi.__r=function(t){ko&&ko(t),(Ro=t.__c).__H&&(Ro.__H.t.forEach(Yo),Ro.__H.t.forEach(Xo),Ro.__H.t=[])};var Bo=Qi.diffed;Qi.diffed=function(t){Bo&&Bo(t);var e=t.__c;if(e){var n=e.__H;n&&n.t.length&&No(zo.push(e))}};var Go=Qi.__c;Qi.__c=function(t,e){e.some(function(t){t.__h.forEach(Yo),t.__h=t.__h.filter(function(t){return!t.u||Xo(t)})}),Go&&Go(t,e)};var Ao=Qi.unmount;Qi.unmount=function(t){Ao&&Ao(t);var e=t.__c;if(e){var n=e.__H;n&&n.i.forEach(function(t){return t.m&&t.m()})}};var No=function(){};function To(){zo.some(function(t){t.__P&&(t.__H.t.forEach(Yo),t.__H.t.forEach(Xo),t.__H.t=[])}),zo=[]}if("undefined"!=typeof window){var jo=Qi.requestAnimationFrame;No=function(t){1!==t&&jo===Qi.requestAnimationFrame||((jo=Qi.requestAnimationFrame)||function(t){function e(){clearTimeout(n),cancelAnimationFrame(r),setTimeout(t)}var n=setTimeout(e,100),r=requestAnimationFrame(e)})(To)}}function Yo(t){t.m&&t.m()}function Xo(t){var e=t.u();"function"==typeof e&&(t.m=e)}var Fo=Qi.__e;Qi.__e=function(t,e,n){if(t.then&&n)for(var r,i=e;i=i.__p;)if((r=i.__c)&&r.o)return n&&(e.__e=n.__e,e.__k=n.__k),void r.o(t);Fo(t,e,n)},(new ho).o=function(t){var e=this;e.__u.push(t);function n(){e.__u[e.__u.indexOf(t)]=e.__u[e.__u.length-1],e.__u.pop(),0==e.__u.length&&(e.__f&&Do(e.__f),e.__v.__e=null,e.__v.__k=e.state.u,e.setState({u:null}))}null==e.state.u&&(e.__f=e.__f&&function(t,e){return e=lo(lo({},t.props),e),2<arguments.length&&(e.children=ao.slice.call(arguments,2)),fo(t.type,e,e.key||t.key,e.ref||t.ref)}(e.__f),e.setState({u:e.__v.__k}),function t(e){for(var n=0;n<e.length;n++){var r=e[n];null!=r&&("function"!=typeof r.type&&r.__e?(i=r.__e,o=void 0,(o=i.parentNode)&&o.removeChild(i)):r.__k&&t(r.__k))}var i,o}(e.__v.__k),e.__v.__k=[]),t.then(n,n)};var Io="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,qo=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,Wo=Qi.event;Qi.event=function(t){return Wo&&(t=Wo(t)),t.persist=function(){},t.nativeEvent=t};var Lo=function(){};function Ho(t){var e=this,n=t.container,r=co(Lo,{context:e.context},t.vnode);return e.i&&e.i!==n&&(e.l.parentNode&&e.i.removeChild(e.l),Do(e.s),e.v=!1),t.vnode?e.v?(n.__k=e.__k,Po(r,n),e.__k=n.__k):(e.l=document.createTextNode(""),function(t,e){Po(t,e,ro)}("",n),n.appendChild(e.l),e.v=!0,Po(r,e.i=n,e.l),e.__k=this.l.__k):e.v&&(e.l.parentNode&&e.i.removeChild(e.l),Do(e.s)),e.s=r,e.componentWillUnmount=function(){e.l.parentNode&&e.i.removeChild(e.l),Do(e.s)},null}function Uo(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=co.apply(void 0,t),r=n.type,i=n.props;return"function"!=typeof r&&(i.defaultValue&&(i.value||0===i.value||(i.value=i.defaultValue),delete i.defaultValue),Array.isArray(i.value)&&i.multiple&&"select"===r&&(_o(i.children).forEach(function(t){-1!=i.value.indexOf(t.props.value)&&(t.props.selected=!0)}),delete i.value),function(t,e){var n,r,i;for(i in e)if(n=qo.test(i))break;if(n)for(i in r=t.props={},e)r[qo.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=e[i]}(n,i)),n.preactCompatNormalized=!1,function(e){return e.preactCompatNormalized=!0,function(){var t=e.props;(t.class||t.className)&&(Ko.enumerable="className"in t,t.className&&(t.class=t.className),Object.defineProperty(t,"className",Ko))}(),e}(n)}Lo.prototype.getChildContext=function(){return this.props.context},Lo.prototype.render=function(t){return t.children};var Ko={configurable:!0,get:function(){return this.class}};function Vo(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}var $o,Zo=(($o=ho)&&(Jo.__proto__=$o),((Jo.prototype=Object.create($o&&$o.prototype)).constructor=Jo).prototype.shouldComponentUpdate=function(t,e){return Vo(this.props,t)||Vo(this.state,e)},Jo);function Jo(t){$o.call(this,t),this.isPureReactComponent=!0}function Qo(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(t){this["UNSAFE_"+e]=t}})}ho.prototype.isReactComponent={};var ta=Qi.vnode;Qi.vnode=function(o){o.$$typeof=Io,function(){var t=o.type,e=o.props;if(e&&"string"==typeof t){var n={};for(var r in e)/^on(Ani|Tra)/.test(r)&&(e[r.toLowerCase()]=e[r],delete e[r]),n[r.toLowerCase()]=r;if(n.ondoubleclick&&(e.ondblclick=e[n.ondoubleclick],delete e[n.ondoubleclick]),n.onbeforeinput&&(e.onbeforeinput=e[n.onbeforeinput],delete e[n.onbeforeinput]),n.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|ra/i.test(e.type))){var i=n.oninput||"oninput";e[i]||(e[i]=e[n.onchange],delete e[n.onchange])}}}();var t=o.type;t&&t.t&&o.ref&&(o.props.ref=o.ref,o.ref=null),"function"==typeof t&&!t.p&&t.prototype&&(Qo(t.prototype,"componentWillMount"),Qo(t.prototype,"componentWillReceiveProps"),Qo(t.prototype,"componentWillUpdate"),t.p=!0),ta&&ta(o)};var ea=function(t,e){return(ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var na=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}!function(t,e){function n(){this.constructor=t}ea(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,e);var n=t.prototype;return n.render=function(){return Uo("canvas",{ref:p(this,"canvasElement"),style:this.props.style})},n.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},n.componentDidUpdate=function(){this.resize()},n.scroll=function(t){this.draw(t)},n.resize=function(){var t=this.canvasElement,e=this.props,n=e.width,r=e.height;this.width=n||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw()},n.draw=function(t){void 0===t&&(t=this.state.scrollPos);var e=this.props,n=e.unit,r=e.zoom,i=e.type,o=e.backgroundColor,a=e.lineColor,s=this.width,l=this.height;this.state.scrollPos=t;var u=this.canvasContext,c="horizontal"===i;u.rect(0,0,2*s,2*l),u.fillStyle=o,u.fill(),u.save(),u.scale(2,2),u.strokeStyle=a,u.lineWidth=1,u.font="10px sans-serif",u.fillStyle="#ffffff",u.translate(.5,0),u.beginPath();for(var f=c?s:l,p=r*n,h=Math.floor(t*r/p),d=Math.ceil((t*r+f)/p)-h,g=0;g<d;++g){var v=((g+h)*n-t)*r;if(-p<=v&&v<f){var m=c?3+v:s-18,b=c?l-18:v-4;c?u.fillText(""+(g+h)*n,m,b):(u.save(),u.translate(m,b),u.rotate(-Math.PI/2),u.fillText(""+(g+h)*n,0,0),u.restore())}for(var y=0;y<10;++y){var _=v+y/10*p;if(!(_<0||f<=_)){var x=0===y?c?l:s:y%2==0?10:7,w=c?_:s-x,S=c?_:s,E=c?l-x:_,M=c?l:_;u.moveTo(w,E),u.lineTo(S,M)}}}u.stroke(),u.restore()},t.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,style:{width:"100%",height:"100%"},backgroundColor:"#333333",lineColor:"#777777"},t}(Zo),ra=function(){return(ra=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ia(t,e,n,r){var i=fa(t),o=fa(e),a=fa(r);return aa(pa(r[0],ha(i,a)),pa(r[0],ha(o,a)),n[0])}function oa(t){return t.touches?ua(t.touches):[ca(t)]}function aa(t,e,n){var r=t.clientX,i=t.clientY;return{clientX:r,clientY:i,deltaX:r-e.clientX,deltaY:i-e.clientY,distX:r-n.clientX,distY:i-n.clientY}}function sa(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function la(t,n,r){return t.map(function(t,e){return aa(t,n[e],r[e])})}function ua(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ca(t[r]));return n}function ca(t){return{clientX:t.clientX,clientY:t.clientY}}function fa(t){return{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function pa(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function ha(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var da=function(){function t(t,e){var o=this;void 0===e&&(e={}),this.el=t,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.onDragStart=function(t){if(o.flag||!1!==t.cancelable){if(function(t){return t.touches&&2<=t.touches.length}(t)){if(!o.flag&&t.touches.length!==t.changedTouches.length)return;o.pinchFlag||o.onPinchStart(t)}if(!o.flag){var e=o.startClients[0]?o.startClients:oa(t);o.customDist=[0,0],o.flag=!0,o.isDrag=!1,o.startClients=e,o.prevClients=e,o.datas={};var n=aa(e[o.movement=0],o.prevClients[0],o.startClients[0]),r=o.options,i=r.dragstart;(r.preventRightClick&&3===t.which||!1===(i&&i(ra({datas:o.datas,inputEvent:t},n))))&&(o.startClients=[],o.prevClients=[],o.flag=!1),o.flag&&t.preventDefault()}}},this.onDrag=function(t,e){if(o.flag){var n=oa(t);o.pinchFlag&&o.onPinch(t,n);var r=o.move([0,0],t,n);if(r&&(r.deltaX||r.deltaY)){var i=o.options.drag;i&&i(ra({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(o.flag){o.pinchFlag&&o.onPinchEnd(t),o.flag=!1;var e=o.options.dragend,n=o.prevClients,r=o.startClients,i=o.pinchFlag?ia(n,n,r,o.startPinchClients):aa(n[0],n[0],r[0]);o.startClients=[],o.prevClients=[],e&&e(ra({datas:o.datas,isDrag:o.isDrag,inputEvent:t},i))}},this.options=ra({container:t,preventRightClick:!0,pinchThreshold:0,events:["touch","mouse"]},e);var n=this.options,r=n.container,i=n.events;if(this.isTouch=-1<i.indexOf("touch"),this.isMouse=-1<i.indexOf("mouse"),this.customDist=[0,0],this.isMouse&&(L(t,"mousedown",this.onDragStart),L(r,"mousemove",this.onDrag),L(r,"mouseup",this.onDragEnd)),this.isTouch){var a={passive:!1};L(t,"touchstart",this.onDragStart,a),L(r,"touchmove",this.onDrag,a),L(r,"touchend",this.onDragEnd,a)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(e,n,t,r){void 0===r&&(r=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),r&&this.onDrag(t,!0))},e.move=function(t,e,n){var r=t[0],i=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,l=this.pinchFlag?ia(n,a,s,this.startPinchClients):aa(n[0],a[0],s[0]);o[0]+=r,o[1]+=i,l.deltaX+=r,l.deltaY+=i;var u=l.deltaX,c=l.deltaY;return l.distX+=o[0],l.distY+=o[1],this.movement+=Math.sqrt(u*u+c*c),this.prevClients=n,this.isDrag=!0,ra({datas:this.datas},l,{isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,r=this.options,i=r.pinchstart,o=r.pinchThreshold;if(!(this.isDrag&&this.movement>o)){var a=ua(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,a),(n=this.prevClients).push.apply(n,a),this.startDistance=sa(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,l=fa(s),u=aa(l,l,l);i(ra({datas:this.datas,touches:la(s,s,s)},u,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,i=this.startClients,o=aa(fa(e),fa(r),fa(i)),a=sa(e);n(ra({datas:this.datas,touches:la(e,r,i),scale:a/this.startDistance,distance:a},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,i=this.startClients,o=aa(fa(r),fa(r),fa(i));n(ra({datas:this.datas,isPinch:e,touches:la(r,r,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.unset=function(){var t=this.el,e=this.options.container;this.isMouse&&(H(t,"mousedown",this.onDragStart),H(e,"mousemove",this.onDrag),H(e,"mouseup",this.onDragEnd)),this.isTouch&&(H(t,"touchstart",this.onDragStart),H(e,"touchmove",this.onDrag),H(e,"touchend",this.onDragEnd))},t}();var ga=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function va(i){var o,a="rCS"+function(t){return ga(t).toString(36)}(i),s=0;return{className:a,inject:function(t){var e,n=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===s;return(n||r)&&(e=function(n,t,e){var r=document.createElement("style");return r.setAttribute("type","text/css"),r.innerHTML=t.replace(/([^}{]*){/gm,function(t,e){return G(e).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+n):"."+n+" "+t}).join(", ")+"{"}),(e||document.head||document.body).appendChild(r),r}(a,i)),r&&(o=e),n||++s,{destroy:function(){n?(t.removeChild(e),e=null):(0<s&&--s,0===s&&o&&(o.parentNode.removeChild(o),o=null))}}}}}var ma=function(t,e){return(ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ba=function(){return(ba=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var ya=function(t,e){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function _a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,["scena-"].concat(t))}_a("ruler");var xa,wa,Sa,Ea=_a("guide","adder"),Ma=_a("guides"),Ca=_a("guide"),Da=_a("dragging"),Oa=(xa="div",wa='\n{\n    position: relative;\n}\ncanvas {\n    position: relative;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'.replace(/\.([^{,\s\d.]+)/g,"."+"scena-"+"$1"),Sa=va(wa),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}ma(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className"]);return Uo(xa,ba({ref:function(e,n){return function(t){t&&(e[n]=t)}}(this,"element"),className:n+" "+Sa.className},r))},e.prototype.componentDidMount=function(){this.injectResult=Sa.inject(this.element)},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(ho)),Pa=function(t){function e(){var u=null!==t&&t.apply(this,arguments)||this;return u.state={guides:[]},u.scrollPos=0,u.guideElements=[],u.onDragStart=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i=t.inputEvent,o="horizontal"===u.props.type,a=u.guidesElement.getBoundingClientRect();e.offset=o?a.top:a.left,q(e.target,Da),u.onDrag({datas:e,clientX:n,clientY:r}),i.stopPropagation(),i.preventDefault()},u.onDrag=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i="horizontal"===u.props.type,o=Math.round((i?r:n)-e.offset);return e.target.style.transform=u.getTranslateName()+"("+o+"px)",o},u.onDragEnd=function(t){var e=t.datas,n=t.clientX,r=t.clientY,i=u.onDrag({datas:e,clientX:n,clientY:r}),o=u.state.guides,a=u.props.setGuides,s=Math.round(i/u.props.zoom);if(W(e.target,Da),e.fromRuler)i>=u.scrollPos&&o.indexOf(s)<0&&u.setState({guides:o.concat([s])},function(){a(u.state.guides)});else{var l=e.target.getAttribute("data-index");i<u.scrollPos||-1<o.indexOf(s)?o.splice(l,1):o[l]=s,u.setState({guides:o.slice()},function(){a(u.state.guides)})}},u}!function(t,e){function n(){this.constructor=t}ya(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=t.type,r=t.width,i=t.height,o=t.unit,a=t.zoom,s=t.style,l=t.rulerStyle,u=t.backgroundColor,c=t.lineColor,f=t.textColor;return Uo(Oa,{ref:p(this,"manager"),className:_a("manager",n)+" "+e,style:s},Uo(na,{ref:p(this,"ruler"),type:n,width:r,height:i,unit:o,zoom:a,backgroundColor:u,lineColor:c,style:l,textColor:f}),Uo("div",{className:Ma,ref:p(this,"guidesElement")},Uo("div",{className:Ea,ref:p(this,"adderElement")}),this.renderGuides()))},n.renderGuides=function(){var n=this,t=this.props,r=t.type,i=t.zoom,o="horizontal"===r?"translateY":"translateX",e=this.state.guides;return this.guideElements=[],e.map(function(t,e){return Uo("div",{className:_a("guide",r),ref:function(e,n,r){return function(t){t&&(e[n][r]=t)}}(n,"guideElements",e),key:e,"data-index":e,style:{transform:o+"("+t*i+"px)"}})})},n.componentDidMount=function(){var r=this;this.dragger=new da(this.manager.getElement(),{container:document.body,dragstart:function(t){var e=t.inputEvent.target,n=t.datas;if(e===r.ruler.canvasElement)t.datas.fromRuler=!0,n.target=r.adderElement;else{if(!I(e,Ca))return!1;n.target=e}r.onDragStart(t)},drag:this.onDrag,dragend:this.onDragEnd})},n.componentWillUnmount=function(){this.dragger.unset()},n.getGuides=function(){return this.state.guides},n.scrollGuides=function(n){var t=this.props.zoom,e=this.guidesElement;this.scrollPos=n,e.style.transform=this.getTranslateName()+"("+-n*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,e){t&&(t.style.display=-n+r[e]<0?"none":"block")})},n.resize=function(){this.ruler.resize()},n.scroll=function(t){this.ruler.scroll(t)},n.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},e.defaultProps={className:"",type:"horizontal",setGuides:function(){},zoom:1,style:{width:"100%",height:"100%"}},e}(Zo),Ra=function(t,e){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var za=function(){return(za=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var ka=["setGuides","type","width","height","rulerStyle","unit","zoom","style","backgroundColor","lineColor","container","className","textColor"],Ba=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return function(t,e){function n(){this.constructor=t}Ra(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,n),t.prototype.render=function(){var t=this.state,e=t.container,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["container"]);return function(t,e){return co(Ho,{vnode:t,container:e})}(co(Pa,za({ref:p(this,"preactGuides")},n)),e)},t}(ho),Ga=function(){function t(t,e){void 0===e&&(e={}),this.tempElement=document.createElement("div"),Po(co(Ba,za({ref:p(this,"innerGuides")},e,{container:t})),this.tempElement)}var e=t.prototype;return e.scroll=function(t){this.getPreactGuides().scroll(t)},e.scrollGuides=function(t){this.getPreactGuides().scrollGuides(t)},e.resize=function(){this.getPreactGuides().resize()},e.getGuides=function(){return this.getPreactGuides().getGuides()},e.setState=function(t,e){this.innerGuides.setState(t,e)},e.destroy=function(){Po("",this.tempElement),this.tempElement=null,this.innerGuides=null},e.getPreactGuides=function(){return this.innerGuides.preactGuides},t=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([o(ka,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getPreactGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(),Aa=function(t,e){return(Aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Na,Ta=(function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,r=String(t);return(n=i[r.toLowerCase()])?n:(n=o[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var r;if(r=i[e.toLowerCase()])return r===n;if(r=o[e.toLowerCase()])return r===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var a=e.names=e.title={};for(r in i)a[i[r]]=r;for(var s in o)i[s]=o[s]}(Na={exports:{}},Na.exports),Na.exports),ja=(Ta.code,Ta.codes,Ta.aliases,Ta.names);Ta.title;function Ya(t){return Array.isArray(t)}function Xa(t){return"string"==typeof t}function Fa(t,e,n,r){t.addEventListener(e,n,r)}var Ia,qa={"+":"plus","left command":"meta","right command":"meta"},Wa={shift:1,ctrl:2,alt:3,meta:4};function La(t){var e=ja[t]||"";for(var n in qa)e=e.replace(n,qa[n]);return e.replace(/\s/g,"")}function Ha(t){var e=t.slice();return e.sort(function(t,e){return(Wa[t]||5)-(Wa[e]||5)}),e}var Ua=function(n){function t(t){void 0===t&&(t=window);var e=n.call(this)||this;return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(t){e.triggerEvent("keydown",t)},e.keyupEvent=function(t){e.triggerEvent("keyup",t)},Fa(t,"blur",e.clear),Fa(t,"keydown",e.keydownEvent),Fa(t,"keyup",e.keyupEvent),e}!function(t,e){function n(){this.constructor=t}Aa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,n);var e=t.prototype;return Object.defineProperty(t,"global",{get:function(){return Ia=Ia||new t},enumerable:!0,configurable:!0}),e.keydown=function(t,e){return this.addEvent("keydown",t,e)},e.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},e.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},e.keyup=function(t,e){return this.addEvent("keyup",t,e)},e.addEvent=function(t,e,n){return Ya(e)?this.on(t+"."+Ha(e).join("."),n):Xa(e)?this.on(t+"."+e,n):this.on(t,e),this},e.removeEvent=function(t,e,n){return Ya(e)?this.off(t+"."+Ha(e).join("."),n):Xa(e)?this.off(t+"."+e,n):this.off(t,e),this},e.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=La(e.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var i=function(t,e){void 0===e&&(e=La(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}(e,n);1<i.length&&this.trigger(t+"."+i.join("."),r)},t}(t),Ka=At();(Ka.isMobile||-1<Ka.os.name.indexOf("ios")||-1<Ka.browser.name.indexOf("safari"))&&q(document.body,"mobile");var Va=document.querySelector(".editor .view"),$a=document.querySelector(".label"),Za=document.querySelector(".rulers"),Ja=Za.querySelector(".ruler.horizontal"),Qa=Za.querySelector(".ruler.vertical"),ts=document.querySelector('.control input[name="x"]'),es=document.querySelector('.control input[name="y"]'),ns=document.querySelector('.control input[name="w"]'),rs=document.querySelector('.control input[name="h"]'),is=document.querySelector('.control input[name="r"]'),os=document.querySelector(".moveable.target"),as=new io({left:"0px",top:"0px",width:"250px",height:"200px",transform:{translateX:window.innerWidth/2-125+"px",translateY:Math.max(700,window.innerHeight)/2-250+"px",rotate:"0deg",scaleX:1,scaleY:1}});function ss(t,e){function n(){e(t.value)}new Ua(t).keyup("enter",n),t.addEventListener("blur",n)}function ls(t){as.set("transform","translateX",t[0]+"px"),as.set("transform","translateY",t[1]+"px"),setTimeout(function(){var t=fs.getRect();ts.value=""+Math.round(10*t.left)/10,es.value=""+Math.round(10*t.top)/10})}function us(){os.style.cssText+=as.toCSS()}ss(ts,function(t){fs.request("draggable",{x:parseFloat(t),isInstant:!0})}),ss(es,function(t){fs.request("draggable",{y:parseFloat(t),isInstant:!0})}),ss(ns,function(t){fs.request("resizable",{offsetWidth:parseFloat(t),isInstant:!0})}),ss(rs,function(t){fs.request("resizable",{offsetHeight:parseFloat(t),isInstant:!0})}),ss(is,function(t){fs.request("rotatable",{deltaRotate:parseFloat(t)-parseFloat(as.get("transform","rotate")),isInstant:!0})}),ts.value=""+parseFloat(as.get("transform","translateX")),es.value=""+parseFloat(as.get("transform","translateY")),us();var cs=!1,fs=new _i(Va,{target:os,draggable:!0,resizable:!0,rotatable:!0,snappable:!0,pinchable:!0,snapCenter:!0,snapThreshold:10,throttleResize:0,throttleRotate:1,keepRatio:!1,origin:!1,bounds:{left:0,top:0}}).on("dragStart",function(t){(0,t.set)([parseFloat(as.get("transform","translateX")),parseFloat(as.get("transform","translateY"))])}).on("drag",function(t){ls(t.beforeTranslate)}).on("rotateStart",function(t){(0,t.set)(parseFloat(as.get("transform","rotate")))}).on("rotate",function(t){var e=t.beforeRotate,n=t.clientX,r=t.clientY,i=t.isPinch;as.set("transform","rotate",e+"deg"),is.value=e+"°",i||gs(n,r,e+"°")}).on("resizeStart",function(t){var e=t.setOrigin,n=t.dragStart;e(["%","%"]),n&&n.set([parseFloat(as.get("transform","translateX")),parseFloat(as.get("transform","translateY"))])}).on("resize",function(t){var e=t.width,n=t.height,r=t.drag,i=t.clientX,o=t.clientY,a=t.isPinch;as.set("width",e+"px"),as.set("height",n+"px"),ls(r.beforeTranslate),ns.value=""+e,rs.value=""+n,a||gs(i,o,e+" X "+n)}).on("pinchStart",function(){cs=!0}).on("pinch",function(t){ds(t.clientX,t.clientY)}).on("render",function(){cs&&($a.innerHTML="W: "+parseFloat(as.get("width"))+"<br/>H: "+parseFloat(as.get("height"))+"<br/>R: "+parseFloat(as.get("transform","rotate"))+"°"),us()}).on("renderEnd",function(){cs=!1,$a.style.display="none"}),ps=new Ga(Ja,{type:"horizontal",setGuides:vs,backgroundColor:"#444444"}),hs=new Ga(Qa,{type:"vertical",setGuides:vs,backgroundColor:"#444444"});function ds(t,e){$a.style.cssText="display: block; transform: translate("+t+"px, "+(e-10)+"px) translate(-100%, -100%);"}function gs(t,e,n){ds(t,e),$a.innerHTML=n}function vs(){var t=window.innerWidth/2+15,e=window.innerHeight/2;fs.verticalGuidelines=n(hs.getGuides(),[t]),fs.horizontalGuidelines=n(ps.getGuides(),[e])}function ms(t){t?(fs.throttleRotate=30,fs.throttleDragRotate=45,fs.keepRatio=!0):(fs.throttleRotate=1,fs.throttleDragRotate=0,fs.keepRatio=!1)}Ua.global.on("keydown",function(t){ms(t.shiftKey)}).on("keyup",function(t){ms(t.shiftKey)}),window.addEventListener("resize",function(){vs(),fs.updateRect(),ps.resize(),hs.resize()}),document.body.addEventListener("gesturestart",function(t){t.preventDefault()}),vs();var bs=document.querySelector(".draggable"),ys=new _i(bs.parentElement,{target:bs,origin:!1,draggable:!0}).on("drag",function(t){var e=t.target,n=t.transform;e.style.transform=n}),_s=document.querySelector(".resizable"),xs=new _i(_s.parentElement,{target:_s,origin:!1,resizable:!0}).on("resize",function(t){var e=t.target,n=t.width,r=t.height;e.style.width=n+"px",e.style.height=r+"px"}),ws=document.querySelector(".scalable"),Ss=new _i(ws.parentElement,{target:ws,origin:!1,scalable:!0}).on("scale",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Es=document.querySelector(".rotatable"),Ms=new _i(Es.parentElement,{target:Es,origin:!1,rotatable:!0}).on("rotate",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Cs=document.querySelector(".warpable"),Ds=new _i(Cs.parentElement,{target:Cs,warpable:!0,origin:!1}).on("warp",function(t){var e=t.target,n=t.transform;e.style.transform=n}),Os=document.querySelector(".snappable"),Ps=(new _i(Os.parentElement,{target:Os,draggable:!0,snappable:!0,snapCenter:!0,origin:!1,verticalGuidelines:[0,150,200],horizontalGuidelines:[0,150,200]}).on("drag",function(t){var e=t.target,n=t.left,r=t.top;e.style.left=n+"px",e.style.top=r+"px"}),document.querySelector(".pinchable")),Rs=[1,1],zs=0,ks=new _i(Ps.parentElement,{target:Ps,pinchable:["rotatable","scalable"],origin:!1}).on("rotate",function(t){var e=t.beforeDelta;zs+=e,Ps.style.transform="scale("+Rs.join(", ")+") rotate("+zs+"deg)"}).on("scale",function(t){var e=t.delta;Rs[0]*=e[0],Rs[1]*=e[1],Ps.style.transform="scale("+Rs.join(", ")+") rotate("+zs+"deg)"}),Bs=document.querySelector(".groupable"),Gs=[[0,0],[0,0],[0,0]],As=new _i(Bs.parentElement,{target:[].slice.call(Bs.querySelectorAll("span")),origin:!1,draggable:!0}).on("dragGroup",function(t){t.events.forEach(function(t,e){var n=t.target,r=t.beforeDelta;Gs[e][0]+=r[0],Gs[e][1]+=r[1],n.style.transform="translate("+Gs[e][0]+"px, "+Gs[e][1]+"px)"})});window.addEventListener("resize",function(){ys.updateRect(),xs.updateRect(),Ss.updateRect(),Ms.updateRect(),Ds.updateRect(),ks.updateRect(),As.updateRect()}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(function(t){var e=t.getAttribute("data-group"),n=t.getAttribute("data-panel"),r=t.querySelector("code"),i=xi[e]["preact"===n?"react":n].trim();"preact"===n&&(i=i.replace(/react/g,"preact")),r.innerText=i,hljs.highlightBlock(r)})});var Ns={};[].slice.call(document.querySelectorAll("[data-tab]")).forEach(function(r){var t=r.getAttribute("data-group"),e=r.getAttribute("data-tab"),n=document.querySelector('[data-group="'+t+'"][data-panel="'+e+'"]');Ns[t]||(Ns[t]=[]),Ns[t].push([r,n]),r.addEventListener("click",function(){Ns[t].forEach(function(t){var e=t[0],n=t[1];r!==e&&(e.classList.remove("selected"),n.classList.remove("selected"))}),r.classList.add("selected"),n.classList.add("selected")})})}();
